"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[74738],{198122:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>c,toc:()=>l});var t=n(785893),s=n(603905);const a={sidebar_position:8040,slug:"2021-03-28",title:"Elasticsearch 7 Timeseries",authors:"mpolinowski",tags:["LINUX","Elasticsearch"]},i=void 0,c={id:"DevOps/Elasticsearch/2021-03-28-elasticsearch7-timeseries/index",title:"Elasticsearch 7 Timeseries",description:"Kathmandu, Nepal",source:"@site/docs/DevOps/Elasticsearch/2021-03-28-elasticsearch7-timeseries/index.md",sourceDirName:"DevOps/Elasticsearch/2021-03-28-elasticsearch7-timeseries",slug:"/DevOps/Elasticsearch/2021-03-28-elasticsearch7-timeseries/2021-03-28",permalink:"/docs/DevOps/Elasticsearch/2021-03-28-elasticsearch7-timeseries/2021-03-28",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Elasticsearch/2021-03-28-elasticsearch7-timeseries/index.md",tags:[{label:"LINUX",permalink:"/docs/tags/linux"},{label:"Elasticsearch",permalink:"/docs/tags/elasticsearch"}],version:"current",sidebarPosition:8040,frontMatter:{sidebar_position:8040,slug:"2021-03-28",title:"Elasticsearch 7 Timeseries",authors:"mpolinowski",tags:["LINUX","Elasticsearch"]},sidebar:"tutorialSidebar",previous:{title:"Elasticsearch 7 Data Transformation",permalink:"/docs/DevOps/Elasticsearch/2021-03-29-elasticsearch7-data-transformations/2021-03-29"},next:{title:"Elasticsearch 7 Aggregations",permalink:"/docs/DevOps/Elasticsearch/2021-03-27-elasticsearch7-aggregations/2021-03-27"}},o={},l=[{value:"How many Events Happend?",id:"how-many-events-happend",level:2},{value:"How many Events had the User Agent Firefox?",id:"how-many-events-had-the-user-agent-firefox",level:2}];function d(e){const r={a:"a",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.ah)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.p,{children:(0,t.jsx)(r.img,{alt:"Kathmandu, Nepal",src:n(175984).Z+"",width:"1500",height:"645"})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"#how-many-events-happend",children:"How many Events Happend?"})}),"\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"#how-many-events-had-the-user-agent-firefox",children:"How many Events had the User Agent Firefox?"})}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"how-many-events-happend",children:"How many Events Happend?"}),"\n",(0,t.jsx)(r.p,{children:"We already worked with Timeseries when we created histograms from our server logs in Kinbana. The query that was run in the background to create those visualisations looks something like:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'curl -H "Content-Type: application/json" -XGET \'localhost:9200/apache-access-log/_search?size=0&pretty\' -d\'\r\n{\r\n  "aggs": {\r\n    "timestamp": {\r\n      "date_histogram": {\r\n        "field": "@timestamp",\r\n        "interval": "day"\r\n      }\r\n    }\r\n  }\r\n}\'\n'})}),"\n",(0,t.jsxs)(r.p,{children:["This will run the query on my ",(0,t.jsx)(r.a,{href:"#apache-access-logs",children:"Apache Access Log"})," and result in a list of how many events (documents) happened each day:"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'"aggregations" : {\r\n    "timestamp" : {\r\n      "buckets" : [\r\n        {\r\n          "key_as_string" : "2017-04-30T00:00:00.000Z",\r\n          "key" : 1493510400000,\r\n          "doc_count" : 14166\r\n        },\r\n        {\r\n          "key_as_string" : "2017-05-01T00:00:00.000Z",\r\n          "key" : 1493596800000,\r\n          "doc_count" : 15948\r\n        },\r\n        {\r\n          "key_as_string" : "2017-05-02T00:00:00.000Z",\r\n          "key" : 1493683200000,\r\n          "doc_count" : 16278\r\n        },\r\n        {\r\n          "key_as_string" : "2017-05-03T00:00:00.000Z",\r\n          "key" : 1493769600000,\r\n          "doc_count" : 21172\r\n        },\r\n        {\r\n          "key_as_string" : "2017-05-04T00:00:00.000Z",\r\n          "key" : 1493856000000,\r\n          "doc_count" : 16762\r\n        },\r\n        {\r\n          "key_as_string" : "2017-05-05T00:00:00.000Z",\r\n          "key" : 1493942400000,\r\n          "doc_count" : 18646\r\n        }\r\n      ]\r\n    }\r\n  }\n'})}),"\n",(0,t.jsx)(r.h2,{id:"how-many-events-had-the-user-agent-firefox",children:"How many Events had the User Agent Firefox?"}),"\n",(0,t.jsx)(r.p,{children:"Just as before we are now able to combine our aggregation with a filter query that narrows down our results. For example, how many user that interacted with our web service used Firefox as their browser:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'curl -H "Content-Type: application/json" -XGET \'localhost:9200/apache-access-log/_search?size=0&pretty\' -d\'\r\n{\r\n  "query" : {\r\n    "match": {\r\n      "agent.name": "Firefox"\r\n    }\r\n  },\r\n  "aggs": {\r\n    "timestamp": {\r\n      "date_histogram": {\r\n        "field": "@timestamp",\r\n        "interval": "day"\r\n      }\r\n    }\r\n  }\r\n}\'\n'})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'"aggregations" : {\r\n    "timestamp" : {\r\n      "buckets" : [\r\n        {\r\n          "key_as_string" : "2017-04-30T00:00:00.000Z",\r\n          "key" : 1493510400000,\r\n          "doc_count" : 1532\r\n        },\r\n        {\r\n          "key_as_string" : "2017-05-01T00:00:00.000Z",\r\n          "key" : 1493596800000,\r\n          "doc_count" : 2551\r\n        },\r\n        {\r\n          "key_as_string" : "2017-05-02T00:00:00.000Z",\r\n          "key" : 1493683200000,\r\n          "doc_count" : 2861\r\n        },\r\n        {\r\n          "key_as_string" : "2017-05-03T00:00:00.000Z",\r\n          "key" : 1493769600000,\r\n          "doc_count" : 2615\r\n        },\r\n        {\r\n          "key_as_string" : "2017-05-04T00:00:00.000Z",\r\n          "key" : 1493856000000,\r\n          "doc_count" : 1099\r\n        },\r\n        {\r\n          "key_as_string" : "2017-05-05T00:00:00.000Z",\r\n          "key" : 1493942400000,\r\n          "doc_count" : 1264\r\n        }\r\n      ]\r\n    }\r\n  }\n'})})]})}function h(e={}){const{wrapper:r}={...(0,s.ah)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},603905:(e,r,n)=>{n.d(r,{ah:()=>l});var t=n(667294);function s(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function a(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function i(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a(Object(n),!0).forEach((function(r){s(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function c(e,r){if(null==e)return{};var n,t,s=function(e,r){if(null==e)return{};var n,t,s={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||(s[n]=e[n]);return s}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var o=t.createContext({}),l=function(e){var r=t.useContext(o),n=r;return e&&(n="function"==typeof e?e(r):i(i({},r),e)),n},d={inlineCode:"code",wrapper:function(e){var r=e.children;return t.createElement(t.Fragment,{},r)}},h=t.forwardRef((function(e,r){var n=e.components,s=e.mdxType,a=e.originalType,o=e.parentName,h=c(e,["components","mdxType","originalType","parentName"]),p=l(n),u=s,m=p["".concat(o,".").concat(u)]||p[u]||d[u]||a;return n?t.createElement(m,i(i({ref:r},h),{},{components:n})):t.createElement(m,i({ref:r},h))}));h.displayName="MDXCreateElement"},175984:(e,r,n)=>{n.d(r,{Z:()=>t});const t=n.p+"assets/images/photo-456tdsfggd_67gfh6dgdf4_d-fbd4676f624c629e309228fcc970b82b.jpg"}}]);