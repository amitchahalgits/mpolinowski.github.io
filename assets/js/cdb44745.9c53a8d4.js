"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[43445],{791492:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>l});var r=t(785893),s=t(603905);const o={sidebar_position:5930,slug:"2024-01-08",title:"vsftp on Ubuntu",authors:"mpolinowski",tags:["LINUX"],description:"Setting up an FTP server on Ubuntu 22.04."},i=void 0,a={id:"DevOps/Linux/2024-01-08--vsftp-ubuntu/index",title:"vsftp on Ubuntu",description:"Setting up an FTP server on Ubuntu 22.04.",source:"@site/docs/DevOps/Linux/2024-01-08--vsftp-ubuntu/index.md",sourceDirName:"DevOps/Linux/2024-01-08--vsftp-ubuntu",slug:"/DevOps/Linux/2024-01-08--vsftp-ubuntu/2024-01-08",permalink:"/docs/DevOps/Linux/2024-01-08--vsftp-ubuntu/2024-01-08",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Linux/2024-01-08--vsftp-ubuntu/index.md",tags:[{label:"LINUX",permalink:"/docs/tags/linux"}],version:"current",sidebarPosition:5930,frontMatter:{sidebar_position:5930,slug:"2024-01-08",title:"vsftp on Ubuntu",authors:"mpolinowski",tags:["LINUX"],description:"Setting up an FTP server on Ubuntu 22.04."},sidebar:"tutorialSidebar",previous:{title:"Linux",permalink:"/docs/category/linux"},next:{title:"From NeoVim to LunarVim",permalink:"/docs/DevOps/Linux/2023-10-28--lunarvim/2023-10-28"}},c={},l=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Test the Connection",id:"test-the-connection",level:3}];function u(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.ah)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Guangzhou, China",src:t(879933).Z+"",width:"1500",height:"615"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#prerequisites",children:"Prerequisites"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#configuration",children:"Configuration"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#test-the-connection",children:"Test the Connection"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(n.p,{children:"Enable SSH (optional):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt update\r\nsudo apt install openssh-server\r\nsudo systemctl status ssh\n"})}),"\n",(0,r.jsx)(n.p,{children:"Open all necessary ports:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo ufw status\r\nsudo ufw allow ssh\r\nsudo ufw allow 20,21,990/tcp\r\nsudo ufw allow 40000:50000/tcp\r\nsudo ufw status\n"})}),"\n",(0,r.jsx)(n.p,{children:"Install vsftp:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt install vsftpd\r\nsudo cp /etc/vsftpd.conf /etc/vsftpd.conf.orig\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo adduser ftpuser\r\nsudo mkdir -p /home/ftpuser/ftp/files\r\nsudo chown nobody:nogroup /home/ftpuser/ftp\r\nsudo chmod a-w /home/ftpuser/ftp\r\nsudo chown ftpuser:ftpuser /home/ftpuser/ftp/files\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo ls -la /home/ftpuser/ftp\r\ntotal 27\r\ndr-xr-xr-x 3 nobody  nogroup 3 Jan  8 17:37 .\r\ndr-xr-x--- 3 ftpuser ftpuser 6 Jan  8 17:33 ..\r\ndr-xr-xr-x 2 ftpuser ftpuser 2 Jan  8 17:37 files\n"})}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo nano /etc/vsftpd.conf\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Example config file /etc/vsftpd.conf\r\nlisten=NO\r\nlisten_ipv6=YES\r\nanonymous_enable=NO\r\nlocal_enable=YES\r\nwrite_enable=YES\r\ndirmessage_enable=YES\r\nuse_localtime=YES\r\nxferlog_enable=YES\r\nconnect_from_port_20=YES\r\nchroot_local_user=YES\r\nsecure_chroot_dir=/var/run/vsftpd/empty\r\npam_service_name=vsftpd\r\nrsa_cert_file=/etc/ssl/certs/ssl-cert-snakeoil.pem\r\nrsa_private_key_file=/etc/ssl/private/ssl-cert-snakeoil.key\r\nssl_enable=NO\r\nuser_sub_token=ftpuser\r\nlocal_root=/home/ftpuser/ftp\r\npasv_min_port=40000\r\npasv_max_port=50000\r\nuserlist_enable=YES\r\nuserlist_file=/etc/vsftpd.userlist\r\nuserlist_deny=NO\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'echo "ftpuser" | sudo tee -a /etc/vsftpd.userlist\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo systemctl restart vsftpd\n"})}),"\n",(0,r.jsx)(n.h3,{id:"test-the-connection",children:"Test the Connection"}),"\n",(0,r.jsx)(n.p,{children:"Create a file:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'echo "vsftpd test file" | sudo tee /home/ftpuser/ftp/files/test.txt\r\nsudo chown ftpuser:ftpuser /home/ftpuser/ftp/files/test.txt\n'})}),"\n",(0,r.jsx)(n.p,{children:"And check if you can download it:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ftp -p ftpuser@192.168.2.111\r\nConnected to 192.168.2.111.\r\n220 (vsFTPd 3.0.5)\r\n331 Please specify the password.\r\nPassword: \r\n230 Login successful.\r\nRemote system type is UNIX.\r\nUsing binary mode to transfer files.\r\nftp> !ls\n"})})]})}function p(e={}){const{wrapper:n}={...(0,s.ah)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},603905:(e,n,t)=>{t.d(n,{ah:()=>l});var r=t(667294);function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function a(e,n){if(null==e)return{};var t,r,s=function(e,n){if(null==e)return{};var t,r,s={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(s[t]=e[t]);return s}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}var c=r.createContext({}),l=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},p=r.forwardRef((function(e,n){var t=e.components,s=e.mdxType,o=e.originalType,c=e.parentName,p=a(e,["components","mdxType","originalType","parentName"]),d=l(t),f=s,h=d["".concat(c,".").concat(f)]||d[f]||u[f]||o;return t?r.createElement(h,i(i({ref:n},p),{},{components:t})):r.createElement(h,i({ref:n},p))}));p.displayName="MDXCreateElement"},879933:(e,n,t)=>{t.d(n,{Z:()=>r});const r=t.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-32dbeca90d3e5d2fc5dae0a82fcd32cc.jpg"}}]);