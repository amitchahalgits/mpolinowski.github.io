"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[79790],{241744:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var r=n(785893),t=n(603905);const i={sidebar_position:8030,slug:"2019-09-24",title:"Installing ioBroker on CentOS8 with Podman",authors:"mpolinowski",tags:["LINUX","Smarthome","IoT","Docker"]},a=void 0,s={id:"Automation_and_Robotics/Home_Automation/2019-09-24--iobroker-podman-centos8/index",title:"Installing ioBroker on CentOS8 with Podman",description:"Shanghai, China",source:"@site/docs/Automation_and_Robotics/Home_Automation/2019-09-24--iobroker-podman-centos8/index.mdx",sourceDirName:"Automation_and_Robotics/Home_Automation/2019-09-24--iobroker-podman-centos8",slug:"/Automation_and_Robotics/Home_Automation/2019-09-24--iobroker-podman-centos8/2019-09-24",permalink:"/docs/Automation_and_Robotics/Home_Automation/2019-09-24--iobroker-podman-centos8/2019-09-24",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Automation_and_Robotics/Home_Automation/2019-09-24--iobroker-podman-centos8/index.mdx",tags:[{label:"LINUX",permalink:"/docs/tags/linux"},{label:"Smarthome",permalink:"/docs/tags/smarthome"},{label:"IoT",permalink:"/docs/tags/io-t"},{label:"Docker",permalink:"/docs/tags/docker"}],version:"current",sidebarPosition:8030,frontMatter:{sidebar_position:8030,slug:"2019-09-24",title:"Installing ioBroker on CentOS8 with Podman",authors:"mpolinowski",tags:["LINUX","Smarthome","IoT","Docker"]},sidebar:"tutorialSidebar",previous:{title:"Zigbee Sensors in FHEM",permalink:"/docs/Automation_and_Robotics/Home_Automation/2019-01-05--zigbee2mqtt-xiaomi-fhem/2019-01-05"},next:{title:"OpenHAB2 and MQTT",permalink:"/docs/Automation_and_Robotics/Home_Automation/2018-12-01--openhab2-on-debian/2018-12-01"}},c={},l=[{value:"Installation through Podman on CentOS8",id:"installation-through-podman-on-centos8",level:2},{value:"Persist your Configuration",id:"persist-your-configuration",level:3}];function d(e){const o={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.ah)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.p,{children:(0,r.jsx)(o.img,{alt:"Shanghai, China",src:n(405718).Z+"",width:"1500",height:"783"})}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsx)(o.li,{children:(0,r.jsx)(o.a,{href:"#installation-through-podman-on-centos8",children:"Installation through Podman on CentOS8"})}),"\n"]}),"\n",(0,r.jsx)(o.h2,{id:"installation-through-podman-on-centos8",children:"Installation through Podman on CentOS8"}),"\n",(0,r.jsxs)(o.p,{children:["IoBroker for Docker is an Dockerimage for ",(0,r.jsx)(o.a,{href:"http://www.iobroker.net",children:"ioBroker IoT platform"}),"."]}),"\n",(0,r.jsxs)(o.p,{children:["The automatically built images are available on ",(0,r.jsx)(o.a,{href:"hhttps://github.com/buanet/docker-iobroker",children:"Docker Hub"}),". Download the image with one of the following command:"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-bash",children:"podman pull buanet/iobroker:latest\n"})}),"\n",(0,r.jsx)(o.p,{children:"And and run it:"}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-bash",children:"podman run -p 8081:8081 --name iobroker buanet/iobroker:latest\n"})}),"\n",(0,r.jsx)(o.p,{children:(0,r.jsx)(o.img,{alt:"ioBroker CentOS8 Podman",src:n(307746).Z+"",width:"825",height:"572"})}),"\n",(0,r.jsx)(o.h3,{id:"persist-your-configuration",children:"Persist your Configuration"}),"\n",(0,r.jsxs)(o.ol,{children:["\n",(0,r.jsx)(o.li,{children:"Find out your container ID (or just use the name you have assigned when running the image)"}),"\n"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-bash",children:"podman ps \r\nCONTAINER ID  IMAGE                                     COMMAND               CREATED         STATUS             PORTS                             NAMES\r\n5582e69da175  localhost/buanet/iobroker:latest          /opt/scripts/iobr...  13 minutes ago  Up 13 minutes ago  0.0.0.0:8081->8081/tcp            iobroker\n"})}),"\n",(0,r.jsxs)(o.ol,{start:"2",children:["\n",(0,r.jsx)(o.li,{children:"Get into the container and find the ioBroker location"}),"\n"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-bash",children:"[root@CentOS8 ~]# podman exec -ti 5582e69da175 /bin/bash\r\nroot@5582e69da175:/opt/iobroker# find / -name iobroker\r\n/etc/sudoers.d/iobroker\r\n/home/iobroker\r\n/opt/iobroker\r\n/opt/iobroker/iobroker\r\n/usr/bin/iobroker\r\n/iobroker\n"})}),"\n",(0,r.jsxs)(o.ol,{start:"3",children:["\n",(0,r.jsx)(o.li,{children:"Stop and delete the container and change to runscript to mount the folder onto your host system:"}),"\n"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-bash",children:"podman stop iobroker\r\npodman rm iobroker\r\npodman run -p 8081:8081 \\\r\n  -p 8082:8082 \\\r\n  -p 8087:8087 \\\r\n  -p 1883:1883 \\\r\n  --name iobroker \\\r\n   -v /opt/iobroker:/opt/iobroker \\\r\n   -v /opt/iobroker/home:/home/iobroker \\\r\n  --detach=true \\\r\n  --restart='always' \\\r\n  buanet/iobroker:latest\n"})}),"\n",(0,r.jsxs)(o.blockquote,{children:["\n",(0,r.jsxs)(o.p,{children:["Port ",(0,r.jsx)(o.code,{children:"8082"})," added for ioBroker visualization, port ",(0,r.jsx)(o.code,{children:"8087"})," for the REST API and port ",(0,r.jsx)(o.code,{children:"1883"})," for MQTT."]}),"\n"]}),"\n",(0,r.jsxs)(o.p,{children:["Make sure that the folders ",(0,r.jsx)(o.code,{children:"/opt/iobroker/home"})," and ",(0,r.jsx)(o.code,{children:"/opt/iobroker"})," exist on your host system (",(0,r.jsx)(o.code,{children:"chmod -R 777 /opt/iobroker"})," or ",(0,r.jsx)(o.code,{children:"755"})," to give Podman all necessary permissions and ",(0,r.jsx)(o.code,{children:"chcon -Rt svirt_sandbox_file_t /opt/motioneye"}),")."]}),"\n",(0,r.jsxs)(o.blockquote,{children:["\n",(0,r.jsxs)(o.p,{children:["I noticed a problem that podman changes the owner",":group"," of those folders on my host system to iobroker",":iobroker",". But it sets the permission wrong and ioBroker no longer loads - you can check it with ",(0,r.jsx)(o.code,{children:"podman logs iobroker"}),". Rerunning ",(0,r.jsx)(o.code,{children:"chmod -R 777 /opt/iobroker"})," solves the issue."]}),"\n"]})]})}function h(e={}){const{wrapper:o}={...(0,t.ah)(),...e.components};return o?(0,r.jsx)(o,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},603905:(e,o,n)=>{n.d(o,{ah:()=>l});var r=n(667294);function t(e,o,n){return o in e?Object.defineProperty(e,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[o]=n,e}function i(e,o){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);o&&(r=r.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var o=1;o<arguments.length;o++){var n=null!=arguments[o]?arguments[o]:{};o%2?i(Object(n),!0).forEach((function(o){t(e,o,n[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))}))}return e}function s(e,o){if(null==e)return{};var n,r,t=function(e,o){if(null==e)return{};var n,r,t={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],o.indexOf(n)>=0||(t[n]=e[n]);return t}(e,o);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],o.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}var c=r.createContext({}),l=function(e){var o=r.useContext(c),n=o;return e&&(n="function"==typeof e?e(o):a(a({},o),e)),n},d={inlineCode:"code",wrapper:function(e){var o=e.children;return r.createElement(r.Fragment,{},o)}},h=r.forwardRef((function(e,o){var n=e.components,t=e.mdxType,i=e.originalType,c=e.parentName,h=s(e,["components","mdxType","originalType","parentName"]),m=l(n),u=t,p=m["".concat(c,".").concat(u)]||m[u]||d[u]||i;return n?r.createElement(p,a(a({ref:o},h),{},{components:n})):r.createElement(p,a({ref:o},h))}));h.displayName="MDXCreateElement"},307746:(e,o,n)=>{n.d(o,{Z:()=>r});const r=n.p+"assets/images/ioBroker_CentOS8_Podman_01-45a7e6bb2e723f100e3b4fa82d93f02f.png"},405718:(e,o,n)=>{n.d(o,{Z:()=>r});const r=n.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-02e8518ad61483adf50687ea006a1f17.jpg"}}]);