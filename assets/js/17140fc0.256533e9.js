"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[47380],{867078:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>d,toc:()=>c});var i=n(785893),s=n(603905);const t={sidebar_position:7080,slug:"2021-03-15",title:"Debian Upgrade to Bullseye",authors:"mpolinowski",tags:["LINUX"]},a=void 0,d={id:"DevOps/Linux/2021-03-15-debian-upgrade-bullseye/index",title:"Debian Upgrade to Bullseye",description:"Hongkong, TST",source:"@site/docs/DevOps/Linux/2021-03-15-debian-upgrade-bullseye/index.md",sourceDirName:"DevOps/Linux/2021-03-15-debian-upgrade-bullseye",slug:"/DevOps/Linux/2021-03-15-debian-upgrade-bullseye/2021-03-15",permalink:"/docs/DevOps/Linux/2021-03-15-debian-upgrade-bullseye/2021-03-15",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Linux/2021-03-15-debian-upgrade-bullseye/index.md",tags:[{label:"LINUX",permalink:"/docs/tags/linux"}],version:"current",sidebarPosition:7080,frontMatter:{sidebar_position:7080,slug:"2021-03-15",title:"Debian Upgrade to Bullseye",authors:"mpolinowski",tags:["LINUX"]},sidebar:"tutorialSidebar",previous:{title:"Installing Free Red Hat Enterprise Linux",permalink:"/docs/DevOps/Linux/2021-04-11-installing-free-red-hat-enterprise-linux/2021-04-11"},next:{title:"Activating Root Login on Ubuntu 20.10",permalink:"/docs/DevOps/Linux/2020-10-20--activating-root-login-ubuntu-20-10/2020-10-20"}},l={},c=[{value:"Check OS Version",id:"check-os-version",level:3},{value:"Find the right repositories",id:"find-the-right-repositories",level:3},{value:"Upgrade the repository list",id:"upgrade-the-repository-list",level:3},{value:"Test if the sources.list Configuration",id:"test-if-the-sourceslist-configuration",level:3},{value:"Upgrade the System",id:"upgrade-the-system",level:3},{value:"Check OS Version",id:"check-os-version-1",level:3},{value:"Hash Mismatch",id:"hash-mismatch",level:2}];function o(e){const r={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.ah)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.p,{children:(0,i.jsx)(r.img,{alt:"Hongkong, TST",src:n(49261).Z+"",width:"1500",height:"569"})}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.a,{href:"#check-os-version",children:"Check OS Version"})}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.a,{href:"#find-the-right-repositories",children:"Find the right repositories"})}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.a,{href:"#upgrade-the-repository-list",children:"Upgrade the repository list"})}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.a,{href:"#test-if-the-sourceslist-configuration",children:"Test if the sources.list Configuration"})}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.a,{href:"#upgrade-the-system",children:"Upgrade the System"})}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.a,{href:"#check-os-version-1",children:"Check OS Version"})}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.a,{href:"#hash-mismatch",children:"Hash Mismatch"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"check-os-version",children:"Check OS Version"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:'cat /etc/os-release\r\n\r\nPRETTY_NAME="Debian GNU/Linux 10 (buster)"\n'})}),"\n",(0,i.jsx)(r.h3,{id:"find-the-right-repositories",children:"Find the right repositories"}),"\n",(0,i.jsxs)(r.p,{children:["Check ",(0,i.jsx)(r.a,{href:"https://www.debian.org/mirror/list",children:"https://www.debian.org/mirror/list"})," for the nearest mirror."]}),"\n",(0,i.jsx)(r.h3,{id:"upgrade-the-repository-list",children:"Upgrade the repository list"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"apt edit-sources\n"})}),"\n",(0,i.jsx)(r.p,{children:"Comment out the existing entries by prepending a pound key and add the new URLs, mainly replacing buster with bullseye in this example:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-cfg",children:"# deb http://deb.debian.org/debian buster main contrib non-free\r\n# deb http://deb.debian.org/debian buster-updates main contrib non-free\r\n# deb http://security.debian.org/ buster/updates main contrib non-free\r\n\r\ndeb http://mirrors.linode.com/debian bullseye main\r\ndeb-src http://mirrors.linode.com/debian bullseye main\r\n\r\n# bullseye-security\r\ndeb http://mirrors.linode.com/debian-security bullseye-security/updates main\r\ndeb-src http://mirrors.linode.com/debian-security bullseye-security/updates main\r\n\r\n# bullseye-updates\r\ndeb http://mirrors.linode.com/debian bullseye-updates main\r\ndeb-src http://mirrors.linode.com/debian bullseye-updates main\n"})}),"\n",(0,i.jsx)(r.h3,{id:"test-if-the-sourceslist-configuration",children:"Test if the sources.list Configuration"}),"\n",(0,i.jsx)(r.p,{children:"\u200b"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"apt update\n"})}),"\n",(0,i.jsx)(r.h3,{id:"upgrade-the-system",children:"Upgrade the System"}),"\n",(0,i.jsx)(r.p,{children:"Now, only after you performed a full system backup, upgrade your system:"}),"\n",(0,i.jsx)(r.p,{children:"\u200b"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"apt full-upgrade && \\\r\necho FINE || \\\r\necho FAIL\n"})}),"\n",(0,i.jsx)(r.h3,{id:"check-os-version-1",children:"Check OS Version"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:'cat /etc/os-release\r\n\r\nPRETTY_NAME="Debian GNU/Linux 11 (bullseye)"\n'})}),"\n",(0,i.jsx)(r.h2,{id:"hash-mismatch",children:"Hash Mismatch"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"E: Failed to fetch http://mirrors.linode.com/debian/dists/bullseye/main/i18n/by-hash/SHA256/a10a6afaed08d5920ca1f25470447ebe309d6ec6e1dccd7984dbf80f3794e9e5  Hash Sum mismatch\r\n   Hashes of expected file:\r\n    - Filesize:6241447 [weak]\r\n    - SHA256:a10a6afaed08d5920ca1f25470447ebe309d6ec6e1dccd7984dbf80f3794e9e5\r\n    - MD5Sum:defe22d6705e06848f94f8bdc44e6b31 [weak]\r\n   Hashes of received file:\r\n    - SHA256:cd403ad869e02ce4b0362a943eb3f23f2ad8c23568369e1f0398aec3367d86a2\r\n    - MD5Sum:a3ee386d51ec0bc4461ddc15a60ea2d6 [weak]\r\n    - Filesize:6241447 [weak]\r\n   Last modification reported: Sat, 09 Oct 2021 09:17:24 +0000\n"})}),"\n",(0,i.jsx)(r.p,{children:"I started getting error messages when trying to update my system. This could be solved by:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"rm -rf /var/lib/apt/lists/* && apt update\r\napt upgrade\n"})}),"\n",(0,i.jsxs)(r.p,{children:["If deleting ",(0,i.jsx)(r.code,{children:"/var/lib/apt/lists/*"}),' does not work - (esp. if you\'re behind a proxy), fix "Hash Sum Mismatch" by creating a file ',(0,i.jsx)(r.code,{children:"/etc/apt/apt.conf.d/99fixbadproxy"}),":"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"Acquire::http::Pipeline-Depth 0;\r\nAcquire::http::No-Cache true;\r\nAcquire::BrokenProxy    true;\n"})}),"\n",(0,i.jsx)(r.p,{children:"And run:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"rm  /var/lib/apt/lists/*\r\nrm  /var/lib/apt/lists/partial/*\r\napt-get update\n"})}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.a,{href:"https://gist.github.com/trastle/5722089",children:"See Github"})})]})}function h(e={}){const{wrapper:r}={...(0,s.ah)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},603905:(e,r,n)=>{n.d(r,{ah:()=>c});var i=n(667294);function s(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function t(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?t(Object(n),!0).forEach((function(r){s(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function d(e,r){if(null==e)return{};var n,i,s=function(e,r){if(null==e)return{};var n,i,s={},t=Object.keys(e);for(i=0;i<t.length;i++)n=t[i],r.indexOf(n)>=0||(s[n]=e[n]);return s}(e,r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(i=0;i<t.length;i++)n=t[i],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var l=i.createContext({}),c=function(e){var r=i.useContext(l),n=r;return e&&(n="function"==typeof e?e(r):a(a({},r),e)),n},o={inlineCode:"code",wrapper:function(e){var r=e.children;return i.createElement(i.Fragment,{},r)}},h=i.forwardRef((function(e,r){var n=e.components,s=e.mdxType,t=e.originalType,l=e.parentName,h=d(e,["components","mdxType","originalType","parentName"]),u=c(n),p=s,b=u["".concat(l,".").concat(p)]||u[p]||o[p]||t;return n?i.createElement(b,a(a({ref:r},h),{},{components:n})):i.createElement(b,a({ref:r},h))}));h.displayName="MDXCreateElement"},49261:(e,r,n)=>{n.d(r,{Z:()=>i});const i=n.p+"assets/images/photo-456tdsfggd_67gfh6dgdf4_d-1178db225441cd22ece67d208efab8fd.jpg"}}]);