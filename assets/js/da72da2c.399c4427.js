"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[66443],{327017:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var r=s(785893),t=s(603905);const i={sidebar_position:5950,slug:"2023-03-12",title:"Music Player Daemon",authors:"mpolinowski",tags:["LINUX"],description:"Installing the Music Player Daemon on Arch Linux"},a=void 0,o={id:"DevOps/Linux/2023-03-12--installing-music-player-daemon/index",title:"Music Player Daemon",description:"Installing the Music Player Daemon on Arch Linux",source:"@site/docs/DevOps/Linux/2023-03-12--installing-music-player-daemon/index.md",sourceDirName:"DevOps/Linux/2023-03-12--installing-music-player-daemon",slug:"/DevOps/Linux/2023-03-12--installing-music-player-daemon/2023-03-12",permalink:"/docs/DevOps/Linux/2023-03-12--installing-music-player-daemon/2023-03-12",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Linux/2023-03-12--installing-music-player-daemon/index.md",tags:[{label:"LINUX",permalink:"/docs/tags/linux"}],version:"current",sidebarPosition:5950,frontMatter:{sidebar_position:5950,slug:"2023-03-12",title:"Music Player Daemon",authors:"mpolinowski",tags:["LINUX"],description:"Installing the Music Player Daemon on Arch Linux"},sidebar:"tutorialSidebar",previous:{title:"Elgato Streamdeck on Arch Linux",permalink:"/docs/DevOps/Linux/2023-03-29--installing-the-elgato-streamdeck/2023-03-29"},next:{title:"ARM Docker",permalink:"/docs/DevOps/Linux/2023-02-03--installing-docker-raspberry-pi/2023-02-03"}},l={},c=[{value:"Installing the Music Player Daemon",id:"installing-the-music-player-daemon",level:2},{value:"Error messages",id:"error-messages",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.ah)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Guangzhou, China",src:s(165872).Z+"",width:"1500",height:"622"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#installing-the-music-player-daemon",children:"Installing the Music Player Daemon"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#error-messages",children:"Error messages"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"installing-the-music-player-daemon",children:"Installing the Music Player Daemon"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://wiki.archlinux.org/title/Music_Player_Daemon",children:"MPD (music player daemon)"})," is an audio player that has a server-client architecture. It plays audio files, organizes playlists and maintains a music database, all while using very few resources. In order to interface with it, a separate client is needed."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo pacman -S mpd mpc ncmpcpp\n"})}),"\n",(0,r.jsxs)(n.p,{children:["MPD is configured in the file ",(0,r.jsx)(n.a,{href:"https://gist.github.com/mpolinowski/c1b92135523903f4493767d23e8043bf",children:"mpd.conf"}),". These are some of the most commonly used configuration options:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pid_file"})," - The file where MPD stores its process ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"db_file"})," - The music database"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"state_file"})," - MPD's current state is noted here"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"playlist_directory"})," - The directory where playlists are saved into"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"music_directory"})," - The directory that MPD scans for music"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"sticker_file"})," - The sticker database"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cp /usr/share/doc/mpd/mpdconf.example ~/.mpd/mpd.conf\r\nlvim ~/.mpd/mpd.conf\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Make sure to point the daemon to a music directory the daemon will have access rights to - e.g. ",(0,r.jsx)(n.code,{children:"~/Music"})," if you start the daemon with your local user. I needed to use ",(0,r.jsx)(n.code,{children:"pulse"})," as my audio output - yours might be different:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'music_directory\t\t"~/Music"\r\n#\r\n# This setting sets the MPD internal playlist directory. The purpose of this\r\n# directory is storage for playlists created by MPD. The server will use\r\n# playlist files not created by the server but only if they are in the MPD\r\n# format. This setting defaults to playlist saving being disabled.\r\n#\r\nplaylist_directory\t\t"~/.mpd/playlists"\r\n#\r\n# This setting sets the location of the MPD database. This file is used to\r\n# load the database at server start up and store the database while the\r\n# server is not up. This setting defaults to disabled which will allow\r\n# MPD to accept files over ipc socket (using file:// protocol) or streaming\r\n# files over an accepted protocol.\r\n#\r\ndb_file\t\t\t"~/.mpd/database"\r\n\r\n# These settings are the locations for the daemon log files for the daemon.\r\n#\r\n# The special value "syslog" makes MPD use the local syslog daemon. This\r\n# setting defaults to logging to syslog.\r\n#\r\n# If you use systemd, do not configure a log_file.  With systemd, MPD\r\n# defaults to the systemd journal, which is fine.\r\n#\r\nlog_file\t\t\t"~/.mpd/log"\r\n\r\n# This setting sets the location of the file which stores the process ID\r\n# for use of mpd --kill and some init scripts. This setting is disabled by\r\n# default and the pid file will not be stored.\r\n#\r\n# If you use systemd, do not configure a pid_file.\r\n#\r\npid_file\t\t\t"~/.mpd/pid"\r\n\r\n# This setting sets the location of the file which contains information about\r\n# most variables to get MPD back into the same general shape it was in before\r\n# it was brought down. This setting is disabled by default and the server\r\n# state will be reset on server start up.\r\n#\r\nstate_file\t\t\t"~/.mpd/state"\r\n#\r\n# The location of the sticker database.  This is a database which\r\n# manages dynamic information attached to songs.\r\n#\r\nsticker_file\t\t\t"~/.mpd/sticker.sql"\r\n\r\nuser\t\t\t\t"mylinuxuser"\r\n\r\ngroup\t\t\t\t"mylinuxusergroup"\r\n\r\ninput {\r\n        plugin "curl"\r\n#       proxy "proxy.isp.com:8080"\r\n#       proxy_user "user"\r\n#       proxy_password "password"\r\n}\r\n\r\naudio_output {\r\n    type                    "fifo"\r\n    name                    "my_fifo"\r\n    path                    "/tmp/mpd.fifo"\r\n    format                  "44100:16:1"\r\n}\r\naudio_output {\r\n    type                    "pulse"\r\n    name                    "ALSA/PulseAudio"\r\n    mixer_type              "software"\r\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Configure the ",(0,r.jsx)(n.code,{children:"ncmpcpp"})," console UI tool for ",(0,r.jsx)(n.code,{children:"mpd"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cp /usr/share/doc/ncmpcpp/config ~/.ncmpcpp/\r\nlvim ~/.ncmpcpp/config\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ncmpcpp_directory = ~/.config/ncmpcpp\r\nmpd_host = localhost\r\nmpd_port = 6600\r\nmpd_music_dir = ~/Music\r\nmpd_crossfade_time = 5\r\nvisualizer_data_source = /tmp/mpd.fifo\r\nvisualizer_output_name = Visualizer feed\r\nvisualizer_in_stereo = yes\r\nvisualizer_type = wave_filled\n"})}),"\n",(0,r.jsx)(n.h2,{id:"error-messages",children:"Error messages"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"server_socket: bind to '0.0.0.0:6600' failed (continuing anyway, because binding to '[::]:6600'>\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Run ",(0,r.jsx)(n.code,{children:"mpd"})," as your user:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"systemctl --user enable mpd\r\nsystemctl --user start mpd\r\nsystemctl --user status mpd\r\n# after making changes to your config if needed\r\nsystemctl --user restart mpd\n"})}),"\n",(0,r.jsx)(n.p,{children:"Once you got rid of all the error messages start the console UI:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ncmpcpp\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Installing the Music Player Daemon on Arch Linux",src:s(377770).Z+"",width:"2560",height:"1440"})})]})}function p(e={}){const{wrapper:n}={...(0,t.ah)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},603905:(e,n,s)=>{s.d(n,{ah:()=>c});var r=s(667294);function t(e,n,s){return n in e?Object.defineProperty(e,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[n]=s,e}function i(e,n){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),s.push.apply(s,r)}return s}function a(e){for(var n=1;n<arguments.length;n++){var s=null!=arguments[n]?arguments[n]:{};n%2?i(Object(s),!0).forEach((function(n){t(e,n,s[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))}))}return e}function o(e,n){if(null==e)return{};var s,r,t=function(e,n){if(null==e)return{};var s,r,t={},i=Object.keys(e);for(r=0;r<i.length;r++)s=i[r],n.indexOf(s)>=0||(t[s]=e[s]);return t}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)s=i[r],n.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(t[s]=e[s])}return t}var l=r.createContext({}),c=function(e){var n=r.useContext(l),s=n;return e&&(s="function"==typeof e?e(n):a(a({},n),e)),s},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},p=r.forwardRef((function(e,n){var s=e.components,t=e.mdxType,i=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),u=c(s),h=t,m=u["".concat(l,".").concat(h)]||u[h]||d[h]||i;return s?r.createElement(m,a(a({ref:n},p),{},{components:s})):r.createElement(m,a({ref:n},p))}));p.displayName="MDXCreateElement"},377770:(e,n,s)=>{s.d(n,{Z:()=>r});const r=s.p+"assets/images/ncmpcpp-e2274c31540bc7e9449366be057fb8a7.png"},165872:(e,n,s)=>{s.d(n,{Z:()=>r});const r=s.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-a6ea9c37592199bec87ef0a289a7fd91.jpg"}}]);