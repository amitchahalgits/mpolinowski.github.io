"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[77604],{561667:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>l,frontMatter:()=>i,metadata:()=>r,toc:()=>c});var t=o(474848),s=o(28453);const i={sidebar_position:1e4,slug:"2019-09-07",title:"Magento 2 Docker Development",authors:"mpolinowski",tags:["Docker","Magento"]},a=void 0,r={id:"Development/Magento/2019-09-07--magento-development-in-docker/index",title:"Magento 2 Docker Development",description:"Siam Reap, Cambodia",source:"@site/docs/Development/Magento/2019-09-07--magento-development-in-docker/index.mdx",sourceDirName:"Development/Magento/2019-09-07--magento-development-in-docker",slug:"/Development/Magento/2019-09-07--magento-development-in-docker/2019-09-07",permalink:"/docs/Development/Magento/2019-09-07--magento-development-in-docker/2019-09-07",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Development/Magento/2019-09-07--magento-development-in-docker/index.mdx",tags:[{label:"Docker",permalink:"/docs/tags/docker"},{label:"Magento",permalink:"/docs/tags/magento"}],version:"current",sidebarPosition:1e4,frontMatter:{sidebar_position:1e4,slug:"2019-09-07",title:"Magento 2 Docker Development",authors:"mpolinowski",tags:["Docker","Magento"]},sidebar:"tutorialSidebar",previous:{title:"Magento 2 Dev Environment with Docker Compose",permalink:"/docs/Development/Magento/2019-09-10--magento2-docker-on-ubuntu/2019-09-10"},next:{title:"Misc",permalink:"/docs/category/misc"}},d={},c=[{value:"Docker on Windows",id:"docker-on-windows",level:2},{value:"Setting up the Environment",id:"setting-up-the-environment",level:3},{value:"Installing Magento",id:"installing-magento",level:2},{value:"Webmin",id:"webmin",level:3},{value:"MySQL",id:"mysql",level:3},{value:"Magento &amp; Apache",id:"magento--apache",level:3},{value:"PHPMyAdmin",id:"phpmyadmin",level:3},{value:"Configuring Magento",id:"configuring-magento",level:2}];function h(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Siam Reap, Cambodia",src:o(448848).A+"",width:"1500",height:"747"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"#docker-on-windows",children:"Docker on Windows"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#setting-up-the-environment",children:"Setting up the Environment"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"#installing-magento",children:"Installing Magento"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#webmin",children:"Webmin"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#mysql",children:"MySQL"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#magento-amp-apache",children:"Magento & Apache"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#phpmyadmin",children:"PHPMyAdmin"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#configuring-magento",children:"Configuring Magento"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"I want to try set up a Magento 2 Store in Docker on a Windows 10 PC."}),"\n",(0,t.jsx)(n.h2,{id:"docker-on-windows",children:"Docker on Windows"}),"\n",(0,t.jsxs)(n.p,{children:["Start by ",(0,t.jsx)(n.a,{href:"https://docs.docker.com/docker-for-windows/install/",children:"installing Docker"})," on your Windows PC. Note that you need:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Windows 10 64-bit: Pro, Enterprise, or Education (Build 15063 or later)."}),"\n",(0,t.jsx)(n.li,{children:"Hyper-V and Containers Windows features must be enabled."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["After the installation sign in with your ",(0,t.jsx)(n.a,{href:"https://hub.docker.com",children:"Docker Hub"})," ID. Start the Docker Settings and select a drive you want to be available for your docker containers - this is the drive we need to store our source code on:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Docker and Magento2 on Windows 10",src:o(76687).A+"",width:"830",height:"568"})}),"\n",(0,t.jsx)(n.h3,{id:"setting-up-the-environment",children:"Setting up the Environment"}),"\n",(0,t.jsxs)(n.p,{children:["Now we need to create a ",(0,t.jsx)(n.code,{children:"docker-compose.yml"})," file that will help us setting up the Magento2/LAMP environment:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"mysql:\r\n  image: mysql:5.7\r\n  ports:\r\n    - 3306:3306\r\n  environment:\r\n    MYSQL_ROOT_PASSWORD: mypassword\r\n  volumes:\r\n    - ./src/db:/var/lib/mysql\r\n  container_name: mysql_5.7\r\nphpmyadmin:\r\n  image: phpmyadmin/phpmyadmin:4.8\r\n  ports:\r\n    - 8080:80\r\n  links:\r\n    - mysql\r\n  environment:\r\n    PMA_HOST: mysql\r\n    PMA_PORT: 3306\r\n  container_name: phpmyadmin_4.8\r\napache2:\r\n  image: phpcuong/magento2-apache2:3.0\r\n  ports:\r\n    - 80:80\r\n    - 10000:10000\r\n    - 443:443\r\n  links:\r\n    - mysql\r\n  volumes:\r\n    - ./src/html:/var/www/html\r\n  container_name: magento2.3\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Create two folders named ",(0,t.jsx)(n.code,{children:"html"})," and ",(0,t.jsx)(n.code,{children:"db"})," and point the two volumes declared above to those directories. In my case there is a ",(0,t.jsx)(n.code,{children:"src"})," folder in the same directory as the compose YAML file. This folder contains both the db and html folder."]}),"\n",(0,t.jsx)(n.p,{children:"Those instruction will set up a MySQL database, PHPMyAdmin and a Ubuntu container with Apache2, PHP 7.1.26, Webmin, Composer and Git."}),"\n",(0,t.jsxs)(n.p,{children:["Now open PowerShell in the directory where you created the YAML file and run the command ",(0,t.jsx)(n.code,{children:"docker-compose up -d"})," to set everything up:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Docker and Magento2 on Windows 10",src:o(857780).A+"",width:"975",height:"503"})}),"\n",(0,t.jsxs)(n.p,{children:["Once Docker finishes you can run ",(0,t.jsx)(n.code,{children:"docker images"})," to see the downloaded images and ",(0,t.jsx)(n.code,{children:"docker ps -a"})," to see that all 3 are now running in the background:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Docker and Magento2 on Windows 10",src:o(78909).A+"",width:"975",height:"296"})}),"\n",(0,t.jsx)(n.h2,{id:"installing-magento",children:"Installing Magento"}),"\n",(0,t.jsx)(n.p,{children:"We can now verify that the virtual environment inside the Docker container full fills the requirements for Magento 2.2.6:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Apache 2.4"}),"\n",(0,t.jsx)(n.li,{children:"MySQL 5.7"}),"\n",(0,t.jsx)(n.li,{children:"PHP 7.0.13 or higher"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["To do this run the following command ",(0,t.jsx)(n.code,{children:"docker exec -it magento2.3 bin/bash"})," to access the Docker container that we want to use to install Magento in (",(0,t.jsx)(n.strong,{children:"Note"})," that you can get the container name ",(0,t.jsx)(n.code,{children:"magento2.3"})," from the screenshot above):"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Docker and Magento2 on Windows 10",src:o(682562).A+"",width:"973",height:"211"})}),"\n",(0,t.jsx)(n.h3,{id:"webmin",children:"Webmin"}),"\n",(0,t.jsxs)(n.p,{children:["As mentioned above this container comes with ",(0,t.jsx)(n.a,{href:"http://www.webmin.com",children:"Webmin"})," pre-installed. Webmin is a web-based interface for system administration for Unix. You can setup user accounts, Apache, DNS and much more. Webmin removes the need to manually edit Unix configuration files like /etc/passwd, and lets you manage a system from the console or remotely."]}),"\n",(0,t.jsxs)(n.p,{children:["The Webmin dashboard is exposed on Port ",(0,t.jsx)(n.code,{children:"10000"})," and can accessed via localhost on your Windows machine:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:" https://127.0.0.1:10000\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"username: root"}),"\n",(0,t.jsx)(n.li,{children:"password: root"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Docker and Magento2 on Windows 10",src:o(903691).A+"",width:"862",height:"517"})}),"\n",(0,t.jsxs)(n.p,{children:["You can use it to make changes to your virtual server take care of outdated packages. ",(0,t.jsx)(n.strong,{children:"Note"})," that changes you make here will be wiped if you rebuild the container:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Docker and Magento2 on Windows 10",src:o(633840).A+"",width:"1091",height:"359"})}),"\n",(0,t.jsx)(n.h3,{id:"mysql",children:"MySQL"}),"\n",(0,t.jsxs)(n.p,{children:["To check your MySQL version run the same command as before to enter the container ",(0,t.jsx)(n.code,{children:"docker exec -it mysql_5.7 bin/bash"}),":"]}),"\n",(0,t.jsxs)(n.p,{children:["Note that you now have to enter the ",(0,t.jsx)(n.code,{children:"MYSQL_ROOT_PASSWORD"})," you defined in the compose YAML file with the following command ",(0,t.jsx)(n.code,{children:"mysql -u root -p"})," to enter the database:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Docker and Magento2 on Windows 10",src:o(230745).A+"",width:"969",height:"321"})}),"\n",(0,t.jsxs)(n.p,{children:["We can now create a database for Magento called ",(0,t.jsx)(n.code,{children:"magento_2_3_3"})," - rename depending on the ",(0,t.jsx)(n.a,{href:"https://devdocs.magento.com/release/",children:"version"})," you wish to install:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"create database magento_2_3_3;\r\nshow databases;\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Docker and Magento2 on Windows 10",src:o(441358).A+"",width:"975",height:"509"})}),"\n",(0,t.jsx)(n.h3,{id:"magento--apache",children:"Magento & Apache"}),"\n",(0,t.jsxs)(n.p,{children:["You can download the Magento Source code from the ",(0,t.jsx)(n.a,{href:"https://magento.com/tech-resources/download",children:"Tech Resources"})," page. Unzip all files to the ",(0,t.jsx)(n.code,{children:"src/html"})," folder we created earlier."]}),"\n",(0,t.jsxs)(n.p,{children:["While we wait for those files to be unzipped we can already set up a host name for our shop, e.g. ",(0,t.jsx)(n.code,{children:"magento-2-3-3.instar.com"}),". To do this we can edit the Windows ",(0,t.jsx)(n.strong,{children:"hosts"})," file in ",(0,t.jsx)(n.strong,{children:"\\Windows\\System32\\drivers\\etc\\"})," and add the following line:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"127.0.0.1 magento-2-3-3.instar.com\n"})}),"\n",(0,t.jsxs)(n.p,{children:["So now when we type in ",(0,t.jsx)(n.code,{children:"magento-2-3-3.instar.com"})," to our browsers address bar the address will be resolved to ",(0,t.jsx)(n.code,{children:"localhost"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Now go back to the ",(0,t.jsx)(n.strong,{children:"Webmin"})," interface and point a virtual server to the Magento HTML code and assign the address that you just created your host for:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Docker and Magento2 on Windows 10",src:o(584375).A+"",width:"1089",height:"525"})}),"\n",(0,t.jsx)(n.p,{children:"To activate the new configuration we need to restart Apache:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"docker exec -it magento2.3 bin/bash\r\nservice apache2 restart\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Apache is now hosting our Magento site on ",(0,t.jsx)(n.code,{children:"magento-2-3-3.instar.com"})," and port ",(0,t.jsx)(n.code,{children:"80"}),". Access it through your web browser and start the configuration wizard:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Docker and Magento2 on Windows 10",src:o(112129).A+"",width:"1091",height:"579"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"})," that the Magento admin panel can now be reached under ",(0,t.jsx)(n.code,{children:"http://magento-2-3-3.instar.com/admin_1kji1i"})," with the password that you set during the setup process :"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Docker and Magento2 on Windows 10",src:o(891e3).A+"",width:"968",height:"688"})}),"\n",(0,t.jsxs)(n.p,{children:["To deploy the frontend run the following command from the ",(0,t.jsx)(n.code,{children:"magento"})," container inside the Magento source folder (path depends on how you named the folder after extracting the Magento source):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"docker exec -it magento2.3 bin/bash\r\ncd /var/www/html/Magento-CE-2.3.3\r\nphp bin/magento setup:static-content:deploy -f\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Docker and Magento2 on Windows 10",src:o(202963).A+"",width:"972",height:"510"})}),"\n",(0,t.jsxs)(n.p,{children:["You can find the frontend source code that is being deployed in ",(0,t.jsx)(n.code,{children:"\\src\\html\\Magento-CE-2.3.3\\pub\\static\\frontend\\Magento\\blank\\en_US"}),". The frontend is now available on port ",(0,t.jsx)(n.code,{children:"80"})," with the set URL:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Docker and Magento2 on Windows 10",src:o(471050).A+"",width:"1044",height:"312"})}),"\n",(0,t.jsx)(n.h3,{id:"phpmyadmin",children:"PHPMyAdmin"}),"\n",(0,t.jsxs)(n.p,{children:["We can now access the PHPMyAdmin interface over port ",(0,t.jsx)(n.code,{children:"8080"})," with the domain name we set up ",(0,t.jsx)(n.code,{children:"magento-2-3-3.instar.com"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["username: ",(0,t.jsx)(n.code,{children:"root"})]}),"\n",(0,t.jsxs)(n.li,{children:["password: ",(0,t.jsx)(n.code,{children:"mypassword"})," (as set by MYSQL_ROOT_PASSWORD)"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Docker and Magento2 on Windows 10",src:o(541477).A+"",width:"1091",height:"491"})}),"\n",(0,t.jsx)(n.p,{children:"The installation process populated our database successfully:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Docker and Magento2 on Windows 10",src:o(305564).A+"",width:"1090",height:"528"})}),"\n",(0,t.jsx)(n.h2,{id:"configuring-magento",children:"Configuring Magento"}),"\n",(0,t.jsx)(n.p,{children:"Start by opening the Admin Dashboard through the URL and Login you set in the steps before:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Docker and Magento2 on Windows 10",src:o(13143).A+"",width:"1090",height:"772"})})]})}function l(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},76687:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/Magento2_Docker_01-b0060345cf16599ea6e44529fd415c4d.png"},857780:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/Magento2_Docker_02-f8ef7a85a1860404fc0d009f5d74cd52.png"},78909:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/Magento2_Docker_03-5c5af110a27b161b4909922e15b45f3a.png"},682562:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/Magento2_Docker_04-3519f3e03807d22a8d8bf7dc342cae91.png"},903691:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/Magento2_Docker_05-a1b3ce28dc625b60b169b9ac316b224d.png"},633840:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/Magento2_Docker_06-60109053798146ae72ae9b393faf1f4b.png"},230745:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/Magento2_Docker_07-f755039dad1416fb5eaf5d26fc517232.png"},441358:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/Magento2_Docker_08-c621f3cedb49e197c83c288be6f8a5e4.png"},584375:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/Magento2_Docker_09-049256b0f93892666214c8ac641fd5fa.png"},112129:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/Magento2_Docker_10-720a8b6550ed7e16a9596cf7ce716548.png"},891e3:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/Magento2_Docker_11-208a316cbac303272421ee63269f4f10.png"},202963:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/Magento2_Docker_12-90d6a49518a1588a592a314d236f4fe4.png"},471050:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/Magento2_Docker_13-e8db9ef9fcc54cb37909b8a8bbd680c5.png"},541477:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/Magento2_Docker_14-01810f2959ee3eb27b598154cf20bdb3.png"},305564:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/Magento2_Docker_15-3da6cc2d4befe40f90c3d5e13a9ef347.png"},13143:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/Magento2_Docker_16-840e806a21ffc41ee5bc0b16eea82174.png"},448848:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/photo-kt456d_645dhfh6dgjkhg4_d-8aa171f1c88ebb3d6fd9980af7ac4865.jpg"},28453:(e,n,o)=>{o.d(n,{R:()=>a,x:()=>r});var t=o(296540);const s={},i=t.createContext(s);function a(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);