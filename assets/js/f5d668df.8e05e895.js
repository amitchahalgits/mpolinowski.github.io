"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[94356],{521826:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>g,frontMatter:()=>t,metadata:()=>a,toc:()=>l});var s=i(785893),r=i(603905);const t={sidebar_position:1e4,slug:"2020-07-12",title:"Installing Nagios4 with Docker",authors:"mpolinowski",tags:["LINUX","Nagios"]},o=void 0,a={id:"DevOps/Zabbix/2020-07-12--nagios-docker-install/index",title:"Installing Nagios4 with Docker",description:"Cheung Chau, Hong Kong",source:"@site/docs/DevOps/Zabbix/2020-07-12--nagios-docker-install/index.md",sourceDirName:"DevOps/Zabbix/2020-07-12--nagios-docker-install",slug:"/DevOps/Zabbix/2020-07-12--nagios-docker-install/2020-07-12",permalink:"/docs/DevOps/Zabbix/2020-07-12--nagios-docker-install/2020-07-12",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Zabbix/2020-07-12--nagios-docker-install/index.md",tags:[{label:"LINUX",permalink:"/docs/tags/linux"},{label:"Nagios",permalink:"/docs/tags/nagios"}],version:"current",sidebarPosition:1e4,frontMatter:{sidebar_position:1e4,slug:"2020-07-12",title:"Installing Nagios4 with Docker",authors:"mpolinowski",tags:["LINUX","Nagios"]},sidebar:"tutorialSidebar",previous:{title:"Installing Nagios4 on Ubuntu Server 20.04",permalink:"/docs/DevOps/Zabbix/2020-07-14--nagios-ubuntu-install/2020-07-14"},next:{title:"Server Provisioning",permalink:"/docs/category/server-provisioning"}},c={},l=[{value:"Installation",id:"installation",level:2},{value:"Test Run",id:"test-run",level:2},{value:"Credentials",id:"credentials",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Extra Plugins",id:"extra-plugins",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.ah)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Cheung Chau, Hong Kong",src:i(753689).Z+"",width:"1500",height:"453"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#installation",children:"Installation"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"#test-run",children:"Test Run"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#credentials",children:"Credentials"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#configuration",children:"Configuration"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#extra-plugins",children:"Extra Plugins"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsxs)(n.p,{children:["Start by pulling the ",(0,s.jsx)(n.a,{href:"https://hub.docker.com/r/jasonrivers/nagios/",children:"Nagios Core 4.4.5 running on Ubuntu 16.04 LTS with NagiosGraph & NRPE"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker pull jasonrivers/nagios:latest\n"})}),"\n",(0,s.jsx)(n.h2,{id:"test-run",children:"Test Run"}),"\n",(0,s.jsx)(n.p,{children:"Run with the example configuration with the following:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker run --name nagios4 -p 0.0.0.0:8888:80 jasonrivers/nagios:latest\n"})}),"\n",(0,s.jsx)(n.h3,{id:"credentials",children:"Credentials"}),"\n",(0,s.jsxs)(n.p,{children:["Open the Nagios Webui on port ",(0,s.jsx)(n.code,{children:"8888"}),". The default credentials for the web interface is ",(0,s.jsx)(n.code,{children:"nagiosadmin"})," / ",(0,s.jsx)(n.code,{children:"nagios"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["You can copy the sample content of the following directories inside the docker container to you host system ",(0,s.jsx)(n.code,{children:"docker exec -ti nagios4 /bin/bash"})," - e.g. to the ",(0,s.jsx)(n.code,{children:"/opt"})," directory:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"/opt/nagios/etc/"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"/opt/nagios/var/"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"/opt/Custom-Nagios-Plugins"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"/opt/nagiosgraph/var"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"/opt/nagiosgraph/etc"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Modify the configuration according to your needs and mount it back into the container:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker run --name nagios4  \\\r\n  -v /opt/nagios/etc/:/opt/nagios/etc/ \\\r\n  -v /opt/nagios/var:/opt/nagios/var/ \\\r\n  -v /opt/Custom-Nagios-Plugins:/opt/Custom-Nagios-Plugins \\\r\n  -v /opt/nagiosgraph/var:/opt/nagiosgraph/var \\\r\n  -v /opt/nagiosgraph/etc:/opt/nagiosgraph/etc \\\r\n  -p 0.0.0.0:8888:80 jasonrivers/nagios:latest\n"})}),"\n",(0,s.jsxs)(n.p,{children:["I only copied the content of ",(0,s.jsx)(n.code,{children:"/opt/nagios/etc/"})," for now:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'find /opt/nagios/etc -printf "%P\\n"\r\n\r\n  conf.d\r\n  resource.cfg\r\n  nagios.cfg\r\n  objects\r\n  objects/switch.cfg\r\n  objects/timeperiods.cfg\r\n  objects/templates.cfg\r\n  objects/localhost.cfg\r\n  objects/contacts.cfg\r\n  objects/printer.cfg\r\n  objects/commands.cfg\r\n  objects/windows.cfg\r\n  htpasswd.users\r\n  monitor\r\n  cgi.cfg\n'})}),"\n",(0,s.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"nano /opt/nagios/etc/nagios.cfg\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Make sure that ",(0,s.jsx)(n.code,{children:"check_external_commands"})," is set to ",(0,s.jsx)(n.code,{children:"1"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cfg",children:"# EXTERNAL COMMAND OPTION\r\n# This option allows you to specify whether or not Nagios should check\r\n# for external commands (in the command file defined below).  By default\r\n# Nagios will *not* check for external commands, just to be on the\r\n# cautious side.  If you want to be able to use the CGI command interface\r\n# you will have to enable this.\r\n# Values: 0 = disable commands, 1 = enable commands\r\n\r\ncheck_external_commands=1\n"})}),"\n",(0,s.jsx)(n.h2,{id:"extra-plugins",children:"Extra Plugins"}),"\n",(0,s.jsx)(n.p,{children:"We can also add custom plugins to our installation:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"http://exchange.nagios.org/directory/Addons/Monitoring-Agents/NRPE--2D-Nagios-Remote-Plugin-Executor/details",children:"Nagios nrpe"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"http://exchange.nagios.org/directory/Addons/Graphing-and-Trending/nagiosgraph/details",children:"Nagiosgraph"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/JasonRivers/nagios-plugins",children:"JR-Nagios-Plugins"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/willixix/WL-NagiosPlugins",children:"WL-Nagios-Plugins"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/justintime/nagios-plugins",children:"JE-Nagios-Plugins"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker run --name nagios4  \\\r\n  -v /opt/nagios/etc/:/opt/nagios/etc/ \\\r\n  -v /opt/Custom-Nagios-Plugins:/opt/Custom-Nagios-Plugins \\\r\n  -p 0.0.0.0:8888:80 jasonrivers/nagios:latest\n"})})]})}function g(e={}){const{wrapper:n}={...(0,r.ah)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},603905:(e,n,i)=>{i.d(n,{ah:()=>l});var s=i(667294);function r(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}function t(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,s)}return i}function o(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach((function(n){r(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}function a(e,n){if(null==e)return{};var i,s,r=function(e,n){if(null==e)return{};var i,s,r={},t=Object.keys(e);for(s=0;s<t.length;s++)i=t[s],n.indexOf(i)>=0||(r[i]=e[i]);return r}(e,n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(s=0;s<t.length;s++)i=t[s],n.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}var c=s.createContext({}),l=function(e){var n=s.useContext(c),i=n;return e&&(i="function"==typeof e?e(n):o(o({},n),e)),i},d={inlineCode:"code",wrapper:function(e){var n=e.children;return s.createElement(s.Fragment,{},n)}},g=s.forwardRef((function(e,n){var i=e.components,r=e.mdxType,t=e.originalType,c=e.parentName,g=a(e,["components","mdxType","originalType","parentName"]),h=l(i),u=r,p=h["".concat(c,".").concat(u)]||h[u]||d[u]||t;return i?s.createElement(p,o(o({ref:n},g),{},{components:i})):s.createElement(p,o({ref:n},g))}));g.displayName="MDXCreateElement"},753689:(e,n,i)=>{i.d(n,{Z:()=>s});const s=i.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-ee6f920236f3597712f7577c36fe2b56.jpg"}}]);