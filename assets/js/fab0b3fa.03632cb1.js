"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[80100],{419186:(e,s,i)=>{i.r(s),i.d(s,{assets:()=>h,contentTitle:()=>r,default:()=>l,frontMatter:()=>o,metadata:()=>c,toc:()=>a});var t=i(474848),n=i(28453);const o={sidebar_position:8080,slug:"2019-06-18",title:"User Login with Google OAuth2 for Discourse",authors:"mpolinowski",tags:["LINUX","Discourse"]},r=void 0,c={id:"DevOps/Provisioning/2019-06-18--using-oauth2-in-discourse/index",title:"User Login with Google OAuth2 for Discourse",description:"Katmandu, Nepal",source:"@site/docs/DevOps/Provisioning/2019-06-18--using-oauth2-in-discourse/index.mdx",sourceDirName:"DevOps/Provisioning/2019-06-18--using-oauth2-in-discourse",slug:"/DevOps/Provisioning/2019-06-18--using-oauth2-in-discourse/2019-06-18",permalink:"/docs/DevOps/Provisioning/2019-06-18--using-oauth2-in-discourse/2019-06-18",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Provisioning/2019-06-18--using-oauth2-in-discourse/index.mdx",tags:[{label:"LINUX",permalink:"/docs/tags/linux"},{label:"Discourse",permalink:"/docs/tags/discourse"}],version:"current",sidebarPosition:8080,frontMatter:{sidebar_position:8080,slug:"2019-06-18",title:"User Login with Google OAuth2 for Discourse",authors:"mpolinowski",tags:["LINUX","Discourse"]},sidebar:"tutorialSidebar",previous:{title:"User Login with Twitter for Discourse",permalink:"/docs/DevOps/Provisioning/2019-06-19--using-twitter-auth-in-discourse/2019-06-20"},next:{title:"Migrating from vBulletin 5 to Discourse on CentOS 8",permalink:"/docs/DevOps/Provisioning/2019-06-16--migrating-from-vbulletin-to-discourse-on-centos8/2019-06-16"}},h={},a=[{value:"Creating a new Google Cloud Platform Project",id:"creating-a-new-google-cloud-platform-project",level:2},{value:"Setup OAuth2",id:"setup-oauth2",level:2},{value:"Verify your Domain",id:"verify-your-domain",level:2}];function d(e){const s={a:"a",code:"code",h2:"h2",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Katmandu, Nepal",src:i(543543).A+"",width:"1500",height:"618"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"#creating-a-new-google-cloud-platform-project",children:"Creating a new Google Cloud Platform Project"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"#setup-oauth2",children:"Setup OAuth2"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"#verify-your-domain",children:"Verify your Domain"})}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Configure Discourse to allow login and registration with Google OAuth2."}),"\n",(0,t.jsx)(s.h2,{id:"creating-a-new-google-cloud-platform-project",children:"Creating a new Google Cloud Platform Project"}),"\n",(0,t.jsxs)(s.p,{children:["Open the ",(0,t.jsx)(s.a,{href:"https://console.developers.google.com",children:"Google Developer Console"})," and Select to ",(0,t.jsx)(s.strong,{children:"Create a new Project"}),":"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Using OAuth2 with Discourse",src:i(865703).A+"",width:"774",height:"179"})}),"\n",(0,t.jsxs)(s.p,{children:["Fill in the Project Name field, then click on ",(0,t.jsx)(s.strong,{children:"Create"}),":"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Using OAuth2 with Discourse",src:i(963052).A+"",width:"772",height:"394"})}),"\n",(0,t.jsx)(s.h2,{id:"setup-oauth2",children:"Setup OAuth2"}),"\n",(0,t.jsxs)(s.p,{children:["Under ",(0,t.jsx)(s.strong,{children:"APIs and Services"})," and select the ",(0,t.jsx)(s.strong,{children:"OAuth consent screen"}),":"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Using OAuth2 with Discourse",src:i(198965).A+"",width:"962",height:"419"})}),"\n",(0,t.jsxs)(s.p,{children:["Select ",(0,t.jsx)(s.strong,{children:"External"})," and then click on ",(0,t.jsx)(s.strong,{children:"Create"}),":"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Using OAuth2 with Discourse",src:i(375194).A+"",width:"958",height:"390"})}),"\n",(0,t.jsx)(s.p,{children:"Fill out the form then click Save:"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Using OAuth2 with Discourse",src:i(622947).A+"",width:"845",height:"945"})}),"\n",(0,t.jsxs)(s.p,{children:["Go to the ",(0,t.jsx)(s.strong,{children:"Credentials"})," tab on the left, click on ",(0,t.jsx)(s.strong,{children:"+ CREATE CREDENTIALS"})," then click on ",(0,t.jsx)(s.strong,{children:"OAuth client ID"}),":"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Using OAuth2 with Discourse",src:i(286088).A+"",width:"1000",height:"218"})}),"\n",(0,t.jsxs)(s.p,{children:["Choose ",(0,t.jsx)(s.strong,{children:"Web application"})," as the Application Type. In the ",(0,t.jsx)(s.strong,{children:"Authorized JavaScript Origins"})," section, add your site\u2019s base url, including http:// or https://. In the ",(0,t.jsx)(s.strong,{children:"Authorized Redirect URI"})," section, add the base url with ",(0,t.jsx)(s.code,{children:"/auth/google_oauth2/callback"}),". Click the ",(0,t.jsx)(s.strong,{children:"Create"})," button:"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Using OAuth2 with Discourse",src:i(796305).A+"",width:"1000",height:"669"})}),"\n",(0,t.jsx)(s.p,{children:"The OAuth client dialog will appear with client ID and secret:"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Using OAuth2 with Discourse",src:i(318998).A+"",width:"994",height:"471"})}),"\n",(0,t.jsx)(s.p,{children:"In your Discourse site settings, check enable google oauth2 logins, and fill in your google oauth2 client id and google auth2 client secret provided earlier:"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Using OAuth2 with Discourse",src:i(215935).A+"",width:"950",height:"348"})}),"\n",(0,t.jsx)(s.h2,{id:"verify-your-domain",children:"Verify your Domain"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Using OAuth2 with Discourse",src:i(231961).A+"",width:"860",height:"383"})}),"\n",(0,t.jsxs)(s.p,{children:["Your site must be registered on ",(0,t.jsx)(s.a,{href:"https://www.google.com/webmasters/tools",children:"Search Console"}),"  with an ",(0,t.jsx)(s.code,{children:"https://"})," URL or with the domain name provider verification method ",(0,t.jsx)(s.strong,{children:"before you can proceed"}),":"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Using OAuth2 with Discourse",src:i(999856).A+"",width:"836",height:"342"})}),"\n",(0,t.jsxs)(s.p,{children:["Add your domain to your ",(0,t.jsx)(s.a,{href:"https://www.google.com/webmasters/tools",children:"Search Console"})," properties:"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Using OAuth2 with Discourse",src:i(481611).A+"",width:"1171",height:"630"})}),"\n",(0,t.jsx)(s.p,{children:"You can now add a HTML Tag to your Discourse page template to verify your ownership over the domain. To do this copy the meta tag Google provides for you:"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Using OAuth2 with Discourse",src:i(717954).A+"",width:"1018",height:"422"})}),"\n",(0,t.jsxs)(s.p,{children:["Go to the Discourse Admin and go to the following page: ",(0,t.jsx)(s.code,{children:"Admin>Customize>Themes"}),", then select ",(0,t.jsx)(s.strong,{children:"Components"}),". Click on ",(0,t.jsx)(s.strong,{children:"Install"}),", then ",(0,t.jsx)(s.strong,{children:"+ Create new"}),":"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Using OAuth2 with Discourse",src:i(410749).A+"",width:"967",height:"415"})}),"\n",(0,t.jsxs)(s.p,{children:["Give it a meaningful name (i.e. ",(0,t.jsx)(s.code,{children:"GoogleSearchConsoleVerification"}),"):"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Using OAuth2 with Discourse",src:i(189620).A+"",width:"941",height:"345"})}),"\n",(0,t.jsxs)(s.p,{children:["In your new component, select ",(0,t.jsx)(s.strong,{children:"Edit CSS/HTML"}),", under ",(0,t.jsx)(s.strong,{children:"Custom CSS/HTML"}),". In the ",(0,t.jsx)(s.code,{children:"</head>"})," section, paste the HTML tag generated by GSC Verification Wizard, then Save this change:"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Using OAuth2 with Discourse",src:i(112079).A+"",width:"951",height:"271"})}),"\n",(0,t.jsx)(s.p,{children:"Back in the Theme menu add your new component to your default Discourse theme:"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Using OAuth2 with Discourse",src:i(826982).A+"",width:"946",height:"361"})}),"\n",(0,t.jsxs)(s.p,{children:["Back in GSC click on ",(0,t.jsx)(s.strong,{children:"Verify"})," to add your domain to your properties:"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Using OAuth2 with Discourse",src:i(583137).A+"",width:"1154",height:"359"})}),"\n",(0,t.jsx)(s.p,{children:"Back in the OAuth2 configuration you can now add your verified domain without further issues!"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Using OAuth2 with Discourse",src:i(310424).A+"",width:"808",height:"303"})})]})}function l(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},865703:(e,s,i)=>{i.d(s,{A:()=>t});const t=i.p+"assets/images/Discourse_OAuth2_Login_01-c6d69f9736dec9d1bb88c9480f608efa.png"},963052:(e,s,i)=>{i.d(s,{A:()=>t});const t=i.p+"assets/images/Discourse_OAuth2_Login_02-b1d33314cc5d0177ecf1ebc9aac56f9e.png"},198965:(e,s,i)=>{i.d(s,{A:()=>t});const t=i.p+"assets/images/Discourse_OAuth2_Login_03-093957f88796a7f74c28842734f39318.png"},375194:(e,s,i)=>{i.d(s,{A:()=>t});const t=i.p+"assets/images/Discourse_OAuth2_Login_04-043e7386864b2d72a955b1aef5a368e9.png"},622947:(e,s,i)=>{i.d(s,{A:()=>t});const t=i.p+"assets/images/Discourse_OAuth2_Login_05-17f90df083721b64f4e225ea068c733b.png"},286088:(e,s,i)=>{i.d(s,{A:()=>t});const t=i.p+"assets/images/Discourse_OAuth2_Login_06-5bbab1b40102a4a9fcc5e39808ad02f1.png"},796305:(e,s,i)=>{i.d(s,{A:()=>t});const t=i.p+"assets/images/Discourse_OAuth2_Login_07-d961cef03f81c602c83f072a83445787.png"},318998:(e,s,i)=>{i.d(s,{A:()=>t});const t=i.p+"assets/images/Discourse_OAuth2_Login_08-c6d2aa8c9fd1fce6725aa4b156a587e2.png"},215935:(e,s,i)=>{i.d(s,{A:()=>t});const t=i.p+"assets/images/Discourse_OAuth2_Login_09-6c1e5775a506a978177fa9b0bf6ea569.png"},231961:(e,s,i)=>{i.d(s,{A:()=>t});const t=i.p+"assets/images/Discourse_OAuth2_Login_10-c8c08b16fd03087993117fb285fa2740.png"},999856:(e,s,i)=>{i.d(s,{A:()=>t});const t=i.p+"assets/images/Discourse_OAuth2_Login_11-deac2aaae31bae2b06e2181fa1f646de.png"},481611:(e,s,i)=>{i.d(s,{A:()=>t});const t=i.p+"assets/images/Discourse_OAuth2_Login_12-2879d5d2c00ba4041e0a1784cffb4757.png"},717954:(e,s,i)=>{i.d(s,{A:()=>t});const t=i.p+"assets/images/Discourse_OAuth2_Login_13-a4f909f8d32175c964188952e0480330.png"},410749:(e,s,i)=>{i.d(s,{A:()=>t});const t=i.p+"assets/images/Discourse_OAuth2_Login_14-f0552d85b1deac48888e07e9bbca100b.png"},189620:(e,s,i)=>{i.d(s,{A:()=>t});const t=i.p+"assets/images/Discourse_OAuth2_Login_15-93be24ff3c4affdfed904e10d4f1036f.png"},112079:(e,s,i)=>{i.d(s,{A:()=>t});const t=i.p+"assets/images/Discourse_OAuth2_Login_16-0130eb802ac2a74be0ddd842e11786a0.png"},826982:(e,s,i)=>{i.d(s,{A:()=>t});const t=i.p+"assets/images/Discourse_OAuth2_Login_17-0f00da4fe47cc657b4a091ce3dca3ed9.png"},583137:(e,s,i)=>{i.d(s,{A:()=>t});const t=i.p+"assets/images/Discourse_OAuth2_Login_18-0f2d2c64f9b14b087c6848e259b96a6b.png"},310424:(e,s,i)=>{i.d(s,{A:()=>t});const t=i.p+"assets/images/Discourse_OAuth2_Login_19-d1a4bedc1a68e3d574f5ec6054f6c445.png"},543543:(e,s,i)=>{i.d(s,{A:()=>t});const t=i.p+"assets/images/photo-kt456d_645dhfh6dgjkhg4_d-b84a4567668b053dbbe126779a4caaae.jpg"},28453:(e,s,i)=>{i.d(s,{R:()=>r,x:()=>c});var t=i(296540);const n={},o=t.createContext(n);function r(e){const s=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),t.createElement(o.Provider,{value:s},e.children)}}}]);