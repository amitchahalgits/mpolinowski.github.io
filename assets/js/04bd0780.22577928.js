"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[15114],{508322:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>c,toc:()=>r});var s=o(474848),t=o(28453);const a={sidebar_position:9020,slug:"2019-06-07",title:"Setting up Docker on CentOS 8",authors:"mpolinowski",tags:["LINUX","Docker"]},i=void 0,c={id:"DevOps/Linux/2019-06-07--installing-docker-on-centos8/index",title:"Setting up Docker on CentOS 8",description:"Harbin, China",source:"@site/docs/DevOps/Linux/2019-06-07--installing-docker-on-centos8/index.mdx",sourceDirName:"DevOps/Linux/2019-06-07--installing-docker-on-centos8",slug:"/DevOps/Linux/2019-06-07--installing-docker-on-centos8/2019-06-07",permalink:"/docs/DevOps/Linux/2019-06-07--installing-docker-on-centos8/2019-06-07",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Linux/2019-06-07--installing-docker-on-centos8/index.mdx",tags:[{label:"LINUX",permalink:"/docs/tags/linux"},{label:"Docker",permalink:"/docs/tags/docker"}],version:"current",sidebarPosition:9020,frontMatter:{sidebar_position:9020,slug:"2019-06-07",title:"Setting up Docker on CentOS 8",authors:"mpolinowski",tags:["LINUX","Docker"]},sidebar:"tutorialSidebar",previous:{title:"Downloading Docker Images for Offline Use",permalink:"/docs/DevOps/Linux/2019-06-14--download-and-save-docker-image/2019-06-14"},next:{title:"Centos Administration",permalink:"/docs/DevOps/Linux/2019-01-13--centos-administration/2019-01-13"}},l={},r=[{value:"Docker ?",id:"docker-",level:2},{value:"Install Docker-CE",id:"install-docker-ce",level:2},{value:"Start and enable the Docker Daemon",id:"start-and-enable-the-docker-daemon",level:2},{value:"Installing Docker-Compose",id:"installing-docker-compose",level:2},{value:"Testing Docker",id:"testing-docker",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Harbin, China",src:o(650901).A+"",width:"1500",height:"975"})}),"\n",(0,s.jsx)(n.h2,{id:"docker-",children:"Docker ?"}),"\n",(0,s.jsx)(n.p,{children:"The latest release of the RHEL 8 / CentOS 8 introduces buildah and podman, which aim to be compatible with existing docker images and work without relying on a daemon, allowing the creation of containers as normal users, without the need of special permissions. Some specific tools, however, are still missing: an equivalent of docker-compose, for example does not exists yet. In this tutorial we will see how to install and run the original Docker CE on CentOS 8."}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"dnf config-manager"})," utility let us enable or disable a repository in our distribution. We can use it to add and enable the docker-ce repo:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo dnf config-manager --add-repo=https://download.docker.com/linux/centos/docker-ce.repo\n"})}),"\n",(0,s.jsx)(n.p,{children:"We can verify that the repository has been enabled, by looking at the output of the following command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo dnf repolist -v\n"})}),"\n",(0,s.jsx)(n.p,{children:"The docker-ce-stable repository is now enabled on our system. To display all of them, we can run:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"dnf list docker-ce --showduplicates | sort -r\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Now we need to install ",(0,s.jsx)(n.code,{children:"containerd.io"})," manually. As there isn't a version for CentOS 7 (yet?) we need to install the following:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# sudo dnf install https://download.docker.com/linux/centos/7/x86_64/stable/Packages/containerd.io-1.2.6-3.3.el7.x86_64.rpm\r\nsudo dnf install https://download.docker.com/linux/centos/7/x86_64/stable/Packages/containerd.io-1.4.3-3.1.el7.x86_64.rpm\n"})}),"\n",(0,s.jsx)(n.h2,{id:"install-docker-ce",children:"Install Docker-CE"}),"\n",(0,s.jsx)(n.p,{children:"After the package is installed, we can simply install the latest docker-ce:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo dnf install docker-ce\n"})}),"\n",(0,s.jsx)(n.p,{children:"In order to make DNS resolution work inside Docker containers, we must disable firewalld (really?):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo systemctl disable firewalld\n"})}),"\n",(0,s.jsx)(n.h2,{id:"start-and-enable-the-docker-daemon",children:"Start and enable the Docker Daemon"}),"\n",(0,s.jsx)(n.p,{children:"Once docker-ce is installed, we must start and enable the docker daemon, so that it will be also launched automatically at boot:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo systemctl enable --now docker\n"})}),"\n",(0,s.jsx)(n.p,{children:"At this point, we can confirm that the daemon is active by running:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"systemctl is-active docker\r\nsystemctl is-enabled docker\n"})}),"\n",(0,s.jsx)(n.h2,{id:"installing-docker-compose",children:"Installing Docker-Compose"}),"\n",(0,s.jsxs)(n.p,{children:["Download the binary from the ",(0,s.jsx)(n.a,{href:"https://github.com/docker/compose/releases/latest",children:"github page of the project"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"curl -L 'https://github.com/docker/compose/releases/download/1.24.1/docker-compose-$(uname -s)-$(uname -m)' -o docker-compose\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Once the binary is downloaded, we move it into ",(0,s.jsx)(n.code,{children:"/usr/local/bin"})," and we make it executable:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo mv docker-compose /usr/local/bin && sudo chmod +x /usr/local/bin/docker-compose\n"})}),"\n",(0,s.jsx)(n.h2,{id:"testing-docker",children:"Testing Docker"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker pull hello-world\r\ndocker run hello-world\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Docker on CentOS 8",src:o(450609).A+"",width:"735",height:"343"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},450609:(e,n,o)=>{o.d(n,{A:()=>s});const s=o.p+"assets/images/Docker_on_CentOS8_01-5953ac7e19dc34bfb367b049c4f613da.png"},650901:(e,n,o)=>{o.d(n,{A:()=>s});const s=o.p+"assets/images/photo-456t66d_64567fh6dgjkhg4_d-2bc0cc54edcece3223e2fc9b52a22fa5.jpg"},28453:(e,n,o)=>{o.d(n,{R:()=>i,x:()=>c});var s=o(296540);const t={},a=s.createContext(t);function i(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);