"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[80820],{414855:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>t,metadata:()=>a,toc:()=>d});var i=n(474848),o=n(28453);const t={sidebar_position:8090,slug:"2021-10-13",title:"Zabbix Docker-Compose Setup",authors:"mpolinowski",tags:["Linux","Zabbix","Docker"]},r=void 0,a={id:"DevOps/Zabbix/2021-10-13--zabbix-compose-setup/index",title:"Zabbix Docker-Compose Setup",description:"Guangzhou, China",source:"@site/docs/DevOps/Zabbix/2021-10-13--zabbix-compose-setup/index.md",sourceDirName:"DevOps/Zabbix/2021-10-13--zabbix-compose-setup",slug:"/DevOps/Zabbix/2021-10-13--zabbix-compose-setup/2021-10-13",permalink:"/docs/DevOps/Zabbix/2021-10-13--zabbix-compose-setup/2021-10-13",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Zabbix/2021-10-13--zabbix-compose-setup/index.md",tags:[{label:"Linux",permalink:"/docs/tags/linux"},{label:"Zabbix",permalink:"/docs/tags/zabbix"},{label:"Docker",permalink:"/docs/tags/docker"}],version:"current",sidebarPosition:8090,frontMatter:{sidebar_position:8090,slug:"2021-10-13",title:"Zabbix Docker-Compose Setup",authors:"mpolinowski",tags:["Linux","Zabbix","Docker"]},sidebar:"tutorialSidebar",previous:{title:"Testing the Zabbix API with Postman",permalink:"/docs/DevOps/Zabbix/2022-01-13--zabbix-api-testing/2022-01-13"},next:{title:"Zabbix Apache 2 Monitor",permalink:"/docs/DevOps/Zabbix/2021-01-14--zabbix-apache2-monitor/2021-10-14"}},c={},d=[{value:"Zabbix Server 5.4",id:"zabbix-server-54",level:2},{value:"Docker Compose Setup",id:"docker-compose-setup",level:3},{value:"Run",id:"run",level:3}];function l(e){const s={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"Guangzhou, China",src:n(457069).A+"",width:"1500",height:"377"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"#zabbix-server-54",children:"Zabbix Server 5.4"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#docker-compose-setup",children:"Docker Compose Setup"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#run",children:"Run"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.a,{href:"/docs/DevOps/Zabbix/2022-01-13--zabbix-server-v6/2022-01-13",children:"Update to Version 6"})}),"\n",(0,i.jsx)(s.h2,{id:"zabbix-server-54",children:"Zabbix Server 5.4"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.a,{href:"https://github.com/mpolinowski/zabbix-server-compose",children:"Github Repository"})}),"\n",(0,i.jsx)(s.h3,{id:"docker-compose-setup",children:"Docker Compose Setup"}),"\n",(0,i.jsxs)(s.p,{children:["This article is based on a fork of the ",(0,i.jsx)(s.a,{href:"https://github.com/zabbix/zabbix-docker",children:"official Zabbix Server Repo"})," with a few changes for a production setup:"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Changes"}),":"]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["Removed everything I don't need - this file only sets up the Zabbix Server with a ",(0,i.jsx)(s.strong,{children:"Postgres"})," backend, the Zabbix Server Dashboard frontend using ",(0,i.jsx)(s.strong,{children:"NGINX"})," and an Zabbix Agent 1 to monitor the server itself."]}),"\n",(0,i.jsxs)(s.li,{children:["Added container names, container restart policies and fixed IP addresses (The Zabbix Agent Container IP is set to ",(0,i.jsx)(s.code,{children:"172.16.239.106"})," - ",(0,i.jsx)(s.strong,{children:"MAKE SURE"})," to change the agent address from default ",(0,i.jsx)(s.code,{children:"127.0.0.1"})," to ",(0,i.jsx)(s.code,{children:"172.16.239.106"})," inside the Server Dashboard! see below)."]}),"\n",(0,i.jsxs)(s.li,{children:["Added an additional external network ",(0,i.jsx)(s.code,{children:"ingress_gateway"})," that will be used by the system ingress to direct traffic to Zabbix. The web frontend container opens both port ",(0,i.jsx)(s.code,{children:"8080"})," and ",(0,i.jsx)(s.code,{children:"8443"})," to debug the initial setup (SSL will be handled by the Ingress and is not configured on port ",(0,i.jsx)(s.code,{children:"8443"}),"). The ports can be commented out later. Make sure to either remove the ",(0,i.jsx)(s.code,{children:"ingress_gateway"})," from the configuration file or add it manually ",(0,i.jsx)(s.code,{children:"docker network create ingress_gateway"})," before starting the containers."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"Zabbix Agent Config",src:n(311972).A+"",width:"1136",height:"458"})}),"\n",(0,i.jsx)(s.h3,{id:"run",children:"Run"}),"\n",(0,i.jsxs)(s.p,{children:["Before running the compose file, check the ",(0,i.jsx)(s.code,{children:"./env_vars"})," files and change what needs to be changed (passwords!)."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"docker network create ingress_gateway\r\ndocker-compose up\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Check the console output for errors and visit the Zabbix Dashboard on your server IP on port ",(0,i.jsx)(s.code,{children:":8081"}),"."]})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},311972:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/Zabbix_Agent_Configuration_01-bc81b4211355a169a2291c833af363aa.png"},457069:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-4f0fde65e04cafca8ab4f458db4fec43.jpg"},28453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>a});var i=n(296540);const o={},t=i.createContext(o);function r(e){const s=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);