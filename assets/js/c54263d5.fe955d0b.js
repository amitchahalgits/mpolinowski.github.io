"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[73757],{624915:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>h,contentTitle:()=>s,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>l});var a=r(474848),t=r(28453);const i={sidebar_position:9030,slug:"2019-09-15",title:"Updating a Magento Project from PHP v7.0 to v7.3",authors:"mpolinowski",tags:["LINUX","Magento"]},s=void 0,o={id:"Development/Magento/2019-09-15--updating-from-php70-to-php72/index",title:"Updating a Magento Project from PHP v7.0 to v7.3",description:"Katmandu, Nepal",source:"@site/docs/Development/Magento/2019-09-15--updating-from-php70-to-php72/index.mdx",sourceDirName:"Development/Magento/2019-09-15--updating-from-php70-to-php72",slug:"/Development/Magento/2019-09-15--updating-from-php70-to-php72/2019-09-15",permalink:"/docs/Development/Magento/2019-09-15--updating-from-php70-to-php72/2019-09-15",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Development/Magento/2019-09-15--updating-from-php70-to-php72/index.mdx",tags:[{label:"LINUX",permalink:"/docs/tags/linux"},{label:"Magento",permalink:"/docs/tags/magento"}],version:"current",sidebarPosition:9030,frontMatter:{sidebar_position:9030,slug:"2019-09-15",title:"Updating a Magento Project from PHP v7.0 to v7.3",authors:"mpolinowski",tags:["LINUX","Magento"]},sidebar:"tutorialSidebar",previous:{title:"Working with SQL Dumps",permalink:"/docs/Development/Magento/2019-09-16--working-with-sql-dumps/2019-09-16"},next:{title:"Magento 2 Manual Theme Installation",permalink:"/docs/Development/Magento/2019-09-14--magento-and-themes/2019-09-14"}},h={},l=[{value:"Check your Environment",id:"check-your-environment",level:2},{value:"Install PHP v7.3",id:"install-php-v73",level:2},{value:"Set the Timezone",id:"set-the-timezone",level:3},{value:"Increase PHP memory limit",id:"increase-php-memory-limit",level:3},{value:"Enable opcache.save_comments",id:"enable-opcachesave_comments",level:3},{value:"Switch to your new PHP Version",id:"switch-to-your-new-php-version",level:2},{value:"Checking your Code",id:"checking-your-code",level:2},{value:"mcrypt",id:"mcrypt",level:3},{value:"Eval option for mb_ereg_replace() and mb_eregi_replace()",id:"eval-option-for-mb_ereg_replace-and-mb_eregi_replace",level:3},{value:"Unquoted strings",id:"unquoted-strings",level:3},{value:"png2wbmp() and jpeg2wbmp()",id:"png2wbmp-and-jpeg2wbmp",level:3},{value:"INTL_IDNA_VARIANT_2003 variant",id:"intl_idna_variant_2003-variant",level:3},{value:"__autoload() method",id:"__autoload-method",level:3},{value:"track_errors ini setting and $php_errormsg variable",id:"track_errors-ini-setting-and-php_errormsg-variable",level:3},{value:"create_function() function",id:"create_function-function",level:3},{value:"mbstring.func_overload ini setting",id:"mbstringfunc_overload-ini-setting",level:3},{value:"(unset) cast",id:"unset-cast",level:3},{value:"parse_str() without a second argument",id:"parse_str-without-a-second-argument",level:3},{value:"gmp_random() function",id:"gmp_random-function",level:3},{value:"each() function",id:"each-function",level:3},{value:"assert() with a string argument",id:"assert-with-a-string-argument",level:3},{value:"$errcontext argument of error handlers",id:"errcontext-argument-of-error-handlers",level:3},{value:"read_exif_data() function",id:"read_exif_data-function",level:3},{value:"Re-Deploy Magento",id:"re-deploy-magento",level:2},{value:"Purge Old PHP Version",id:"purge-old-php-version",level:2}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"Katmandu, Nepal",src:r(77536).A+"",width:"1500",height:"774"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#check-your-environment",children:"Check your Environment"})}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"#install-php-v73",children:"Install PHP v7.3"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#set-the-timezone",children:"Set the Timezone"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#increase-php-memory-limit",children:"Increase PHP memory limit"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#enable-opcachesave_comments",children:"Enable opcache.save_comments"})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#switch-to-your-new-php-version",children:"Switch to your new PHP Version"})}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"#checking-your-code",children:"Checking your Code"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#mcrypt",children:"mcrypt"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#eval-option-for-mb_ereg_replace-and-mb_eregi_replace",children:"Eval option for mb_ereg_replace() and mb_eregi_replace()"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#unquoted-strings",children:"Unquoted strings"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#png2wbmp-and-jpeg2wbmp",children:"png2wbmp() and jpeg2wbmp()"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#intl_idna_variant_2003-variant",children:"INTL_IDNA_VARIANT_2003 variant"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#__autoload-method",children:"__autoload() method"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#track_errors-ini-setting-and-php_errormsg-variable",children:"track_errors ini setting and $php_errormsg variable"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#create_function-function",children:"create_function() function"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#mbstringfunc_overload-ini-setting",children:"mbstring.func_overload ini setting"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#unset-cast",children:"(unset) cast"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#parse_str-without-a-second-argument",children:"parse_str() without a second argument"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#gmp_random-function",children:"gmp_random() function"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#each-function",children:"each() function"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#assert-with-a-string-argument",children:"assert() with a string argument"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#errcontext-argument-of-error-handlers",children:"$errcontext argument of error handlers"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#read_exif_data-function",children:"read_exif_data() function"})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#re-deploy-magento",children:"Re-Deploy Magento"})}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"check-your-environment",children:"Check your Environment"}),"\n",(0,a.jsx)(n.p,{children:"First check the version of PHP you have installed:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"php -v\r\nPHP 7.0.4 (cli) (built: Dec 18 2019 15:01:47) ( NTS )\r\nCopyright (c) 1997-2018 The PHP Group\r\nZend Engine v3.2.0, Copyright (c) 1998-2018 Zend Technologies\r\n    with Zend OPcache v7.0.4, Copyright (c) 1999-2018, by Zend Technologies\n"})}),"\n",(0,a.jsx)(n.p,{children:"Then check what modules you are using:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"php -m\r\n[PHP Modules]\r\nbcmath\r\ncalendar\r\nCore\r\nctype\r\ncurl\r\ndate\r\ndom\r\nexif\r\nfileinfo\r\nfilter\r\nftp\r\ngd\r\ngettext\r\nhash\r\niconv\r\nintl\r\njson\r\nlibxml\r\nmbstring\r\nmysqli\r\nmysqlnd\r\nopenssl\r\npcntl\r\npcre\r\nPDO\r\npdo_mysql\r\nPhar\r\nposix\r\nreadline\r\nReflection\r\nsession\r\nshmop\r\nSimpleXML\r\nsoap\r\nsockets\r\nsodium\r\nSPL\r\nstandard\r\nsysvmsg\r\nsysvsem\r\nsysvshm\r\ntokenizer\r\nwddx\r\nxml\r\nxmlreader\r\nxmlwriter\r\nxsl\r\nZend OPcache\r\nzip\r\nzlib\r\n\r\n[Zend Modules]\r\nZend OPcache\n"})}),"\n",(0,a.jsx)(n.p,{children:"Note them down, as you will have to install all of them for the new version of PHP that you are going to install."}),"\n",(0,a.jsx)(n.h2,{id:"install-php-v73",children:"Install PHP v7.3"}),"\n",(0,a.jsx)(n.p,{children:"Run below commands to upgrade the current packages to the latest version:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"sudo apt update \r\nsudo apt upgrade\n"})}),"\n",(0,a.jsx)(n.p,{children:"Now setup PPA on Debian 10. Then import packages signing key. After that configure PPA for the PHP packages on your system:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'sudo apt install ca-certificates apt-transport-https \r\nwget -q https://packages.sury.org/php/apt.gpg -O- | sudo apt-key add -\r\necho "deb https://packages.sury.org/php/ buster main" | sudo tee /etc/apt/sources.list.d/php.list\n'})}),"\n",(0,a.jsx)(n.p,{children:"Now run the following commands to install PHP 7.3:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"sudo apt update\r\nsudo apt install php7.3\n"})}),"\n",(0,a.jsx)(n.p,{children:"Install the necessary PHP modules:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"sudo apt install php7.3-cli php7.3-common php7.3-curl php7.3-gd php7.3-json php7.3-mbstring php7.3-mysql php7.3-xml php7.3-bcmath php7.3-gd php7.3-intl php7.3-opcache php7.3-soap\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Now we need to configure PHP v7.3 - to find out which ",(0,a.jsx)(n.code,{children:"php.ini"})," file is the one that is loaded run ",(0,a.jsx)(n.code,{children:"php -i"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"php -i\r\nphpinfo()\r\nPHP Version => 7.3.26-1+0~20191218.33+debian10~1.gbpb5a34b\r\n\r\nSystem => Linux Magento2 4.19.0-6-amd64 #1 SMP Debian 4.19.67-2+deb10u2 (2019-11-11) x86_64\r\nBuild Date => Dec 18 2019 15:01:47\r\nServer API => Command Line Interface\r\nVirtual Directory Support => disabled\r\nConfiguration File (php.ini) Path => /etc/php/7.3/cli\r\nLoaded Configuration File => /etc/php/7.3/cli/php.ini\r\nScan this dir for additional .ini files => /etc/php/7.3/cli/conf.d\r\nAdditional .ini files parsed => /etc/php/7.3/cli/conf.d/10-mysqlnd.ini,\n"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:["Note: on my system there was a second configuration file in ",(0,a.jsx)(n.code,{children:"/etc/php/7.3/apache2/php.ini"}),". In a later step I am going to install NGINX that is going to add more files in ",(0,a.jsx)(n.code,{children:"/etc/php/7.3/fpm/php.ini"})," and  ",(0,a.jsx)(n.code,{children:"/etc/php/7.3/cli/php.ini"}),". The Magento documentation recommend to do all changes to all ",(0,a.jsx)(n.code,{children:"php.ini"})," files on your system."]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["We can see that the loaded configuration file is ",(0,a.jsx)(n.code,{children:"/etc/php/7.3/cli/php.ini"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"nano /etc/php/7.3/cli/php.ini\n"})}),"\n",(0,a.jsx)(n.h3,{id:"set-the-timezone",children:"Set the Timezone"}),"\n",(0,a.jsxs)(n.p,{children:["Edit the ",(0,a.jsx)(n.code,{children:"php.ini"})," configuration file and update the ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/timezones.php",children:"timezone"})," value in ",(0,a.jsx)(n.code,{children:"date.timezone"})," setting tag:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'date.timezone = "Europe/Berlin"\n'})}),"\n",(0,a.jsx)(n.h3,{id:"increase-php-memory-limit",children:"Increase PHP memory limit"}),"\n",(0,a.jsx)(n.p,{children:"Simply increase the default value to the recommended value:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Compiling code or deploying static assets: ",(0,a.jsx)(n.code,{children:"756M"})]}),"\n",(0,a.jsxs)(n.li,{children:["Installing and updating Magento components from Magento Marketplace: ",(0,a.jsx)(n.code,{children:"2G"})]}),"\n",(0,a.jsxs)(n.li,{children:["Testing: ",(0,a.jsx)(n.code,{children:"~3-4G"})]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"memory_limit = 2G\n"})}),"\n",(0,a.jsx)(n.h3,{id:"enable-opcachesave_comments",children:"Enable opcache.save_comments"}),"\n",(0,a.jsxs)(n.p,{children:["Enable ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/opcache.configuration.php#ini.opcache.save_comments",children:"opcache.save_comments"})," and it is recommended to enable the ",(0,a.jsx)(n.a,{href:"http://php.net/manual/en/intro.opcache.php",children:"PHP OpCache"})," for performance reasons."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"[opcache]\r\n; Determines if Zend OPCache is enabled\r\nopcache.save_comments=1\r\nopcache.enable=1\n"})}),"\n",(0,a.jsx)(n.h2,{id:"switch-to-your-new-php-version",children:"Switch to your new PHP Version"}),"\n",(0,a.jsx)(n.p,{children:"To set PHP 7.3 as your active PHP version for CLI and Apache2 disable Apache2 modules for all other installed PHP versions and configure CLI using the update-alternatives command. Run the following commands to make changes."}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Apache:"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"sudo a2dismod php5.6 php7.1 php7.0   ## Shows error for modules not installed \r\nsudo a2enmod php7.3\r\nsudo service apache2 restart\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsx)(n.li,{children:"CLI:"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"sudo update-alternatives --set php /usr/bin/php7.3\r\nsudo update-alternatives --set phar /usr/bin/phar7.3\r\nsudo update-alternatives --set phar.phar /usr/bin/phar.phar7.3\r\nsudo update-alternatives --set phpize /usr/bin/phpize7.3\r\nsudo update-alternatives --set php-config /usr/bin/php-config7.3\n"})}),"\n",(0,a.jsx)(n.p,{children:"Running a PHP version check again should show you that you are now using the updated version:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"php -v\r\nPHP 7.3.26-1+0~20191218.33+debian10~1.gbpb5a34b (cli) (built: Dec 18 2019 15:01:47) ( NTS )\r\nCopyright (c) 1997.3018 The PHP Group\r\nZend Engine v3.2.0, Copyright (c) 1998-2018 Zend Technologies\r\n    with Zend OPcache v7.3.26-1+0~20191218.33+debian10~1.gbpb5a34b, Copyright (c) 1999-2018, by Zend Technologies\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsx)(n.li,{children:"NGINX:"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Go to your NGINX server configuration, e.g.:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"nano /etc/nginx/sites-available/default\n"})}),"\n",(0,a.jsx)(n.p,{children:"Change the FastCGI backend to use the new PHP-FPM socket, save and exit the file:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"location ~ \\.php$ {\r\n        include snippets/fastcgi-php.conf;\r\n        fastcgi_pass unix:/run/php/php7.3-fpm.sock;\r\n}\n"})}),"\n",(0,a.jsx)(n.p,{children:"Run the configuration test and restart the web server:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"nginx -t\r\nsudo service nginx restart\n"})}),"\n",(0,a.jsx)(n.h2,{id:"checking-your-code",children:"Checking your Code"}),"\n",(0,a.jsx)(n.h3,{id:"mcrypt",children:"mcrypt"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/migration71.deprecated.php",children:"mcrypt extension has been deprecated"})," in favour of OpenSSL, where it will be removed from the core and into PECL in PHP 7.3. Make sure that your code does not use something like:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"$initVector = mcrypt_create_iv(mcrypt_get_iv_size(SAFETY_CIPHER, SAFETY_MODE), MCRYPT_RAND);\r\n$encrypted = mcrypt_encrypt(SAFETY_CIPHER, $key, $password, SAFETY_MODE, $initVector);\r\necho base64_encode($initVector) . ENCRYPTION_DIVIDER_TOKEN . base64_encode($encrypted) . '<br/>';\r\necho mcrypt_decrypt(SAFETY_CIPHER, $key, $encrypted, SAFETY_MODE, $initVector) . '<br/>';\n"})}),"\n",(0,a.jsx)(n.h3,{id:"eval-option-for-mb_ereg_replace-and-mb_eregi_replace",children:"Eval option for mb_ereg_replace() and mb_eregi_replace()"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/migration71.deprecated.php",children:"e pattern modifier has been deprecated"})," for the ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/function.mb-ereg-replace.php",children:"mb_ereg_replace()"})," and ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/function.mb-eregi-replace.php",children:"mb_eregi_replace()"})," functions."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:'mb_eregi_replace ( string $pattern , string $replace , string $string [, string $option = "msri" ] ) : string\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:'mb_ereg_replace ( string $pattern , string $replacement , string $string [, string $option = "msr" ] ) : string\n'})}),"\n",(0,a.jsx)(n.h3,{id:"unquoted-strings",children:"Unquoted strings"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/migration72.deprecated.php",children:"Unquoted strings"})," that are non-existent global constants are taken to be strings of themselves. This behaviour will now emit an E_WARNING:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"<?php\r\n\r\nvar_dump(NONEXISTENT);\r\n\r\n/* Output:\r\nWarning: Use of undefined constant NONEXISTENT - assumed 'NONEXISTENT' (this will throw an Error in a future version of PHP) in %s on line %d\r\nstring(11) \"NONEXISTENT\"\r\n*/\n"})}),"\n",(0,a.jsx)(n.h3,{id:"png2wbmp-and-jpeg2wbmp",children:"png2wbmp() and jpeg2wbmp()"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/function.png2wbmp.php",children:"png2wbmp()"})," and ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/function.jpeg2wbmp.php",children:"jpeg2wbmp()"})," functions from the ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/migration72.deprecated.php#migration72.deprecated.png2wbmp-jpeg2wbmp",children:"GD extension have now been deprecated"})," and will be removed in the next major version of PHP."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"png2wbmp ( string $pngname , string $wbmpname , int $dest_height , int $dest_width , int $threshold ) : bool\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"jpeg2wbmp ( string $jpegname , string $wbmpname , int $dest_height , int $dest_width , int $threshold ) : bool\n"})}),"\n",(0,a.jsx)(n.h3,{id:"intl_idna_variant_2003-variant",children:"INTL_IDNA_VARIANT_2003 variant"}),"\n",(0,a.jsxs)(n.p,{children:["The Intl extension has deprecated the INTL_IDNA_VARIANT_2003 variant, which is currently being used as the default for ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/function.idn-to-ascii.php",children:"idn_to_ascii()"})," and ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/function.idn-to-utf8.php",children:"idn_to_utf8()"}),". PHP 7.4 will see these defaults changed to INTL_IDNA_VARIANT_UTS46, and the ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/migration72.deprecated.php#migration72.deprecated.png2wbmp-jpeg2wbmp",children:"next major version of PHP will remove INTL_IDNA_VARIANT_2003 altogether"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"idn_to_ascii ( string $domain [, int $options = IDNA_DEFAULT [, int $variant = INTL_IDNA_VARIANT_UTS46 [, array &$idna_info ]]] ) : string\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"idn_to_utf8 ( string $domain [, int $options = IDNA_DEFAULT [, int $variant = INTL_IDNA_VARIANT_UTS46 [, array &$idna_info ]]] ) : string\n"})}),"\n",(0,a.jsx)(n.h3,{id:"__autoload-method",children:"__autoload() method"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/function.autoload.php",children:"__autoload() method has been deprecated"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"__autoload ( string $class ) : void\n"})}),"\n",(0,a.jsx)(n.h3,{id:"track_errors-ini-setting-and-php_errormsg-variable",children:"track_errors ini setting and $php_errormsg variable"}),"\n",(0,a.jsxs)(n.p,{children:["When the track_errors ini setting is enabled, a $php_errormsg variable is created in the local scope when a non-fatal error occurs. Given that the preferred way of retrieving such error information is by using ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/function.error-get-last.php",children:"error_get_last()"}),", ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/function.error-get-last.php",children:"this feature has been deprecated"}),"."]}),"\n",(0,a.jsx)(n.h3,{id:"create_function-function",children:"create_function() function"}),"\n",(0,a.jsxs)(n.p,{children:["Given the security issues of this function, this dated function ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/migration72.deprecated.php#migration72.deprecated.create_function-function",children:"has now been deprecated"}),". The preferred alternative is to use anonymous functions."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"create_function ( string $args , string $code ) : string\n"})}),"\n",(0,a.jsx)(n.h3,{id:"mbstringfunc_overload-ini-setting",children:"mbstring.func_overload ini setting"}),"\n",(0,a.jsx)(n.p,{children:"Given the interoperability problems of string-based functions being used in environments with this setting enabled, it has now been deprecated."}),"\n",(0,a.jsx)(n.h3,{id:"unset-cast",children:"(unset) cast"}),"\n",(0,a.jsx)(n.p,{children:"Casting any expression to this type will always result in NULL, and so this superfluous casting type has now been deprecated."}),"\n",(0,a.jsx)(n.h3,{id:"parse_str-without-a-second-argument",children:"parse_str() without a second argument"}),"\n",(0,a.jsxs)(n.p,{children:["Without the second argument to ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/function.parse-str.php",children:"parse_str()"}),", the query string parameters would populate the local symbol table. Given the security implications of this, using parse_str() without a second argument ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/migration72.deprecated.php#migration72.deprecated.parse_str-no-second-arg",children:"has now been deprecated"}),". The function should always be used with two arguments, as the second argument causes the query string to be parsed into an array:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"parse_str ( string $encoded_string [, array &$result ] ) : void\n"})}),"\n",(0,a.jsx)(n.h3,{id:"gmp_random-function",children:"gmp_random() function"}),"\n",(0,a.jsxs)(n.p,{children:["This ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/function.gmp-random.php",children:"function generates a random number"})," based upon a range that is calculated by an unexposed, platform-specific limb size. Because of this, ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/migration72.deprecated.php#migration72.deprecated.gmp_random-function",children:"the function has now been deprecated"}),". The preferred way of generating a random number using the GMP extension is by ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/function.gmp-random-bits.php",children:"gmp_random_bits()"})," and ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/function.gmp-random-range.php",children:"gmp_random_range()"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"gmp_random ([ int $limiter = 20 ] ) : GMP\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"gmp_random_range ( GMP $min , GMP $max ) : GMP\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"gmp_random_bits ( int $bits ) : GMP\n"})}),"\n",(0,a.jsx)(n.h3,{id:"each-function",children:"each() function"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/function.each.php",children:"This function"})," is far slower at iteration than a normal ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/control-structures.foreach.php",children:"foreach()"}),", and causes implementation issues for some language changes. It has therefore ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/migration72.deprecated.php#migration72.deprecated.each-function",children:"been deprecated"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"each ( array &$array ) : array\n"})}),"\n",(0,a.jsx)(n.h3,{id:"assert-with-a-string-argument",children:"assert() with a string argument"}),"\n",(0,a.jsxs)(n.p,{children:["Using ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/function.assert.php",children:"assert()"})," with a string argument required the string to be ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/function.eval.php",children:"eval()"}),"'ed. Given the potential for remote code execution, using assert() with a string argument has now been ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/migration72.deprecated.php#migration72.deprecated.errcontext-arg-of-error-handlers",children:"deprecated in favour of using boolean expressions"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"assert ( mixed $assertion [, Throwable $exception ] ) : bool\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"eval ( string $code ) : mixed\n"})}),"\n",(0,a.jsx)(n.h3,{id:"errcontext-argument-of-error-handlers",children:"$errcontext argument of error handlers"}),"\n",(0,a.jsxs)(n.p,{children:["The $errcontext argument contains all local variables of the error site. Given its rare usage, and the problems it causes with internal optimisations, ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/migration72.deprecated.php#migration72.deprecated.errcontext-arg-of-error-handlers",children:"it has now been deprecated"}),"."]}),"\n",(0,a.jsx)(n.h3,{id:"read_exif_data-function",children:"read_exif_data() function"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/function.read-exif-data.php",children:"read_exif_data()"})," alias ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/migration72.deprecated.php#migration72.deprecated.read_exif_data-function",children:"has been deprecated"}),". The ",(0,a.jsx)(n.a,{href:"https://www.php.net/manual/en/function.exif-read-data.php",children:"exif_read_data()"})," function should be used instead."]}),"\n",(0,a.jsx)(n.h2,{id:"re-deploy-magento",children:"Re-Deploy Magento"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"php7.3 bin/magento setup:upgrade\r\nphp7.3 bin/magento setup:di:compile\r\nphp7.3 bin/magento setup:static-content:deploy -f\r\nchown -R www-data:www-data .\n"})}),"\n",(0,a.jsx)(n.h2,{id:"purge-old-php-version",children:"Purge Old PHP Version"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"apt purge php7.2 php7.2-common php7.2-cli\n"})})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},77536:(e,n,r)=>{r.d(n,{A:()=>a});const a=r.p+"assets/images/photo-kt456d_645dhfh6dgjkhg4_d-ce3d6a58152b19d5932335a19bc20b03.jpg"},28453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>o});var a=r(296540);const t={},i=a.createContext(t);function s(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);