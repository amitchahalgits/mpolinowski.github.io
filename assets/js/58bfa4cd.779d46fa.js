"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[81421],{843550:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>u,frontMatter:()=>o,metadata:()=>a,toc:()=>l});var s=r(785893),i=r(603905);const o={sidebar_position:5080,slug:"2022-01-23",title:"Installing a Discourse Forum on Debian Bullseye with Docker",authors:"mpolinowski",tags:["LINUX"]},t=void 0,a={id:"DevOps/Provisioning/2022-01-23--installing-discourse-docker/index",title:"Installing a Discourse Forum on Debian Bullseye with Docker",description:"Shenzhen, China",source:"@site/docs/DevOps/Provisioning/2022-01-23--installing-discourse-docker/index.md",sourceDirName:"DevOps/Provisioning/2022-01-23--installing-discourse-docker",slug:"/DevOps/Provisioning/2022-01-23--installing-discourse-docker/2022-01-23",permalink:"/docs/DevOps/Provisioning/2022-01-23--installing-discourse-docker/2022-01-23",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Provisioning/2022-01-23--installing-discourse-docker/index.md",tags:[{label:"LINUX",permalink:"/docs/tags/linux"}],version:"current",sidebarPosition:5080,frontMatter:{sidebar_position:5080,slug:"2022-01-23",title:"Installing a Discourse Forum on Debian Bullseye with Docker",authors:"mpolinowski",tags:["LINUX"]},sidebar:"tutorialSidebar",previous:{title:"Getting to know the BIND9 DNS Server with Docker",permalink:"/docs/DevOps/Provisioning/2022-01-24--getting-to-know-bind9-docker/2022-01-24"},next:{title:"Matrix Secure Messaging",permalink:"/docs/DevOps/Provisioning/2021-10-25--matrix-secure-messaging/2021-10-25"}},c={},l=[{value:"Install Discourse",id:"install-discourse",level:2},{value:"Setting Up an SMTP EMail Server",id:"setting-up-an-smtp-email-server",level:2},{value:"Edit Discourse Configuration",id:"edit-discourse-configuration",level:2},{value:"Start Discourse",id:"start-discourse",level:2},{value:"Register New Account and Become Admin",id:"register-new-account-and-become-admin",level:3}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.ah)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Shenzhen, China",src:r(967629).Z+"",width:"1500",height:"671"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#install-discourse",children:"Install Discourse"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#setting-up-an-smtp-email-server",children:"Setting Up an SMTP EMail Server"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#edit-discourse-configuration",children:"Edit Discourse Configuration"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"#start-discourse",children:"Start Discourse"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#register-new-account-and-become-admin",children:"Register New Account and Become Admin"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"install-discourse",children:"Install Discourse"}),"\n",(0,s.jsxs)(n.p,{children:["Clone the ",(0,s.jsx)(n.a,{href:"https://github.com/discourse/discourse_docker",children:"Official Discourse Docker Image"})," into ",(0,s.jsx)(n.code,{children:"/opt/discourse"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mkdir /opt/discourse\r\ngit clone https://github.com/discourse/discourse_docker.git /opt/discourse\r\ncd /opt/discourse\n"})}),"\n",(0,s.jsx)(n.h2,{id:"setting-up-an-smtp-email-server",children:"Setting Up an SMTP EMail Server"}),"\n",(0,s.jsxs)(n.p,{children:["Already have a mail server? Great. Use your existing mail server credentials. (Free email services like Gmail/Outlook/Yahoo do not support transactional emails.) No existing mail server? Check out the ",(0,s.jsx)(n.a,{href:"https://meta.discourse.org/t/troubleshooting-email-on-a-new-discourse-install/16326",children:"Email Troubleshooting Guide"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Also make sure that you have a valid Domain pointing to your Discourse server"})}),"\n",(0,s.jsx)(n.h2,{id:"edit-discourse-configuration",children:"Edit Discourse Configuration"}),"\n",(0,s.jsx)(n.p,{children:"Launch the setup tool at"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"./discourse-setup\n"})}),"\n",(0,s.jsx)(n.p,{children:"Answer the following questions when prompted:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yml",children:"Hostname for your Discourse? [discourse.example.com]: \r\nEmail address for admin account(s)? [me@example.com,you@example.com]: \r\nSMTP server address? [smtp.example.com]: \r\nSMTP port? [587]: \r\nSMTP user name? [user@example.com]: \r\nSMTP password? [pa$$word]: \r\nnotification email address? [noreply@forum.instar.com]:\r\nLet's Encrypt account email? (ENTER to skip) [me@example.com]: \n"})}),"\n",(0,s.jsxs)(n.p,{children:["You'll get the SMTP details from your email setup, be sure to ",(0,s.jsx)(n.a,{href:"#setting-up-an-smtp-email-server",children:"complete that section"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["This will generate an app.yml configuration file on your behalf, and then kicks off bootstrap. ",(0,s.jsx)(n.strong,{children:"Bootstrapping takes between 2-8 minutes"})," to set up your Discourse. If you need to change these settings after bootstrapping, you can run ",(0,s.jsx)(n.code,{children:"/opt/discourse/discourse-setup"})," again (it will re-use your previous values from the file) or edit ",(0,s.jsx)(n.code,{children:"/opt/discourse/containers/app.yml"})," manually with nano and then ",(0,s.jsx)(n.code,{children:"/opt/discourse/launcher rebuild app"}),", otherwise your changes will not take effect."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"ERROR"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"Updates successful. Rebuilding in 5 seconds.\r\nBuilding app\r\nx86_64 arch detected.\r\nEnsuring launcher is up to date\r\nFetching origin\r\nLauncher is up-to-date\r\n(<unknown>): did not find expected key while parsing a block mapping at line 40 column 3 -e LANG=en_US.UTF-8\r\nYAML syntax error. Please check your containers/*.yml config files.\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsx)(n.p,{children:"Make sure not to put single quotes around your admin email accounts!"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Wrong way:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yml",children:"Email address for admin account(s)? [me@example.com,you@example.com]: 'me@example.com,you@example.com'\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Go to ",(0,s.jsx)(n.code,{children:"/opt/discourse/containers/app.yml"})," and remove the double single-quotes around your emails and re-run ",(0,s.jsx)(n.code,{children:"./discourse-setup"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"start-discourse",children:"Start Discourse"}),"\n",(0,s.jsxs)(n.p,{children:["Once bootstrapping is complete, your Discourse should be accessible in your web browser via the domain name ",(0,s.jsx)(n.code,{children:"discourse.example.com"})," you entered earlier."]}),"\n",(0,s.jsx)(n.h3,{id:"register-new-account-and-become-admin",children:"Register New Account and Become Admin"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Installing a Discourse Forum",src:r(77364).Z+"",width:"1145",height:"438"})})]})}function u(e={}){const{wrapper:n}={...(0,i.ah)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},603905:(e,n,r)=>{r.d(n,{ah:()=>l});var s=r(667294);function i(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function o(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,s)}return r}function t(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?o(Object(r),!0).forEach((function(n){i(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function a(e,n){if(null==e)return{};var r,s,i=function(e,n){if(null==e)return{};var r,s,i={},o=Object.keys(e);for(s=0;s<o.length;s++)r=o[s],n.indexOf(r)>=0||(i[r]=e[r]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)r=o[s],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var c=s.createContext({}),l=function(e){var n=s.useContext(c),r=n;return e&&(r="function"==typeof e?e(n):t(t({},n),e)),r},d={inlineCode:"code",wrapper:function(e){var n=e.children;return s.createElement(s.Fragment,{},n)}},u=s.forwardRef((function(e,n){var r=e.components,i=e.mdxType,o=e.originalType,c=e.parentName,u=a(e,["components","mdxType","originalType","parentName"]),p=l(r),h=i,m=p["".concat(c,".").concat(h)]||p[h]||d[h]||o;return r?s.createElement(m,t(t({ref:n},u),{},{components:r})):s.createElement(m,t({ref:n},u))}));u.displayName="MDXCreateElement"},77364:(e,n,r)=>{r.d(n,{Z:()=>s});const s=r.p+"assets/images/Discourse_Forum_01-c706d4c9c608b8d9344607b5cfaeb415.png"},967629:(e,n,r)=>{r.d(n,{Z:()=>s});const s=r.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-bac99ee9472bf0354e396ff811a46d92.jpg"}}]);