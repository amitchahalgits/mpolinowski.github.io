"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[38443],{203386:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>o,toc:()=>h});var r=t(785893),s=t(603905);const a={sidebar_position:9080,slug:"2019-01-11",title:"Debian SSH Port and Hostname",authors:"mpolinowski",tags:["LINUX"]},i=void 0,o={id:"DevOps/Linux/2019-01-11--debian-change-ssh-port-hostname/index",title:"Debian SSH Port and Hostname",description:"Battambang, Cambodia",source:"@site/docs/DevOps/Linux/2019-01-11--debian-change-ssh-port-hostname/index.md",sourceDirName:"DevOps/Linux/2019-01-11--debian-change-ssh-port-hostname",slug:"/DevOps/Linux/2019-01-11--debian-change-ssh-port-hostname/2019-01-11",permalink:"/docs/DevOps/Linux/2019-01-11--debian-change-ssh-port-hostname/2019-01-11",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Linux/2019-01-11--debian-change-ssh-port-hostname/index.md",tags:[{label:"LINUX",permalink:"/docs/tags/linux"}],version:"current",sidebarPosition:9080,frontMatter:{sidebar_position:9080,slug:"2019-01-11",title:"Debian SSH Port and Hostname",authors:"mpolinowski",tags:["LINUX"]},sidebar:"tutorialSidebar",previous:{title:"Ubuntu Server Root SSH Remote Access",permalink:"/docs/DevOps/Linux/2019-01-11--root-access-ubuntu-server/2019-01-11"},next:{title:"Red Hat Certified Engineer (RHCE) Exam",permalink:"/docs/DevOps/Linux/2018-10-27--red-hat-certified-engineer-rhce/2018-10-27"}},c={},h=[{value:"Changing the SSH Port",id:"changing-the-ssh-port",level:2},{value:"Adjusting Firewall",id:"adjusting-firewall",level:3},{value:"Configuring SSH",id:"configuring-ssh",level:3},{value:"Change the Hostname",id:"change-the-hostname",level:2}];function l(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.ah)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Battambang, Cambodia",src:t(717603).Z+"",width:"1500",height:"640"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#changing-the-ssh-port",children:"Changing the SSH Port"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#adjusting-firewall",children:"Adjusting Firewall"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#configuring-ssh",children:"Configuring SSH"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#change-the-hostname",children:"Change the Hostname"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"changing-the-ssh-port",children:"Changing the SSH Port"}),"\n",(0,r.jsx)(n.h3,{id:"adjusting-firewall",children:"Adjusting Firewall"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo firewall-cmd --permanent --zone=public --add-port=34567/tcp\r\nsudo firewall-cmd --reload\n"})}),"\n",(0,r.jsx)(n.h3,{id:"configuring-ssh",children:"Configuring SSH"}),"\n",(0,r.jsxs)(n.p,{children:["Open the SSH configuration file ",(0,r.jsx)(n.code,{children:"/etc/ssh/sshd_config"})," with your text editor:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo vim /etc/ssh/sshd_config\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Search for the line starting with Port ",(0,r.jsx)(n.code,{children:"22"}),". In most cases, this line starts with a ",(0,r.jsx)(n.code,{children:"#"})," character. Remove the hash and enter the new SSH port number ",(0,r.jsx)(n.code,{children:"23456"}),". Once done, save the file and restart the SSH service to apply the changes:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo systemctl restart sshd\n"})}),"\n",(0,r.jsxs)(n.p,{children:["To verify that SSH daemon is listening on the new port ",(0,r.jsx)(n.code,{children:"23456"}),", type:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"netstat -ntlp\r\n\r\nActive Internet connections (only servers)\r\nProto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    \r\ntcp        0      0 0.0.0.0:23456           0.0.0.0:*               LISTEN      12271/sshd\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Now test that you are able to connect to via the new port ",(0,r.jsx)(n.strong,{children:"BEFORE"})," exiting your current session ",(0,r.jsx)(n.code,{children:":)"})," :"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ssh -p 23456 username@remote_host_or_ip\n"})}),"\n",(0,r.jsx)(n.h2,{id:"change-the-hostname",children:"Change the Hostname"}),"\n",(0,r.jsxs)(n.p,{children:["To set the hostname to ",(0,r.jsx)(n.code,{children:"myserver"}),", run:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"hostnamectl set-hostname myserver\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Edit the file ",(0,r.jsx)(n.code,{children:"/etc/hosts"})," and update entries still using the old hostname:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"nano /etc/hosts\n"})}),"\n",(0,r.jsx)(n.p,{children:"Verify it by running:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"hostnamectl\r\n\r\n   Static hostname: myserver\r\n  Operating System: Debian GNU/Linux 10 (buster)\r\n            Kernel: Linux 4.19.0-10-amd64\r\n      Architecture: x86-64\n"})})]})}function d(e={}){const{wrapper:n}={...(0,s.ah)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},603905:(e,n,t)=>{t.d(n,{ah:()=>h});var r=t(667294);function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,r,s=function(e,n){if(null==e)return{};var t,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(s[t]=e[t]);return s}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}var c=r.createContext({}),h=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},l={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,s=e.mdxType,a=e.originalType,c=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),u=h(t),p=s,g=u["".concat(c,".").concat(p)]||u[p]||l[p]||a;return t?r.createElement(g,i(i({ref:n},d),{},{components:t})):r.createElement(g,i({ref:n},d))}));d.displayName="MDXCreateElement"},717603:(e,n,t)=>{t.d(n,{Z:()=>r});const r=t.p+"assets/images/photo-19196703263_69f9f0df5f_o-14170a50fbe2ab4a9cbd78f18092a158.jpg"}}]);