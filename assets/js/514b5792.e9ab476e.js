"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[62534],{715241:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>h,contentTitle:()=>t,default:()=>l,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var a=r(474848),n=r(28453);const o={sidebar_position:6050,slug:"2021-09-14",title:"PostgreSQL 14 Database Refresher :: Working with GraphQL",authors:"mpolinowski",tags:["SQL","GraphQL"]},t=void 0,i={id:"DevOps/Provisioning/2021-09-14--postgres-refresher-hasura/index",title:"PostgreSQL 14 Database Refresher :: Working with GraphQL",description:"Shenzhen, China",source:"@site/docs/DevOps/Provisioning/2021-09-14--postgres-refresher-hasura/index.md",sourceDirName:"DevOps/Provisioning/2021-09-14--postgres-refresher-hasura",slug:"/DevOps/Provisioning/2021-09-14--postgres-refresher-hasura/2021-09-14",permalink:"/docs/DevOps/Provisioning/2021-09-14--postgres-refresher-hasura/2021-09-14",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Provisioning/2021-09-14--postgres-refresher-hasura/index.md",tags:[{label:"SQL",permalink:"/docs/tags/sql"},{label:"GraphQL",permalink:"/docs/tags/graph-ql"}],version:"current",sidebarPosition:6050,frontMatter:{sidebar_position:6050,slug:"2021-09-14",title:"PostgreSQL 14 Database Refresher :: Working with GraphQL",authors:"mpolinowski",tags:["SQL","GraphQL"]},sidebar:"tutorialSidebar",previous:{title:"PostgreSQL 14 Database Refresher :: Working with JSON & Node.js",permalink:"/docs/DevOps/Provisioning/2021-09-14--postgres-refresher-node-json/2021-09-14"},next:{title:"PostgreSQL 14 Database Refresher :: Introduction Part II",permalink:"/docs/DevOps/Provisioning/2021-09-13--postgres-refresher-part-ii/2021-09-13"}},h={},d=[{value:"Hasura GraphQL",id:"hasura-graphql",level:2},{value:"docker-compose",id:"docker-compose",level:3},{value:"docker",id:"docker",level:3}];function c(e){const s={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,n.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"Shenzhen, China",src:r(45015).A+"",width:"1500",height:"392"})}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.a,{href:"#hasura-graphql",children:"Hasura GraphQL"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"#docker-compose",children:"docker-compose"})}),"\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"#docker",children:"docker"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(s.h2,{id:"hasura-graphql",children:"Hasura GraphQL"}),"\n",(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.a,{href:"https://hasura.io/docs/latest/graphql/core/index.html",children:"Hasura GraphQL"})," engine makes your data instantly accessible over a real-time GraphQL API, so you can build and ship modern apps and APIs faster. Hasura connects to your databases, REST servers, GraphQL servers, and third party APIs to provide a unified realtime GraphQL API across all your data sources."]}),"\n",(0,a.jsx)(s.p,{children:"This guide will help you get the Hasura GraphQL engine and a Postgres database to store its metadata running as Docker containers using Docker Compose. This is the easiest way to set up Hasura GraphQL engine on your local environment."}),"\n",(0,a.jsx)(s.h3,{id:"docker-compose",children:"docker-compose"}),"\n",(0,a.jsx)(s.p,{children:"This sets up both Postgres v12 and Hasura GraphQL:"}),"\n",(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.a,{href:"https://github.com/hasura/graphql-engine/tree/stable/install-manifests",children:"hasura/graphql-engine/install-manifests"})," repo contains all installation manifests required to deploy Hasura anywhere. Get the docker compose file from there:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"curl https://raw.githubusercontent.com/hasura/graphql-engine/stable/install-manifests/docker-compose/docker-compose.yaml -o docker-compose.yml\n"})}),"\n",(0,a.jsx)(s.p,{children:"The following command will run Hasura GraphQL engine along with a Postgres database to store its metadata."}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"docker-compose up -d\n"})}),"\n",(0,a.jsx)(s.h3,{id:"docker",children:"docker"}),"\n",(0,a.jsxs)(s.p,{children:["This works without issues with my Postgres v14 docker installation on host ",(0,a.jsx)(s.code,{children:"192.168.2.111"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"docker run -d -p 8080:8080 \\\r\n  -e HASURA_GRAPHQL_DATABASE_URL=postgresql://postgres:secretpassword@192.168.2.111:5432/message_boards \\\r\n  -e HASURA_GRAPHQL_ENABLE_CONSOLE=true --name=hasura --rm \\\r\n  hasura/graphql-engine:latest\n"})}),"\n",(0,a.jsxs)(s.p,{children:["After the container is started visit the IP of your docker host on port ",(0,a.jsx)(s.code,{children:"8080"}),". Go to data and track all your data:"]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"Postgres Hasura GraphQL",src:r(713425).A+"",width:"1007",height:"482"})}),"\n",(0,a.jsx)(s.p,{children:"I can now query the data from my PG database using Graph queries in GraphiQL:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-json",children:"{\r\n  boards(where: { board_id: { _eq: 39 } }) {\r\n    board_id\r\n    board_name\r\n    board_description\r\n  }\r\n  comments(where: { board_id: { _eq: 39 } }) {\r\n    board_id\r\n    comment\r\n    comment_id\r\n    time\r\n    user_id\r\n  }\r\n}\n"})}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"Postgres Hasura GraphQL",src:r(292314).A+"",width:"1237",height:"971"})})]})}function l(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},713425:(e,s,r)=>{r.d(s,{A:()=>a});const a=r.p+"assets/images/Postgres_Hasura_GraphQL_01-391eccb4aaea408a3f930fb53ab7bb89.png"},292314:(e,s,r)=>{r.d(s,{A:()=>a});const a=r.p+"assets/images/Postgres_Hasura_GraphQL_02-a197c5f90e1b212f21d3016622168206.png"},45015:(e,s,r)=>{r.d(s,{A:()=>a});const a=r.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-71f2b7209f58ecc12682d4095513b1b8.jpg"},28453:(e,s,r)=>{r.d(s,{R:()=>t,x:()=>i});var a=r(296540);const n={},o=a.createContext(n);function t(e){const s=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:t(e.components),a.createElement(o.Provider,{value:s},e.children)}}}]);