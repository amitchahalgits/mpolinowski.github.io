"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[14159],{519045:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>l});var o=r(785893),s=r(603905);const t={sidebar_position:9070,slug:"2020-05-04",title:"Neo4j Corona Tracing",authors:"mpolinowski",tags:["Databases","Neo4j"]},a=void 0,i={id:"Development/Graphs/2020-05-04--neo4j-corona-tracing/index",title:"Neo4j Corona Tracing",description:"Shenzhen, China",source:"@site/docs/Development/Graphs/2020-05-04--neo4j-corona-tracing/index.mdx",sourceDirName:"Development/Graphs/2020-05-04--neo4j-corona-tracing",slug:"/Development/Graphs/2020-05-04--neo4j-corona-tracing/2020-05-04",permalink:"/docs/Development/Graphs/2020-05-04--neo4j-corona-tracing/2020-05-04",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Development/Graphs/2020-05-04--neo4j-corona-tracing/index.mdx",tags:[{label:"Databases",permalink:"/docs/tags/databases"},{label:"Neo4j",permalink:"/docs/tags/neo-4-j"}],version:"current",sidebarPosition:9070,frontMatter:{sidebar_position:9070,slug:"2020-05-04",title:"Neo4j Corona Tracing",authors:"mpolinowski",tags:["Databases","Neo4j"]},sidebar:"tutorialSidebar",previous:{title:"GraphQL Queries and Mutations",permalink:"/docs/Development/Graphs/2020-05-05--graphql-queries-and-mutations/2020-05-05"},next:{title:"Neo4j Cypher Cheat Sheet",permalink:"/docs/Development/Graphs/2020-05-03--neo4j-cheat-sheet/2020-05-03"}},c={},l=[{value:"Installing Neo4j Desktop",id:"installing-neo4j-desktop",level:2},{value:"Creating your Database",id:"creating-your-database",level:3},{value:"Importing Data",id:"importing-data",level:3},{value:"Working with your Data",id:"working-with-your-data",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.ah)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Shenzhen, China",src:r(998625).Z+"",width:"1500",height:"585"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"#installing-neo4j-desktop",children:"Installing Neo4j Desktop"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#creating-your-database",children:"Creating your Database"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#importing-data",children:"Importing Data"})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#working-with-your-data",children:"Working with your Data"})}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"installing-neo4j-desktop",children:"Installing Neo4j Desktop"}),"\n",(0,o.jsxs)(n.p,{children:["Download the latest version of the ",(0,o.jsx)(n.a,{href:"https://neo4j.com/download-thanks-desktop/",children:"Neo4j Desktop"})," AppImage and make it executable:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"chmod a+x neo4j-desktop-offline-1.2.9-x86_64.AppImage\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Then run it from your Terminal ",(0,o.jsx)(n.code,{children:"./neo4j-desktop-offline-1.2.9-x86_64.AppImage"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"creating-your-database",children:"Creating your Database"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Click on ",(0,o.jsx)(n.strong,{children:"New Project"}),", create the database and click on ",(0,o.jsx)(n.strong,{children:"Manage"})," to set it up."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Neo4j Desktop Application",src:r(156790).Z+"",width:"1243",height:"1080"})}),"\n",(0,o.jsxs)(n.ol,{start:"2",children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Click on ",(0,o.jsx)(n.strong,{children:"Open Folder"}),", enter the ",(0,o.jsx)(n.strong,{children:"import"})," directory."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Copy your ",(0,o.jsx)(n.a,{href:"https://gist.github.com/mpolinowski/a4e4844b2fd52394c7161e8a1a5f1937",children:"Corona Tracing Data"})," as ",(0,o.jsx)(n.code,{children:".csv"})," file into the directory."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Neo4j Desktop Application",src:r(256388).Z+"",width:"1112",height:"970"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Alternative"}),": If you are ",(0,o.jsx)(n.a,{href:"https://mpolinowski.github.io/getting-to-know-neo-4-j",children:"running Neo4j inside a Docker Container"})," copy this file to ",(0,o.jsx)(n.code,{children:"/opt/neo4j/import"})," and use the web client to run the import."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Neo4j Desktop Application",src:r(909541).Z+"",width:"1190",height:"638"})}),"\n",(0,o.jsxs)(n.ol,{start:"4",children:["\n",(0,o.jsxs)(n.li,{children:["Now start the database and open the ",(0,o.jsx)(n.strong,{children:"Neo4j Explorer"}),"."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Neo4j Desktop Application",src:r(147182).Z+"",width:"1243",height:"1080"})}),"\n",(0,o.jsx)(n.h3,{id:"importing-data",children:"Importing Data"}),"\n",(0,o.jsx)(n.p,{children:"Run the following Cypher query to add your data to your database:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"LOAD CSV WITH HEADERS FROM 'file:///coronaTracing.csv' AS line\r\nWITH line\r\nMERGE (Infected:Person{name:line.Infected, Addr:line.InfectedAddress})\r\nMERGE (Contact:Person{name:line.Contact, Addr:line.ContactAddress})\r\nMERGE (Infected)-[info:Info{\r\n`Contact Info`:line.ContactInfo, \r\n`Relationship`:line.`Relationship`, \r\nLocation: CASE WHEN line.Geography IS NOT NULL THEN line.Geography ELSE '' END\r\n}]->(Contact)\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Neo4j Desktop Application",src:r(935819).Z+"",width:"1142",height:"921"})}),"\n",(0,o.jsx)(n.h2,{id:"working-with-your-data",children:"Working with your Data"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["How many potential infections (query for relationship ",(0,o.jsx)(n.code,{children:"Info"})," = event with the potential of an infection) ?"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"MATCH (person:Person)-[rel:Info]->(:Person)\r\nRETURN COUNT (rel)\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"2",children:["\n",(0,o.jsxs)(n.li,{children:["How many persons have been traced from ",(0,o.jsx)(n.code,{children:"Cordon M"})," ?"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"MATCH (person:Person)\r\nWHERE person.Addr = 'CordonM'\r\nRETURN person\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"3",children:["\n",(0,o.jsxs)(n.li,{children:["How many infected persons has ",(0,o.jsx)(n.code,{children:"Person A"})," been in contact with ?"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"MATCH (carrier)-[r:Info]->(person:Person{name:'PersonA'})\r\nRETURN carrier, person, r\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"4",children:["\n",(0,o.jsxs)(n.li,{children:["How many were potentially infected by ",(0,o.jsx)(n.code,{children:"Person J"})," ?"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"MATCH (carrier:Person{name:'PersonJ'})-[r:Info]->(person:Person)\r\nRETURN COUNT (person) AS Infected\n"})}),"\n",(0,o.jsx)(n.p,{children:"4.1. Omit potential double-count:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"MATCH (carrier:Person{name:'PersonJ'})-[r:Info]->(person:Person)\r\nRETURN COUNT (DISTINCT person) AS Infected\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"5",children:["\n",(0,o.jsxs)(n.li,{children:["Select all and order by number of potential infection event - find ",(0,o.jsx)(n.strong,{children:"Super Spreader"}),":"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"MATCH (carrier:Person)-[rel:Info]->(person:Person)\r\nRETURN carrier, COUNT(carrier) AS Infected\r\nORDER BY Infected DESC\r\nLIMIT 10\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsxs)(n.em,{children:["Switch results from ",(0,o.jsx)(n.code,{children:"Graph"})," to ",(0,o.jsx)(n.code,{children:"Table"})," to see the persons who are most likely to be super spreader"]})}),"\n",(0,o.jsxs)(n.ol,{start:"6",children:["\n",(0,o.jsx)(n.li,{children:"Select list of persons with highest number of potential infections:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"MATCH (n)-[r:Info]->(m)\r\nWITH n, COUNT((n)-[]->()) as num\r\nORDER BY num DESC\r\nLIMIT 10\r\nMATCH (n)-[i]->(b)\r\nRETURN n,i,b\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"7",children:["\n",(0,o.jsx)(n.li,{children:"Show the person that exposed the most:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"MATCH (carrier:Person)-[rel:Info]->(person:Person)\r\nRETURN person, COUNT(*) AS Infections\r\nORDER BY Infections DESC\r\nLIMIT 1\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"8",children:["\n",(0,o.jsx)(n.li,{children:"What carriers had contact with the person who was exposed the most ?"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"MATCH (carrier:Person)-[rel:Info]->(person:Person)\r\nWITH person, COUNT(*) AS Infections\r\nORDER BY Infections DESC\r\nLIMIT 1\r\nMATCH (person:Person)<-[r]-(p)\r\nRETURN person, r, p\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"9",children:["\n",(0,o.jsxs)(n.li,{children:["Who in ",(0,o.jsx)(n.code,{children:"Cordon A"})," did not infect anyone ?"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"MATCH (a)\r\nWHERE NOT(a:Person)-[:Info]->()\r\nAND a.Addr = 'CordonA'\r\nRETURN a\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"10",children:["\n",(0,o.jsx)(n.li,{children:"Select carrier that infected the most of their own cordon:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"MATCH (carrier:Person)-[r]->(person:Person)\r\nWHERE carrier.Addr = person.Addr\r\nWITH carrier, COUNT(*) AS Infections\r\nORDER BY Infections DESC\r\nLIMIT 2\r\nMATCH (p:Person)<-[r]-(carrier)\r\nRETURN p,r,carrier\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"11",children:["\n",(0,o.jsxs)(n.li,{children:["Show the path of the infection between ",(0,o.jsx)(n.code,{children:"Person K"})," and ",(0,o.jsx)(n.code,{children:"Person L"})]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"MATCH path=(p1:Person{name:'PersonK'})-[*]->(p2:Person{name:'PersonL'})\r\nRETURN path\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.ah)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},603905:(e,n,r)=>{r.d(n,{ah:()=>l});var o=r(667294);function s(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function t(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function a(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(n){s(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function i(e,n){if(null==e)return{};var r,o,s=function(e,n){if(null==e)return{};var r,o,s={},t=Object.keys(e);for(o=0;o<t.length;o++)r=t[o],n.indexOf(r)>=0||(s[r]=e[r]);return s}(e,n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(o=0;o<t.length;o++)r=t[o],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var c=o.createContext({}),l=function(e){var n=o.useContext(c),r=n;return e&&(r="function"==typeof e?e(n):a(a({},n),e)),r},d={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},h=o.forwardRef((function(e,n){var r=e.components,s=e.mdxType,t=e.originalType,c=e.parentName,h=i(e,["components","mdxType","originalType","parentName"]),p=l(r),j=s,g=p["".concat(c,".").concat(j)]||p[j]||d[j]||t;return r?o.createElement(g,a(a({ref:n},h),{},{components:r})):o.createElement(g,a({ref:n},h))}));h.displayName="MDXCreateElement"},156790:(e,n,r)=>{r.d(n,{Z:()=>o});const o=r.p+"assets/images/Neo4j_Corona_Tracing_01-79aae8564f75a2616d4d2bb73ddb8cfe.png"},256388:(e,n,r)=>{r.d(n,{Z:()=>o});const o=r.p+"assets/images/Neo4j_Corona_Tracing_02-2c261ef179eb058debd03802e31b9b77.png"},147182:(e,n,r)=>{r.d(n,{Z:()=>o});const o=r.p+"assets/images/Neo4j_Corona_Tracing_03-1530146f0e54d39eeaab936f98329bc5.png"},909541:(e,n,r)=>{r.d(n,{Z:()=>o});const o=r.p+"assets/images/Neo4j_Corona_Tracing_04-26552a84e5c895556cc8ed7e415dcf72.png"},935819:(e,n,r)=>{r.d(n,{Z:()=>o});const o=r.p+"assets/images/Neo4j_Corona_Tracing_05-1c757541c2021a9be1c4344e170af57c.png"},998625:(e,n,r)=>{r.d(n,{Z:()=>o});const o=r.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-bf32e31d830e30e5cb1eea79bad7f27d.jpg"}}]);