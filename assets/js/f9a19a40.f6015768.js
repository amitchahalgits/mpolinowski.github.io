"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[84129],{415328:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>i,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>l});var a=s(785893),n=s(603905);const t={sidebar_position:9040,slug:"2019-09-08",title:"Elasticsearch 7 with Docker Compose",authors:"mpolinowski",tags:["Docker","Databases","Elasticsearch"]},c=void 0,o={id:"DevOps/Elasticsearch/2019-09-08--elasticsearch_7-5_docker/index",title:"Elasticsearch 7 with Docker Compose",description:"ShenZhen, China",source:"@site/docs/DevOps/Elasticsearch/2019-09-08--elasticsearch_7-5_docker/index.mdx",sourceDirName:"DevOps/Elasticsearch/2019-09-08--elasticsearch_7-5_docker",slug:"/DevOps/Elasticsearch/2019-09-08--elasticsearch_7-5_docker/2019-09-08",permalink:"/docs/DevOps/Elasticsearch/2019-09-08--elasticsearch_7-5_docker/2019-09-08",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Elasticsearch/2019-09-08--elasticsearch_7-5_docker/index.mdx",tags:[{label:"Docker",permalink:"/docs/tags/docker"},{label:"Databases",permalink:"/docs/tags/databases"},{label:"Elasticsearch",permalink:"/docs/tags/elasticsearch"}],version:"current",sidebarPosition:9040,frontMatter:{sidebar_position:9040,slug:"2019-09-08",title:"Elasticsearch 7 with Docker Compose",authors:"mpolinowski",tags:["Docker","Databases","Elasticsearch"]},sidebar:"tutorialSidebar",previous:{title:"Elasticsearch in Docker",permalink:"/docs/DevOps/Elasticsearch/2020-06-01--elasticsearch-docker/2020-06-01"},next:{title:"Securing Elasticsearch with ReadOnlyREST",permalink:"/docs/DevOps/Elasticsearch/2018-01-01--securing-elasticsearch-readonlyrest/2018-01-01"}},i={},l=[];function d(e){const r={code:"code",img:"img",p:"p",pre:"pre",strong:"strong",...(0,n.ah)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.p,{children:(0,a.jsx)(r.img,{alt:"ShenZhen, China",src:s(755064).Z+"",width:"1500",height:"532"})}),"\n",(0,a.jsxs)(r.p,{children:["Let's run a ",(0,a.jsx)(r.strong,{children:"Elasticsearch 7.5"})," as a single node cluster using Docker Compose with XPack disabled. To run the Elasticsearch 7 Docker image as a single node, you have to set ",(0,a.jsx)(r.code,{children:"discovery.type"})," to ",(0,a.jsx)(r.code,{children:"single-node"}),". At startup, the bootstrap checks are bypassed. The single node will elect itself as the master node and will not join a cluster with any other node."]}),"\n",(0,a.jsx)(r.p,{children:"A complete docker-compose.yml example to run a single node Elasticsearch 7 Cluster including Kibana:"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-yaml",children:"version: '3.7'\r\n\r\nservices:\r\n\r\n  # Elasticsearch Docker Images: https://www.docker.elastic.co/\r\n  elasticsearch:\r\n    image: docker.elastic.co/elasticsearch/elasticsearch:7.5.0\r\n    container_name: elasticsearch\r\n    environment:\r\n      - xpack.security.enabled=false\r\n      - discovery.type=single-node\r\n    ulimits:\r\n      memlock:\r\n        soft: -1\r\n        hard: -1\r\n      nofile:\r\n        soft: 65536\r\n        hard: 65536\r\n    cap_add:\r\n      - IPC_LOCK\r\n    volumes:\r\n      - elasticsearch-data:/usr/share/elasticsearch/data\r\n    ports:\r\n      - 9200:9200\r\n      - 9300:9300\r\n\r\n  kibana:\r\n    container_name: kibana\r\n    image: docker.elastic.co/kibana/kibana:7.5.0\r\n    environment:\r\n      - ELASTICSEARCH_HOSTS=http://elasticsearch:9200\r\n    ports:\r\n      - 5601:5601\r\n    depends_on:\r\n      - elasticsearch\r\n\r\nvolumes:\r\n  elasticsearch-data:\r\n    driver: local\n"})}),"\n",(0,a.jsx)(r.p,{children:"Start Elasticsearch and Kibana using Docker Compose:"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"docker-compose up -d\n"})}),"\n",(0,a.jsxs)(r.p,{children:["Your Elasticsearch node will startup now, and after a couple of seconds, you can reach it at ",(0,a.jsx)(r.code,{children:"http://localhost:9200/"}),". Kibana should be running at ",(0,a.jsx)(r.code,{children:"http://localhost:5601"})," now. To shut down Elasticsearch and Kibana run:"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"docker-compose down\n"})}),"\n",(0,a.jsx)(r.p,{children:"In case you also would like to remove the docker volume while shutting down run:"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"docker-compose down -v\n"})})]})}function h(e={}){const{wrapper:r}={...(0,n.ah)(),...e.components};return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},603905:(e,r,s)=>{s.d(r,{ah:()=>l});var a=s(667294);function n(e,r,s){return r in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function t(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),s.push.apply(s,a)}return s}function c(e){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?t(Object(s),!0).forEach((function(r){n(e,r,s[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):t(Object(s)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(s,r))}))}return e}function o(e,r){if(null==e)return{};var s,a,n=function(e,r){if(null==e)return{};var s,a,n={},t=Object.keys(e);for(a=0;a<t.length;a++)s=t[a],r.indexOf(s)>=0||(n[s]=e[s]);return n}(e,r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(a=0;a<t.length;a++)s=t[a],r.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}var i=a.createContext({}),l=function(e){var r=a.useContext(i),s=r;return e&&(s="function"==typeof e?e(r):c(c({},r),e)),s},d={inlineCode:"code",wrapper:function(e){var r=e.children;return a.createElement(a.Fragment,{},r)}},h=a.forwardRef((function(e,r){var s=e.components,n=e.mdxType,t=e.originalType,i=e.parentName,h=o(e,["components","mdxType","originalType","parentName"]),p=l(s),u=n,m=p["".concat(i,".").concat(u)]||p[u]||d[u]||t;return s?a.createElement(m,c(c({ref:r},h),{},{components:s})):a.createElement(m,c({ref:r},h))}));h.displayName="MDXCreateElement"},755064:(e,r,s)=>{s.d(r,{Z:()=>a});const a=s.p+"assets/images/photo-kt456d_645dhfh6dgjkhg4_d-94666784e306fd05a35924b00a5f3c3f.jpg"}}]);