"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[10037],{37870:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var t=a(785893),i=a(603905);const r={sidebar_position:7040,slug:"2020-12-03",title:"OpenHAB 3 INSTAR Camera Binding",authors:"mpolinowski",tags:["LINUX","Smarthome","IoT"]},o=void 0,s={id:"Automation_and_Robotics/Home_Automation/2020-12-03--openhab3-camera-binding/index",title:"OpenHAB 3 INSTAR Camera Binding",description:"Shenzhen, China",source:"@site/docs/Automation_and_Robotics/Home_Automation/2020-12-03--openhab3-camera-binding/index.md",sourceDirName:"Automation_and_Robotics/Home_Automation/2020-12-03--openhab3-camera-binding",slug:"/Automation_and_Robotics/Home_Automation/2020-12-03--openhab3-camera-binding/2020-12-03",permalink:"/docs/Automation_and_Robotics/Home_Automation/2020-12-03--openhab3-camera-binding/2020-12-03",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Automation_and_Robotics/Home_Automation/2020-12-03--openhab3-camera-binding/index.md",tags:[{label:"LINUX",permalink:"/docs/tags/linux"},{label:"Smarthome",permalink:"/docs/tags/smarthome"},{label:"IoT",permalink:"/docs/tags/io-t"}],version:"current",sidebarPosition:7040,frontMatter:{sidebar_position:7040,slug:"2020-12-03",title:"OpenHAB 3 INSTAR Camera Binding",authors:"mpolinowski",tags:["LINUX","Smarthome","IoT"]},sidebar:"tutorialSidebar",previous:{title:"Home Assistant - Python Scripts as Service",permalink:"/docs/Automation_and_Robotics/Home_Automation/2022-07-12-home-assistant-mqtt-python/2022-07-12"},next:{title:"OpenHAB 3 MQTT Binding",permalink:"/docs/Automation_and_Robotics/Home_Automation/2020-12-02--openhab3-mqtt-binding/2020-12-02"}},c={},d=[{value:"Add a Camera Thing",id:"add-a-camera-thing",level:2},{value:"Installing FFMPEG",id:"installing-ffmpeg",level:3},{value:"Add an Snapshot Channel",id:"add-an-snapshot-channel",level:2},{value:"Camera Control",id:"camera-control",level:2}];function l(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.ah)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Shenzhen, China",src:a(283846).Z+"",width:"1500",height:"676"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"#add-a-camera-thing",children:"Add a Camera Thing"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#installing-ffmpeg",children:"Installing FFMPEG"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#add-an-snapshot-channel",children:"Add an Snapshot Channel"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#camera-control",children:"Camera Control"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"add-a-camera-thing",children:"Add a Camera Thing"}),"\n",(0,t.jsxs)(n.p,{children:["After installing the camera binding we can continue with adding our camera. Go to ",(0,t.jsx)(n.strong,{children:"Things"})," and select the camera binding (install it if it is missing by clicking on ",(0,t.jsx)(n.strong,{children:"Install More Bindings"}),"):"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(422359).Z+"",width:"1037",height:"316"})}),"\n",(0,t.jsx)(n.p,{children:"Select the INSTAR preset for your camera:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(881027).Z+"",width:"783",height:"379"})}),"\n",(0,t.jsxs)(n.p,{children:["Now configure the ",(0,t.jsx)(n.strong,{children:"Thing"})," with your camera IP, ONVIF server port (",(0,t.jsx)(n.em,{children:"default 8080"})," - make sure to deactivate authentication in your camera's webUI) and your camera admin login:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(178444).Z+"",width:"757",height:"911"})}),"\n",(0,t.jsx)(n.h3,{id:"installing-ffmpeg",children:"Installing FFMPEG"}),"\n",(0,t.jsxs)(n.p,{children:["The camera binding is using FFMPEG to provide video streams and snapshots from your camera. Make sure that FFMPEG is installed on your system by running ",(0,t.jsx)(n.code,{children:"ffmpeg -version"}),". Also verify the installation path - default ",(0,t.jsx)(n.code,{children:"/usr/bin/ffmpeg"}),":"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(287166).Z+"",width:"765",height:"271"})}),"\n",(0,t.jsxs)(n.p,{children:["In my case I am using the Alpine Linux Docker image of OpenHab which does not come with FFMPEG. I will install it by entering the ",(0,t.jsx)(n.code,{children:"openhab"})," container (I tagged my container ",(0,t.jsx)(n.code,{children:"openhab"})," - if you did not supply a tag when running the container, replace the ",(0,t.jsx)(n.code,{children:"openhab"})," tag with your container ID) and run the installation command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker exec -ti openhab /bin/ash\r\napk add ffmpeg\r\nffmpeg -version\n"})}),"\n",(0,t.jsx)(n.p,{children:"Remember that when you remove this container and recreate it - e.g. after updating the container image - you have to re-install ffmpeg!"}),"\n",(0,t.jsx)(n.h2,{id:"add-an-snapshot-channel",children:"Add an Snapshot Channel"}),"\n",(0,t.jsxs)(n.p,{children:["Click save and re-enter the camera ",(0,t.jsx)(n.strong,{children:"Thing"})," you created. Now we can continue by adding Channels and link them to ",(0,t.jsx)(n.strong,{children:"Items"})," on our OpenHab dashboard:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(9322).Z+"",width:"756",height:"527"})}),"\n",(0,t.jsxs)(n.p,{children:["I choose the ",(0,t.jsx)(n.strong,{children:"Image"})," channel and assign it to the ",(0,t.jsx)(n.strong,{children:"Semantic Property"})," ",(0,t.jsx)(n.code,{children:"Presence"}),":"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(508926).Z+"",width:"781",height:"981"})}),"\n",(0,t.jsxs)(n.p,{children:["Click save and additionally add a ",(0,t.jsx)(n.strong,{children:"Poll Image"})," channel and add it to the same dashboard ",(0,t.jsx)(n.strong,{children:"Item"}),". It allows us to start the image polling service."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(933017).Z+"",width:"1003",height:"520"})}),"\n",(0,t.jsxs)(n.p,{children:["On the properties tab on my dashboard I am now able to see the ",(0,t.jsx)(n.strong,{children:"Presence Property"}),". Clicking on the ",(0,t.jsx)(n.strong,{children:"Image Item"})," allows me to access a snapshot from my camera:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(179286).Z+"",width:"841",height:"482"})}),"\n",(0,t.jsx)(n.h2,{id:"camera-control",children:"Camera Control"}),"\n",(0,t.jsx)(n.p,{children:"You can continue adding camera channels to take control over your camera from the OpenHab dashboard - e.g. the Pan&Tilt control:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(790181).Z+"",width:"916",height:"669"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(253795).Z+"",width:"886",height:"229"})})]})}function h(e={}){const{wrapper:n}={...(0,i.ah)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},603905:(e,n,a)=>{a.d(n,{ah:()=>d});var t=a(667294);function i(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function r(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function o(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?r(Object(a),!0).forEach((function(n){i(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function s(e,n){if(null==e)return{};var a,t,i=function(e,n){if(null==e)return{};var a,t,i={},r=Object.keys(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||(i[a]=e[a]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var c=t.createContext({}),d=function(e){var n=t.useContext(c),a=n;return e&&(a="function"==typeof e?e(n):o(o({},n),e)),a},l={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},h=t.forwardRef((function(e,n){var a=e.components,i=e.mdxType,r=e.originalType,c=e.parentName,h=s(e,["components","mdxType","originalType","parentName"]),m=d(a),p=i,g=m["".concat(c,".").concat(p)]||m[p]||l[p]||r;return a?t.createElement(g,o(o({ref:n},h),{},{components:a})):t.createElement(g,o({ref:n},h))}));h.displayName="MDXCreateElement"},422359:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/OpenHAB3_Docker_20-2a7aa41f5b1868b6921c53253d24da0a.png"},881027:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/OpenHAB3_Docker_21-4e18beea78fee9964decb041521b9008.png"},178444:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/OpenHAB3_Docker_22-1451d0cb714eb576ada29bee5910de07.png"},287166:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/OpenHAB3_Docker_23-8dd32b4bc7e6443b387dbe5d63ac7392.png"},9322:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/OpenHAB3_Docker_24-b1a4e2894d966f111d116245f57b75cf.png"},508926:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/OpenHAB3_Docker_25-2eef0b1b4a53e7de8a5347b13198ede4.png"},933017:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/OpenHAB3_Docker_26-2a662367b2b465336cefe19a6c01eb3b.png"},179286:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/OpenHAB3_Docker_27-a38f393fef54901012eb219f170a72ea.png"},790181:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/OpenHAB3_Docker_28-da1d23b924182b4f453333efdf1ab949.png"},253795:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/OpenHAB3_Docker_29-2540bf0d599f334e7eb8ff1f78a6064d.png"},283846:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-e12a28f9c35f9ae6e3540843545ced7e.jpg"}}]);