"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[78291],{633993:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>c,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>d});var s=n(474848),a=n(28453);const r={sidebar_position:6090,slug:"2021-06-04",title:"React Dashboard for MQTT",authors:"mpolinowski",tags:["React","MQTT"]},c=void 0,i={id:"Development/Javascript/2021-06-04--mqtt-dashboard-react/index",title:"React Dashboard for MQTT",description:"Wanchai, Hongkong",source:"@site/docs/Development/Javascript/2021-06-04--mqtt-dashboard-react/index.md",sourceDirName:"Development/Javascript/2021-06-04--mqtt-dashboard-react",slug:"/Development/Javascript/2021-06-04--mqtt-dashboard-react/2021-06-04",permalink:"/docs/Development/Javascript/2021-06-04--mqtt-dashboard-react/2021-06-04",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Development/Javascript/2021-06-04--mqtt-dashboard-react/index.md",tags:[{label:"React",permalink:"/docs/tags/react"},{label:"MQTT",permalink:"/docs/tags/mqtt"}],version:"current",sidebarPosition:6090,frontMatter:{sidebar_position:6090,slug:"2021-06-04",title:"React Dashboard for MQTT",authors:"mpolinowski",tags:["React","MQTT"]},sidebar:"tutorialSidebar",previous:{title:"Introduction to Websockets",permalink:"/docs/Development/Javascript/2021-09-07--intro-to-websockets/2021-09-07"},next:{title:"Mosquitto MQTT Cheat Sheet",permalink:"/docs/Development/Javascript/2021-06-02--mqtt-cheat-sheet/2021-06-02"}},o={},d=[{value:"Create React App",id:"create-react-app",level:2},{value:"Install Dependencies",id:"install-dependencies",level:2},{value:"Run the App",id:"run-the-app",level:2}];function l(e){const t={a:"a",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Wanchai, Hongkong",src:n(828231).A+"",width:"1500",height:"533"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"#create-react-app",children:"Create React App"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"#install-dependencies",children:"Install Dependencies"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"#run-the-app",children:"Run the App"})}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"WIP"})}),"\n",(0,s.jsx)(t.h2,{id:"create-react-app",children:"Create React App"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"npx create-react-app mqtt-dashboard\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Edit ",(0,s.jsx)(t.code,{children:"src/App.js"})]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"import React, { useState, Fragment } from 'react';\r\nimport './App.css';\r\n\r\nvar mqtt = require('mqtt');\r\nvar options = {\r\n    protocol: 'ws',\r\n    username: 'admin',\r\n    password: 'instar',\r\n    // clientId uniquely identifies client\r\n    // choose any string you wish\r\n    clientId: 'mqttjs_' + Math.random().toString(16).substr(2, 8),\r\n};\r\nvar client  = mqtt.connect('ws://192.168.2.111:8885', options);\r\n\r\n// cameras/ws is the MQTT topic\r\nclient.subscribe('cameras/ws');\r\n\r\nfunction App() {\r\n  var note;\r\n  client.on('message', function (topic, message) {\r\n    note = message.toString();\r\n    // Updates React state with message \r\n    setMsg(note);\r\n    console.log(note);\r\n    client.end();\r\n    });\r\n\r\n  // Sets default React state \r\n  const [msg, setMsg] = useState(<Fragment><em>...</em></Fragment>);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"App-header\">\r\n        <h1>Hello MQTT in React</h1>\r\n        <p>The message payload is: {msg}</p>\r\n      </header>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\n"})}),"\n",(0,s.jsx)(t.h2,{id:"install-dependencies",children:"Install Dependencies"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.a,{href:"https://github.com/mqttjs/MQTT.js",children:"MQTT.js"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"cd mqtt-dashboard\r\nnpm install mqtt\n"})}),"\n",(0,s.jsx)(t.h2,{id:"run-the-app",children:"Run the App"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"npm start\n"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"mosquitto_pub -t 'cameras/ws' -h '192.168.2.111' -m 'Hey!' -p 1885 -u admin -P instar\n"})})]})}function p(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},828231:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-65a8384a82d338522efe04ac2506bd13.jpg"},28453:(e,t,n)=>{n.d(t,{R:()=>c,x:()=>i});var s=n(296540);const a={},r=s.createContext(a);function c(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);