"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[78571],{750788:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>a,toc:()=>c});var s=t(785893),r=t(603905);const o={sidebar_position:9070,slug:"2022-06-27",title:"Web Scraping Essentials with Python",authors:"mpolinowski",tags:["Python"]},i=void 0,a={id:"Development/Python/2022-06-27-python-web-scraping/index",title:"Web Scraping Essentials with Python",description:"Sham Sui Po, Hong Kong",source:"@site/docs/Development/Python/2022-06-27-python-web-scraping/index.md",sourceDirName:"Development/Python/2022-06-27-python-web-scraping",slug:"/Development/Python/2022-06-27-python-web-scraping/2022-06-27",permalink:"/docs/Development/Python/2022-06-27-python-web-scraping/2022-06-27",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Development/Python/2022-06-27-python-web-scraping/index.md",tags:[{label:"Python",permalink:"/docs/tags/python"}],version:"current",sidebarPosition:9070,frontMatter:{sidebar_position:9070,slug:"2022-06-27",title:"Web Scraping Essentials with Python",authors:"mpolinowski",tags:["Python"]},sidebar:"tutorialSidebar",previous:{title:"Python - Video Processing with OpenCV",permalink:"/docs/Development/Python/2022-09-17-python-video-processing/2022-09-17"},next:{title:"Introduction to PyScript",permalink:"/docs/Development/Python/2022-06-01-python-pyscript/2022-06-01"}},l={},c=[{value:"Web Scraping Tools",id:"web-scraping-tools",level:2},{value:"Using Requests to Download Web Content",id:"using-requests-to-download-web-content",level:3},{value:"Scrape Web Content with Beautiful Soup 4",id:"scrape-web-content-with-beautiful-soup-4",level:3}];function p(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.ah)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Sham Sui Po, Hong Kong",src:t(896721).Z+"",width:"1500",height:"548"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"#web-scraping-tools",children:"Web Scraping Tools"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#using-requests-to-download-web-content",children:"Using Requests to Download Web Content"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#scrape-web-content-with-beautiful-soup-4",children:"Scrape Web Content with Beautiful Soup 4"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"web-scraping-tools",children:"Web Scraping Tools"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://requests.readthedocs.io/en/latest/",children:"Requests"})," is an elegant and simple HTTP library for Python, built for human beings."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://beautiful-soup-4.readthedocs.io/en/latest/",children:"Beautiful Soup"})," is a Python library for pulling data out of HTML and XML files. It works with your favorite parser to provide idiomatic ways of navigating, searching, and modifying the parse tree."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pip install requests bs4\n"})}),"\n",(0,s.jsx)(n.h3,{id:"using-requests-to-download-web-content",children:"Using Requests to Download Web Content"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-py",children:"import requests\n\nurl = 'http://www.python.org'\nresponse = requests.get(url)\n\nprint('INFO :: Retrieving Web Content Successful?', response.ok)\nprint('INFO :: HTTP Status Code:', response.status_code)\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"python main.py\nINFO :: Retrieving Web Content Successful? True\nINFO :: HTTP Status Code: 200\n"})}),"\n",(0,s.jsx)(n.p,{children:"The web content is send as bytes and needs to be decoded into a string before further processing:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-py",children:"# Return bytes and decode to string\nprint(response.content.decode())\n# Return content directly as unicode\nprint(response.text)\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-py",children:"# Get response headers\nprint(response.headers)\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"{'Connection': 'keep-alive', 'Content-Length': '50171', 'Server': 'nginx', 'Content-Type': 'text/html; charset=utf-8', 'X-Frame-Options': 'DENY', 'Via': '1.1 vegur, 1.1 varnish, 1.1 varnish', 'Accept-Ranges': 'bytes', 'Date': 'Sat, 06 Aug 2022 10:46:40 GMT', 'Age': '3190', 'X-Served-By': 'cache-iad-kiad7000112-IAD, cache-nrt-rjtf7700056-NRT', 'X-Cache': 'HIT, HIT', 'X-Cache-Hits': '390, 2623', 'X-Timer': 'S1659782801.626291,VS0,VE0', 'Vary': 'Cookie', 'Strict-Transport-Security': 'max-age=63072000; includeSubDomains'}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"scrape-web-content-with-beautiful-soup-4",children:"Scrape Web Content with Beautiful Soup 4"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-py",children:"import requests\nfrom bs4 import BeautifulSoup\n\nurl = 'https://wiki.instar.com/en/Web_User_Interface/1440p_Series/Smarthome/MQTT/'\nresponse = requests.get(url)\n\nprint('INFO :: Retrieving Web Content Successful?', response.ok)\nprint('INFO :: HTTP Status Code:', response.status_code)\n\nhtml = response.text\n\nsoup = BeautifulSoup(html, 'html.parser')\n"})}),"\n",(0,s.jsx)(n.p,{children:"BS allows us to select content based on HTML tags, ID or classes:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-py",children:"print('INFO :: Page Title', soup.title)\nprint('INFO :: Page Header', soup.body.h1)\n"})}),"\n",(0,s.jsx)(n.p,{children:"This method always returns only the first hit:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'python main.py\nINFO :: Retrieving Web Content Successful? True\nINFO :: HTTP Status Code: 200\nINFO :: Page Title <title data-react-helmet="true">Smarthome Menu // INSTAR MQTT Broker</title>\nINFO :: Page Header <h1>INSTAR Wiki 2.5</h1>\n'})}),"\n",(0,s.jsxs)(n.p,{children:["If you want to return all of a type you need to use the ",(0,s.jsx)(n.code,{children:"find_all"})," method:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-py",children:"import requests\nfrom bs4 import BeautifulSoup\n\nurl = 'https://wiki.instar.com/enhttps://wiki.instar.com/en/Advanced_User/INSTAR_MQTT_Broker/MQTTv5_API/'\nresponse = requests.get(url)\n\nprint('INFO :: Retrieving Web Content Successful?', response.ok)\nprint('INFO :: HTTP Status Code:', response.status_code)\n\nhtml = response.text\n\nsoup = BeautifulSoup(html, 'html.parser')\n\nfor el in soup.find_all('td', attrs={'class': 'MuiTableCell-body'}):\n    rows = el.get_text()\n    print(rows)\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'python main.py\nINFO :: Retrieving Web Content Successful? True\nINFO :: HTTP Status Code: 200\nCategory: Network\n\nnetwork/config/dhcp\n{"val":"1"}, {"val":"0"}\n\nnetwork/config/ipaddr\n{"val":"192.168.178.23"}\n\nnetwork/config/netmask\n{"val":"255.255.255.0"}\n\nnetwork/config/gateway\n{"val":"192.168.178.1"}\n\nnetwork/config/fdnsip\n{"val":"192.168.178.1"}\n\nnetwork/config/sdnsip\n{"val":"192.168.178.2"}\n\n...\n'})}),"\n",(0,s.jsx)(n.p,{children:"To find multiple tags and return them as a list:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-py",children:"print(soup.find_all(['div', 'p']))\n"})}),"\n",(0,s.jsx)(n.p,{children:"Find elements by ID:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-py",children:"print(soup.find_all('div', id='quick-start'))\n"})}),"\n",(0,s.jsx)(n.p,{children:"Find elements by Class:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-py",children:"print(soup.find_all('a', class_='reference external'))\n"})}),"\n",(0,s.jsx)(n.p,{children:"Find all links on a page:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-py",children:"print (soup.find_all('a', href=True))\n"})}),"\n",(0,s.jsx)(n.p,{children:"Strip the HTML:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-py",children:"links = soup.find_all('a', href=True)\n\nfor link in links:\n    print(link.get('href'))\n"})})]})}function d(e={}){const{wrapper:n}={...(0,r.ah)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},603905:(e,n,t)=>{t.d(n,{ah:()=>c});var s=t(667294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,s)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function a(e,n){if(null==e)return{};var t,s,r=function(e,n){if(null==e)return{};var t,s,r={},o=Object.keys(e);for(s=0;s<o.length;s++)t=o[s],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)t=o[s],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=s.createContext({}),c=function(e){var n=s.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p={inlineCode:"code",wrapper:function(e){var n=e.children;return s.createElement(s.Fragment,{},n)}},d=s.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,d=a(e,["components","mdxType","originalType","parentName"]),u=c(t),h=r,g=u["".concat(l,".").concat(h)]||u[h]||p[h]||o;return t?s.createElement(g,i(i({ref:n},d),{},{components:t})):s.createElement(g,i({ref:n},d))}));d.displayName="MDXCreateElement"},896721:(e,n,t)=>{t.d(n,{Z:()=>s});const s=t.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-5f44d483789c3ce79f05418f930f5cd2.jpg"}}]);