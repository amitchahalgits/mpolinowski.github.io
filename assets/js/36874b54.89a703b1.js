"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[31314],{968099:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>c});var t=i(474848),a=i(28453);const o={sidebar_position:5e3,slug:"2022-06-07",title:"Hashicorp Waypoint with Docker",authors:"mpolinowski",tags:["Waypoint","Docker","LINUX"]},s=void 0,r={id:"DevOps/Hashicorp/2022-06-07-hashicorp-waypoint-docker/index",title:"Hashicorp Waypoint with Docker",description:"Shen Zhen, China",source:"@site/docs/DevOps/Hashicorp/2022-06-07-hashicorp-waypoint-docker/index.md",sourceDirName:"DevOps/Hashicorp/2022-06-07-hashicorp-waypoint-docker",slug:"/DevOps/Hashicorp/2022-06-07-hashicorp-waypoint-docker/2022-06-07",permalink:"/docs/DevOps/Hashicorp/2022-06-07-hashicorp-waypoint-docker/2022-06-07",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Hashicorp/2022-06-07-hashicorp-waypoint-docker/index.md",tags:[{label:"Waypoint",permalink:"/docs/tags/waypoint"},{label:"Docker",permalink:"/docs/tags/docker"},{label:"LINUX",permalink:"/docs/tags/linux"}],version:"current",sidebarPosition:5e3,frontMatter:{sidebar_position:5e3,slug:"2022-06-07",title:"Hashicorp Waypoint with Docker",authors:"mpolinowski",tags:["Waypoint","Docker","LINUX"]},sidebar:"tutorialSidebar",previous:{title:"Hashicorp Waypoint with Nomad",permalink:"/docs/DevOps/Hashicorp/2022-06-08-hashicorp-waypoint-nomad/2022-06-09"},next:{title:"Hashicorp Nomad with NGINX Loadbalancer",permalink:"/docs/DevOps/Hashicorp/2022-05-29-hashicorp-nomad-with-nginx-loadbalancer/2022-05-29"}},l={},c=[{value:"Installation",id:"installation",level:2},{value:"Use Waypoint with Docker (Next.js)",id:"use-waypoint-with-docker-nextjs",level:2},{value:"Waypoint UI",id:"waypoint-ui",level:3},{value:"Waypoint Job Configuration",id:"waypoint-job-configuration",level:3},{value:"Initialize Waypoint for the Example App",id:"initialize-waypoint-for-the-example-app",level:3},{value:"Build and Deploy",id:"build-and-deploy",level:3},{value:"Use Waypoint with Docker (Go)",id:"use-waypoint-with-docker-go",level:2},{value:"Run a Deployment",id:"run-a-deployment",level:3},{value:"Updating a Deployment",id:"updating-a-deployment",level:3},{value:"Debugging a Deployment",id:"debugging-a-deployment",level:3},{value:"Destroying a Deployment",id:"destroying-a-deployment",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Shen Zhen, China",src:i(385105).A+"",width:"1500",height:"562"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#installation",children:"Installation"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"#use-waypoint-with-docker-nextjs",children:"Use Waypoint with Docker (Next.js)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#waypoint-ui",children:"Waypoint UI"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#waypoint-job-configuration",children:"Waypoint Job Configuration"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#initialize-waypoint-for-the-example-app",children:"Initialize Waypoint for the Example App"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#build-and-deploy",children:"Build and Deploy"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"#use-waypoint-with-docker-go",children:"Use Waypoint with Docker (Go)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#run-a-deployment",children:"Run a Deployment"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#updating-a-deployment",children:"Updating a Deployment"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#debugging-a-deployment",children:"Debugging a Deployment"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#destroying-a-deployment",children:"Destroying a Deployment"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://www.waypointproject.io/docs",children:"Waypoint"})," is a tool that enables developers to describe how to get their applications from development to production in a single file and deploy using a single command: waypoint up. After deployment, Waypoint provides tools such as logs, exec, and more to validate and debug any deployments. Waypoint is fully extensible based on a plugin system which allows Waypoint to work with any tools and platforms."]}),"\n",(0,t.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'wget -O- https://apt.releases.hashicorp.com/gpg | gpg --dearmor | tee /usr/share/keyrings/hashicorp-archive-keyring.gpg\n\necho "deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main" | tee /etc/apt/sources.list.d/hashicorp.list\n\napt update && apt install waypoint\n'})}),"\n",(0,t.jsx)(n.p,{children:"Validate the installation by running the waypoint command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"waypoint -version\nCLI: v0.8.1 (622f37bd1)\n"})}),"\n",(0,t.jsxs)(n.p,{children:["As this is an older version I will ",(0,t.jsx)(n.a,{href:"https://www.waypointproject.io/downloads",children:"download the binary"})," and overwrite the installed version:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"wget https://releases.hashicorp.com/waypoint/0.9.0/waypoint_0.9.0_linux_amd64.zip\nunzip waypoint_0.9.0_linux_amd64.zip\nrm /usr/bin/waypoint\nmv ./waypoint /usr/bin/waypoint\nchmod +x /usr/bin/waypoint\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"waypoint -version\nCLI: v0.9.0 (2a7b89036)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"use-waypoint-with-docker-nextjs",children:"Use Waypoint with Docker (Next.js)"}),"\n",(0,t.jsxs)(n.p,{children:["I am following the getting started guide by Hashicorp to set up an Next.js app inside a Docker container using waypoint. The Example code can be found on ",(0,t.jsx)(n.a,{href:"https://github.com/hashicorp/waypoint-examples/tree/main/docker/next-js",children:"Github"}),". Start by cloning the Waypoint Examples repository and navigate to the Next.js example:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/hashicorp/waypoint-examples.git\ncd waypoint-examples/docker/next-js\n"})}),"\n",(0,t.jsx)(n.p,{children:"According to the documentation this only works with Docker Desktop. Which would be a Problem when I want to use this on a Debian server ? But let's give it a try and see what happens.."}),"\n",(0,t.jsxs)(n.p,{children:["Run the following command to install the ",(0,t.jsx)(n.strong,{children:"Waypoint server"}),". The ",(0,t.jsx)(n.code,{children:"-accept-tos"})," flag confirms that you accept the ",(0,t.jsx)(n.a,{href:"https://www.waypointproject.io/terms",children:"terms of service"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"waypoint install -platform=docker -accept-tos\n"})}),"\n",(0,t.jsx)(n.p,{children:"Now this looks promising:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'\u2713 Pulling image: hashicorp/waypoint:latest\n\u2713 Installing Waypoint server to docker\n\u2713 Server container started!\n\u2713 Server installed and configured!\n\u2713 Successfully connected to Waypoint server in Docker!\n\u2713 Runner "static" installed\n\u2713 Registered ondemand runner!\n\u2713 Waypoint runner installed and started!\n\u2713 Runner "static" adopted successfully.\nWaypoint server successfully installed and configured!\n\nThe CLI has been configured to connect to the server automatically. This\nconnection information is saved in the CLI context named "install-1658472038".\nUse the "waypoint context" CLI to manage CLI contexts.\n\nThe server has been configured to advertise the following address for\nentrypoint communications. This must be a reachable address for all your\ndeployments. If this is incorrect, manually set it using the CLI command\n"waypoint server config-set".\n\nTo launch and authenticate into the Web UI, run:\nwaypoint ui -authenticate\n\nAdvertise Address: waypoint-server:9701\nWeb UI Address: https://localhost:9702\n'})}),"\n",(0,t.jsx)(n.h3,{id:"waypoint-ui",children:"Waypoint UI"}),"\n",(0,t.jsxs)(n.p,{children:["I did not use the ",(0,t.jsx)(n.code,{children:"waypoint server config-set"})," command but directly opened the ",(0,t.jsx)(n.code,{children:"waypoint-server:9702"})," address:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Hashicorp Waypoint",src:i(280010).A+"",width:"1351",height:"841"})}),"\n",(0,t.jsx)(n.p,{children:"Clicking on authentication leads me to the following page where I am supposed to create an access token for the UI:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"waypoint user token\n\nHZCwuUtmrrpVKaLUHPhE6ynePphYJsn66qvryWmYv6TmSRPnQ134VyvHNrYZRdFz6ecsjM4fSwnc3HRApzS8cuDmNFp2cntVjurDTCi5pWGRXbRWRPWYtzUj1ypvzvyafNpfwpVQaQ31ftD8jDn3haskEqF4wKgKHRdi\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Hashicorp Waypoint",src:i(794241).A+"",width:"1356",height:"702"})}),"\n",(0,t.jsx)(n.p,{children:"Here I am greeted with a deprecation warning for the next version of Waypoint:"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Upcoming changes to projects"}),' In our upcoming Waypoint 0.10 release, we will be removing "projects" from Waypoint. With this change, all projects settings and variables will be assigned directly to applications. To learn more about this change, ',(0,t.jsx)(n.a,{href:"https://discuss.hashicorp.com/t/deprecating-projects-or-how-i-learned-to-love-apps/40888",children:"visit the link"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"waypoint-job-configuration",children:"Waypoint Job Configuration"}),"\n",(0,t.jsx)(n.p,{children:"When you deploy your app with Waypoint, your computer (the Waypoint client) connects to the Waypoint server to initiate the Waypoint workflow. The client then registers itself as a runner, allowing Waypoint to run builds on it. Before you can build and deploy your application, you must initialize it with Waypoint. For a blank application, this is done with the init command."}),"\n",(0,t.jsxs)(n.p,{children:["When you initialize Waypoint for your application, Waypoint first looks to see if there is a Waypoint configuration file (",(0,t.jsx)(n.a,{href:"https://github.com/hashicorp/waypoint-examples/blob/main/docker/next-js/waypoint.hcl",children:"waypoint.hcl"}),") for the application in the current directory. If Waypoint cannot find the application's configuration file when you run waypoint init, Waypoint will create a starter waypoint.hcl file that you can then customize for your application. Here is the configuration file for the Next.js project:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'cat waypoint.hcl\n\nproject = "example-nextjs"\n\napp "example-nextjs" {\n labels = {\n   "service" = "example-nextjs",\n   "env"     = "dev"\n }\n\n build {\n   use "pack" {}\n }\n\n deploy {\n   use "docker" {}\n }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"build"})," clause defines how Waypoint will build the app. ",(0,t.jsx)(n.code,{children:"pack"})," tells Waypoint to use the most relevant Cloud Native Buildpack to build the application. If the app is written in NodeJS, Waypoint will use NodeJS Cloud Native Buildpacks, etc."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"deploy"})," clause defines how Waypoint will deploy the app. The ",(0,t.jsx)(n.a,{href:"https://www.waypointproject.io/plugins/docker",children:"docker option"})," tells Waypoint to deploy the application to Docker."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"initialize-waypoint-for-the-example-app",children:"Initialize Waypoint for the Example App"}),"\n",(0,t.jsxs)(n.p,{children:["Run the ",(0,t.jsx)(n.code,{children:"init"})," command to initialize the application:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"waypoint init\n\n\u2713 Configuration file appears valid\n\u2713 Connection to Waypoint server was successful\n\u2713 Project \"example-nextjs\" and all apps are registered with the server.\n\nProject initialized!\n\nYou may now call 'waypoint up' to deploy your project or\ncommands such as 'waypoint build' to perform steps individually.\n"})}),"\n",(0,t.jsx)(n.h3,{id:"build-and-deploy",children:"Build and Deploy"}),"\n",(0,t.jsxs)(n.p,{children:["This application is configured to use ",(0,t.jsx)(n.a,{href:"https://devcenter.heroku.com/articles/buildpacks#officially-supported-buildpacks",children:"Heroku Buildpacks"})," to detect the type of application running and to launch it within Docker. Because Waypoint uses the applicable buildpack to create the Dockerfile, you do not need to create the file yourself."]}),"\n",(0,t.jsxs)(n.p,{children:["Once Waypoint completes the build, it stores the artifacts in either a local or remote ",(0,t.jsx)(n.code,{children:"registry"}),". The ",(0,t.jsx)(n.code,{children:"registry"})," clause in the ",(0,t.jsx)(n.code,{children:"waypoint.hcl"})," file specifies where to store the app's artifacts. If the ",(0,t.jsx)(n.code,{children:"registry"})," clause is not present, Waypoint will default to using the local Docker instance to store the application's artifacts."]}),"\n",(0,t.jsx)(n.p,{children:"Deploy the application to Docker Desktop by running:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"waypoint up\n"})}),"\n",(0,t.jsx)(n.p,{children:"Here I am ending in an error message:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Hashicorp Waypoint",src:i(573112).A+"",width:"1342",height:"709"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:" \u2502 [builder]   opensslErrorStack: [ 'error:03000086:digital envelope routines::init\n \u2502 ialization error' ],\n \u2502 [builder]   library: 'digital envelope routines',\n \u2502 [builder]   reason: 'unsupported',\n \u2502 [builder]   code: 'ERR_OSSL_EVP_UNSUPPORTED'\n \u2502 [builder] }\n \u2502 [builder]\n \u2502 [builder] Node.js v18.5.0\n \u2502 [builder] error Command failed with exit code 1.\n \u2502 [builder] ERROR: failed to build: exit status 1\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This is an issue with OpenSSL in Node.js I encountered before in a Gatby.js project. This could be solved by using the ",(0,t.jsx)(n.strong,{children:"OpenSSL Legacy Provider"})," in the projects ",(0,t.jsx)(n.code,{children:"package.json"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'"scripts": {\n  "dev": "SET NODE_OPTIONS=--openssl-legacy-provider && next dev",\n  "build": "SET NODE_OPTIONS=--openssl-legacy-provider && next build",\n  "start": "SET NODE_OPTIONS=--openssl-legacy-provider && next start"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"So now I get a little farther but run into another issue - a permission error for the build script:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"[builder] /cnb/buildpacks/heroku_nodejs-yarn/0.2.3/lib/build.sh: line 129: /layers/heroku_nodejs-yarn/toolbox/bin/yj: Permission denied\n[builder] ERROR: failed to build: exit status 126\nexecuting lifecycle. This may be the result of using an untrusted builder: failed with status code: 51\n"})}),"\n",(0,t.jsxs)(n.p,{children:["I found the file and used ",(0,t.jsx)(n.code,{children:"chmod"})," to opened up the permissions - let's see if this is really the issue:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"/var/lib/docker/overlay2/8ed3f11989f7d6778af530e5126169a0241e8fa00667dd20a07e87fda476c2eb/diff/cnb/buildpacks/heroku_nodejs-yarn/0.2.3/lib\n\n-rwxrwxrwx 1 root root 4290 Jan  1  1980 build.sh\n-rwxrwxrwx 1 root root  280 Jan  1  1980 detect.sh\ndrwxr-xr-x 2 root root 4096 Jan  1  1980 utils\n"})}),"\n",(0,t.jsx)(n.p,{children:"And another error message:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"[builder] $ SET NODE_OPTIONS=--openssl-legacy-provider && next build\n[builder] /bin/sh: 1: SET: not found\n[builder] error Command failed with exit code 127.\n[builder] info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\n[builder] ERROR: failed to build: exit status 127\nexecuting lifecycle. This may be the result of using an untrusted builder: failed with status code: 51\n"})}),"\n",(0,t.jsx)(n.h2,{id:"use-waypoint-with-docker-go",children:"Use Waypoint with Docker (Go)"}),"\n",(0,t.jsxs)(n.p,{children:["Ok enough Node.js shenanigans... let's try another example. The Go example is a simple file server that serves files on port ",(0,t.jsx)(n.code,{children:"3000"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n        "fmt"\n        "log"\n        "net/http"\n)\n\nfunc main() {\n        fileServer := http.FileServer(http.Dir("./static"))\n        http.Handle("/", fileServer)\n\n        fmt.Printf("Starting server at: http://localhost:3000\\n")\n        if err := http.ListenAndServe(":3000", nil); err != nil {\n                log.Fatal(err)\n        }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"The job file for it is basically identical to the previous one:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'project = "example-go"\n\napp "example-go" {\n  labels = {\n    "service" = "example-go",\n    "env"     = "dev"\n  }\n\n  build {\n    use "pack" {}\n  }\n\n  deploy {\n    use "docker" {}\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"run-a-deployment",children:"Run a Deployment"}),"\n",(0,t.jsx)(n.p,{children:"So let's initialize and run the example code:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"waypoint init\nwaypoint up\n"})}),"\n",(0,t.jsx)(n.p,{children:"This time the build worked:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Hashicorp Waypoint",src:i(822103).A+"",width:"1355",height:"863"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker ps\n\nIMAGE             PORTS                                       NAMES\nexample-go:latest 0.0.0.0:49153->3000/tcp, :::49153->3000/tcp example-go-01G8MYK998Z6RRQG89YESFJ6N1\n"})}),"\n",(0,t.jsxs)(n.p,{children:["And I am able to access the web frontend on port ",(0,t.jsx)(n.code,{children:"49153"}),":"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Hashicorp Waypoint",src:i(876526).A+"",width:"1359",height:"608"})}),"\n",(0,t.jsx)(n.p,{children:"\ud83d\udc4d"}),"\n",(0,t.jsx)(n.p,{children:"Additionally there is a generated URL that also allows you to reach the frontend:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'The deploy was successful! A Waypoint deployment URL is shown below. This\ncan be used internally to check your deployment and is not meant for external\ntraffic. You can manage this hostname using "waypoint hostname."\n\n           URL: https://rare-borg-aardvark.waypoint.run\nDeployment URL: https://rare-borg-aardvark--v1.waypoint.run\n'})}),"\n",(0,t.jsx)(n.h3,{id:"updating-a-deployment",children:"Updating a Deployment"}),"\n",(0,t.jsxs)(n.p,{children:["You can edit the example ",(0,t.jsx)(n.code,{children:"html"})," code and run waypoint again to re-deploy your app:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'The deploy was successful! A Waypoint deployment URL is shown below. This\ncan be used internally to check your deployment and is not meant for external\ntraffic. You can manage this hostname using "waypoint hostname."\n\n           URL: https://rare-borg-aardvark.waypoint.run\nDeployment URL: https://rare-borg-aardvark--v2.waypoint.run\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Hashicorp Waypoint",src:i(646885).A+"",width:"1341",height:"817"})}),"\n",(0,t.jsx)(n.p,{children:"This time the generated URL fails:"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Couldn't find a Waypoint deployment with this URL"}),": If you expected to see a deployment here you might want to check your logs to see if something went wrong."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["But I am able to access the frontend locally through the assigned port ",(0,t.jsx)(n.code,{children:"0.0.0.0:49154->3000/tcp"}),", ",(0,t.jsx)(n.code,{children:":::49154->3000/tcp"}),":"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Hashicorp Waypoint",src:i(563996).A+"",width:"1091",height:"576"})}),"\n",(0,t.jsx)(n.h3,{id:"debugging-a-deployment",children:"Debugging a Deployment"}),"\n",(0,t.jsx)(n.p,{children:"You can use the following command to get the deployment logs:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"waypoint logs\n"})}),"\n",(0,t.jsx)(n.p,{children:"And here we have the reason why the URL is not working - some networking issue:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'2022-07-23T07:49:52.850Z QAG4GY: Starting server at: http://localhost:3000\n2022-07-23T07:50:02.348Z QAG4GY: [WARN]  entrypoint.config.watcher: error starting URL service: err="error\ndiscovering network endpoints: Get "https://control.hzn.network/.well-known/horizon/hubs.json": dial tcp: lookup\ncontrol.hzn.network on 127.0.0.11:53: read udp 127.0.0.1:52624->127.0.0.11:53: i/o timeout"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"destroying-a-deployment",children:"Destroying a Deployment"}),"\n",(0,t.jsxs)(n.p,{children:["Run ",(0,t.jsx)(n.code,{children:"destroy"})," to remove the application from Docker:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"waypoint destroy -auto-approve\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"Performing operation locally\n\n\xbb Destroying releases for application 'example-go'...\n\u2713 Running release destroy v2\n\u2713 Running release destroy v1\n\n\xbb Destroying deployments for application 'example-go'...\n\u2713 Running deployment destroy v2\n\u2713 Deleting container: 7d2ab16ff4e389a1b503de787b3f97c1e5e62e993a58bea8f2ee3e222fce4144\n\u2713 Running deployment destroy v1\n\u2713 Deleting container: d283cb3d0dcd98db3510a1a869f95da97454bf51b4ae0186df9700a7ec6ca80a\nDestroy successful!\n"})})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},280010:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/hashicorp-waypoint_01-d0651088ddf46b41f26cfae46fcbc168.png"},794241:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/hashicorp-waypoint_02-c8777e69d613b79f4f531a43394b10e5.png"},573112:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/hashicorp-waypoint_03-59aaabf6d25a9110361ed332d976394e.png"},822103:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/hashicorp-waypoint_04-57b8f67a46b152139ff804365e9aab41.png"},876526:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/hashicorp-waypoint_05-25d9f274783c353d346d44762baa84f7.png"},646885:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/hashicorp-waypoint_06-75169093ce8483e5c33b96debf6b448d.png"},563996:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/hashicorp-waypoint_07-ffded2ee52874a4f7ad5aa3d445fad69.png"},385105:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-4fd563b06144187a3119f9b8b79aa8d1.jpg"},28453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>r});var t=i(296540);const a={},o=t.createContext(a);function s(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);