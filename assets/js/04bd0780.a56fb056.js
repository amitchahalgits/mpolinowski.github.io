"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[61719],{167602:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>l});var t=o(785893),r=o(603905);const s={sidebar_position:9020,slug:"2019-06-07",title:"Setting up Docker on CentOS 8",authors:"mpolinowski",tags:["LINUX","Docker"]},a=void 0,i={id:"DevOps/Linux/2019-06-07--installing-docker-on-centos8/index",title:"Setting up Docker on CentOS 8",description:"Harbin, China",source:"@site/docs/DevOps/Linux/2019-06-07--installing-docker-on-centos8/index.mdx",sourceDirName:"DevOps/Linux/2019-06-07--installing-docker-on-centos8",slug:"/DevOps/Linux/2019-06-07--installing-docker-on-centos8/2019-06-07",permalink:"/docs/DevOps/Linux/2019-06-07--installing-docker-on-centos8/2019-06-07",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Linux/2019-06-07--installing-docker-on-centos8/index.mdx",tags:[{label:"LINUX",permalink:"/docs/tags/linux"},{label:"Docker",permalink:"/docs/tags/docker"}],version:"current",sidebarPosition:9020,frontMatter:{sidebar_position:9020,slug:"2019-06-07",title:"Setting up Docker on CentOS 8",authors:"mpolinowski",tags:["LINUX","Docker"]},sidebar:"tutorialSidebar",previous:{title:"Downloading Docker Images for Offline Use",permalink:"/docs/DevOps/Linux/2019-06-14--download-and-save-docker-image/2019-06-14"},next:{title:"Centos Administration",permalink:"/docs/DevOps/Linux/2019-01-13--centos-administration/2019-01-13"}},c={},l=[{value:"Docker ?",id:"docker-",level:2},{value:"Install Docker-CE",id:"install-docker-ce",level:2},{value:"Start and enable the Docker Daemon",id:"start-and-enable-the-docker-daemon",level:2},{value:"Installing Docker-Compose",id:"installing-docker-compose",level:2},{value:"Testing Docker",id:"testing-docker",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,r.ah)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Harbin, China",src:o(492783).Z+"",width:"1500",height:"975"})}),"\n",(0,t.jsx)(n.h2,{id:"docker-",children:"Docker ?"}),"\n",(0,t.jsx)(n.p,{children:"The latest release of the RHEL 8 / CentOS 8 introduces buildah and podman, which aim to be compatible with existing docker images and work without relying on a daemon, allowing the creation of containers as normal users, without the need of special permissions. Some specific tools, however, are still missing: an equivalent of docker-compose, for example does not exists yet. In this tutorial we will see how to install and run the original Docker CE on CentOS 8."}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"dnf config-manager"})," utility let us enable or disable a repository in our distribution. We can use it to add and enable the docker-ce repo:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo dnf config-manager --add-repo=https://download.docker.com/linux/centos/docker-ce.repo\n"})}),"\n",(0,t.jsx)(n.p,{children:"We can verify that the repository has been enabled, by looking at the output of the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo dnf repolist -v\n"})}),"\n",(0,t.jsx)(n.p,{children:"The docker-ce-stable repository is now enabled on our system. To display all of them, we can run:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"dnf list docker-ce --showduplicates | sort -r\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Now we need to install ",(0,t.jsx)(n.code,{children:"containerd.io"})," manually. As there isn't a version for CentOS 7 (yet?) we need to install the following:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# sudo dnf install https://download.docker.com/linux/centos/7/x86_64/stable/Packages/containerd.io-1.2.6-3.3.el7.x86_64.rpm\r\nsudo dnf install https://download.docker.com/linux/centos/7/x86_64/stable/Packages/containerd.io-1.4.3-3.1.el7.x86_64.rpm\n"})}),"\n",(0,t.jsx)(n.h2,{id:"install-docker-ce",children:"Install Docker-CE"}),"\n",(0,t.jsx)(n.p,{children:"After the package is installed, we can simply install the latest docker-ce:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo dnf install docker-ce\n"})}),"\n",(0,t.jsx)(n.p,{children:"In order to make DNS resolution work inside Docker containers, we must disable firewalld (really?):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo systemctl disable firewalld\n"})}),"\n",(0,t.jsx)(n.h2,{id:"start-and-enable-the-docker-daemon",children:"Start and enable the Docker Daemon"}),"\n",(0,t.jsx)(n.p,{children:"Once docker-ce is installed, we must start and enable the docker daemon, so that it will be also launched automatically at boot:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo systemctl enable --now docker\n"})}),"\n",(0,t.jsx)(n.p,{children:"At this point, we can confirm that the daemon is active by running:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"systemctl is-active docker\r\nsystemctl is-enabled docker\n"})}),"\n",(0,t.jsx)(n.h2,{id:"installing-docker-compose",children:"Installing Docker-Compose"}),"\n",(0,t.jsxs)(n.p,{children:["Download the binary from the ",(0,t.jsx)(n.a,{href:"https://github.com/docker/compose/releases/latest",children:"github page of the project"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl -L 'https://github.com/docker/compose/releases/download/1.24.1/docker-compose-$(uname -s)-$(uname -m)' -o docker-compose\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Once the binary is downloaded, we move it into ",(0,t.jsx)(n.code,{children:"/usr/local/bin"})," and we make it executable:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo mv docker-compose /usr/local/bin && sudo chmod +x /usr/local/bin/docker-compose\n"})}),"\n",(0,t.jsx)(n.h2,{id:"testing-docker",children:"Testing Docker"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker pull hello-world\r\ndocker run hello-world\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Docker on CentOS 8",src:o(966490).Z+"",width:"735",height:"343"})})]})}function h(e={}){const{wrapper:n}={...(0,r.ah)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},603905:(e,n,o)=>{o.d(n,{ah:()=>l});var t=o(667294);function r(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function s(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,t)}return o}function a(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?s(Object(o),!0).forEach((function(n){r(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function i(e,n){if(null==e)return{};var o,t,r=function(e,n){if(null==e)return{};var o,t,r={},s=Object.keys(e);for(t=0;t<s.length;t++)o=s[t],n.indexOf(o)>=0||(r[o]=e[o]);return r}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)o=s[t],n.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var c=t.createContext({}),l=function(e){var n=t.useContext(c),o=n;return e&&(o="function"==typeof e?e(n):a(a({},n),e)),o},d={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},h=t.forwardRef((function(e,n){var o=e.components,r=e.mdxType,s=e.originalType,c=e.parentName,h=i(e,["components","mdxType","originalType","parentName"]),p=l(o),u=r,m=p["".concat(c,".").concat(u)]||p[u]||d[u]||s;return o?t.createElement(m,a(a({ref:n},h),{},{components:o})):t.createElement(m,a({ref:n},h))}));h.displayName="MDXCreateElement"},966490:(e,n,o)=>{o.d(n,{Z:()=>t});const t=o.p+"assets/images/Docker_on_CentOS8_01-5953ac7e19dc34bfb367b049c4f613da.png"},492783:(e,n,o)=>{o.d(n,{Z:()=>t});const t=o.p+"assets/images/photo-456t66d_64567fh6dgjkhg4_d-2bc0cc54edcece3223e2fc9b52a22fa5.jpg"}}]);