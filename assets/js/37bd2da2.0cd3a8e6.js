"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[72632],{479842:(i,e,t)=>{t.r(e),t.d(e,{assets:()=>r,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>c,toc:()=>d});var s=t(474848),n=t(28453);const a={sidebar_position:8e3,slug:"2022-01-15",title:"Zabbix v6 Slack Notifications",authors:"mpolinowski",tags:["LINUX","Slack","Zabbix"]},o=void 0,c={id:"DevOps/Zabbix/2022-01-15--zabbix-v6-slack-notifications/index",title:"Zabbix v6 Slack Notifications",description:"TST, Hong Kong",source:"@site/docs/DevOps/Zabbix/2022-01-15--zabbix-v6-slack-notifications/index.md",sourceDirName:"DevOps/Zabbix/2022-01-15--zabbix-v6-slack-notifications",slug:"/DevOps/Zabbix/2022-01-15--zabbix-v6-slack-notifications/2022-01-15",permalink:"/docs/DevOps/Zabbix/2022-01-15--zabbix-v6-slack-notifications/2022-01-15",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Zabbix/2022-01-15--zabbix-v6-slack-notifications/index.md",tags:[{label:"LINUX",permalink:"/docs/tags/linux"},{label:"Slack",permalink:"/docs/tags/slack"},{label:"Zabbix",permalink:"/docs/tags/zabbix"}],version:"current",sidebarPosition:8e3,frontMatter:{sidebar_position:8e3,slug:"2022-01-15",title:"Zabbix v6 Slack Notifications",authors:"mpolinowski",tags:["LINUX","Slack","Zabbix"]},sidebar:"tutorialSidebar",previous:{title:"Zabbix v6 SMART HDD Check",permalink:"/docs/DevOps/Zabbix/2022-01-15--zabbix-v6-smart-hdd-check/2022-01-15"},next:{title:"Zabbix v6 Email Notifications",permalink:"/docs/DevOps/Zabbix/2022-01-15--zabbix-v6-email-notifications/2022-01-15"}},r={},d=[{value:"Preparing Slack",id:"preparing-slack",level:3},{value:"Configure Zabbix",id:"configure-zabbix",level:3}];function l(i){const e={a:"a",code:"code",h3:"h3",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,n.R)(),...i.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"TST, Hong Kong",src:t(628096).A+"",width:"1500",height:"622"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#preparing-slack",children:"Preparing Slack"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#configure-zabbix",children:"Configure Zabbix"})}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"preparing-slack",children:"Preparing Slack"}),"\n",(0,s.jsx)(e.p,{children:"Start by creating a Channel for the Zabbix bot:"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Slack Notifications",src:t(558713).A+"",width:"1011",height:"567"})}),"\n",(0,s.jsxs)(e.p,{children:["Now click to ",(0,s.jsx)(e.a,{href:"https://api.slack.com/apps?new_app=1",children:"add a new app"})," and click on the link in the top right that leads you to the ",(0,s.jsx)(e.strong,{children:"App Directory"})," that will open the Slack webpage inside your default browser. In the top right click on the ",(0,s.jsx)(e.strong,{children:"Build"})," tab and then on the big ",(0,s.jsx)(e.strong,{children:"Start Building"})," button."]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Slack Notifications",src:t(702626).A+"",width:"1051",height:"506"})}),"\n",(0,s.jsxs)(e.p,{children:["Give your app a name and assign a workspace then click on ",(0,s.jsx)(e.strong,{children:"Create App"}),". In the following list select ",(0,s.jsx)(e.strong,{children:"Bots"}),":"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Slack Notifications",src:t(923755).A+"",width:"916",height:"431"})}),"\n",(0,s.jsxs)(e.p,{children:["There we need to assign a scope to your bot token. Click on ",(0,s.jsx)(e.strong,{children:"Review Scopes to Add"}),":"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Slack Notifications",src:t(973844).A+"",width:"1019",height:"909"})}),"\n",(0,s.jsxs)(e.p,{children:["Add the ",(0,s.jsx)(e.code,{children:"chat.write"})," scope and click on ",(0,s.jsx)(e.strong,{children:"Install App to Workspace"})," and give permission to your bot to access your workspace. You will now be given a token that you have to copy into the Zabbix interface so that Zabbix will be able to use the bot to send messages to your workspace:"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Slack Notifications",src:t(406877).A+"",width:"964",height:"421"})}),"\n",(0,s.jsx)(e.h3,{id:"configure-zabbix",children:"Configure Zabbix"}),"\n",(0,s.jsxs)(e.p,{children:["Open the Zabbix dashboard, enter the ",(0,s.jsx)(e.strong,{children:"Media types"})," configuration and select the ",(0,s.jsx)(e.strong,{children:"Slack"})," media type:"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Slack Notifications",src:t(109318).A+"",width:"1149",height:"367"})}),"\n",(0,s.jsxs)(e.p,{children:["Copy your bot token in to the ",(0,s.jsx)(e.code,{children:"bot_token"})," field and set the channel we want to bot to post into - click on ",(0,s.jsx)(e.strong,{children:"Update"})," to save your settings. Before using the Webhook, you need to setup the global macro ",(0,s.jsx)(e.code,{children:"{$ZABBIX.URL}"}),", which must contain the URL to the Zabbix frontend - go to ",(0,s.jsx)(e.strong,{children:"Administration"})," / ",(0,s.jsx)(e.strong,{children:"General"})," / ",(0,s.jsx)(e.strong,{children:"Macros"}),":"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Slack Notifications",src:t(711286).A+"",width:"1169",height:"339"})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Test"})," the bot (the Test will complain about some undefined variables - you can fill them with dummy data:"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Slack Notifications",src:t(148335).A+"",width:"1034",height:"880"})}),"\n",(0,s.jsxs)(e.p,{children:["Now the test runs successfully and you should receive the test message in ",(0,s.jsx)(e.code,{children:"#server_management"}),":"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Slack Notifications",src:t(923384).A+"",width:"953",height:"338"})}),"\n",(0,s.jsxs)(e.p,{children:["Great! Now we can add the Slack notification as a ",(0,s.jsx)(e.strong,{children:"Media Type"})," inside our user notification settings:"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Slack Notifications",src:t(144513).A+"",width:"981",height:"443"})}),"\n",(0,s.jsx)(e.p,{children:"Make sure that reporting problems to Zabbix Administrators is activated and you are good to go:"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Slack Notifications",src:t(797179).A+"",width:"1262",height:"351"})})]})}function h(i={}){const{wrapper:e}={...(0,n.R)(),...i.components};return e?(0,s.jsx)(e,{...i,children:(0,s.jsx)(l,{...i})}):l(i)}},558713:(i,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/Slack_Notifications_01-33521b9ac5b36bb430b15d1987a31f34.png"},702626:(i,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/Slack_Notifications_02-d92c2c48c30ff2d87853c968a1f974ee.png"},923755:(i,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/Slack_Notifications_03-8d62ed4498e1afe805e5f15ddbb3c1ac.png"},973844:(i,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/Slack_Notifications_04-d98d58514269dccff780811eaaea628b.png"},406877:(i,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/Slack_Notifications_05-0866ef4d7130271be9c4117042ee39f7.png"},109318:(i,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/Slack_Notifications_06-7aa2abcc3dbccb97ad110901d174c6bc.png"},711286:(i,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/Slack_Notifications_06b-381fc5912b34dc5c2dd1ea2e93dc9937.png"},148335:(i,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/Slack_Notifications_07-f372bb628581910fab6e33d9dae77c37.png"},923384:(i,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/Slack_Notifications_08-a49841d02d5682bb0d930709ea760402.png"},144513:(i,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/Slack_Notifications_09-786475225232487d6e47261b527de87e.png"},797179:(i,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/Slack_Notifications_10-dfb00129393dbaa5f4521026ee5d5a1c.png"},628096:(i,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-d8b333d1f9ddf34ac7392aef86b14c83.jpg"},28453:(i,e,t)=>{t.d(e,{R:()=>o,x:()=>c});var s=t(296540);const n={},a=s.createContext(n);function o(i){const e=s.useContext(a);return s.useMemo((function(){return"function"==typeof i?i(e):{...e,...i}}),[e,i])}function c(i){let e;return e=i.disableParentContext?"function"==typeof i.components?i.components(n):i.components||n:o(i.components),s.createElement(a.Provider,{value:e},i.children)}}}]);