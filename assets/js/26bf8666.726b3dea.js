"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[18237],{519656:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var o=r(785893),n=r(603905);const i={sidebar_position:6979,slug:"2023-01-23",title:"OpenThread Border Router with Docker with Docker",authors:"mpolinowski",tags:["IoT"],image:"https://mpolinowski.github.io/img/search/mqtt.png",description:"Build an OpenThread Border Router with Raspberry Pi 3B+ and Pitaya Go."},a=void 0,s={id:"Automation_and_Robotics/Home_Automation/2023-01-23-thread-edge-router-docker/index",title:"OpenThread Border Router with Docker with Docker",description:"Build an OpenThread Border Router with Raspberry Pi 3B+ and Pitaya Go.",source:"@site/docs/Automation_and_Robotics/Home_Automation/2023-01-23-thread-edge-router-docker/index.md",sourceDirName:"Automation_and_Robotics/Home_Automation/2023-01-23-thread-edge-router-docker",slug:"/Automation_and_Robotics/Home_Automation/2023-01-23-thread-edge-router-docker/2023-01-23",permalink:"/docs/Automation_and_Robotics/Home_Automation/2023-01-23-thread-edge-router-docker/2023-01-23",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Automation_and_Robotics/Home_Automation/2023-01-23-thread-edge-router-docker/index.md",tags:[{label:"IoT",permalink:"/docs/tags/io-t"}],version:"current",sidebarPosition:6979,frontMatter:{sidebar_position:6979,slug:"2023-01-23",title:"OpenThread Border Router with Docker with Docker",authors:"mpolinowski",tags:["IoT"],image:"https://mpolinowski.github.io/img/search/mqtt.png",description:"Build an OpenThread Border Router with Raspberry Pi 3B+ and Pitaya Go."},sidebar:"tutorialSidebar",previous:{title:"(Re) Introduction to Home Assistant Auto-discovery",permalink:"/docs/Automation_and_Robotics/Home_Automation/2023-04-17-home-assistant-mqtt-autodiscovery-part-iii/2023-04-17"},next:{title:"OpenThread Border Router",permalink:"/docs/Automation_and_Robotics/Home_Automation/2023-01-23-thread-edge-router/2023-01-23"}},d={},c=[{value:"Run OTBR Docker",id:"run-otbr-docker",level:2},{value:"Use the Web GUI",id:"use-the-web-gui",level:2},{value:"Form a Thread Network",id:"form-a-thread-network",level:3}];function l(e){const t={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,n.ah)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"Guangzhou, China",src:r(484774).Z+"",width:"1500",height:"526"})}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.a,{href:"#run-otbr-docker",children:"Run OTBR Docker"})}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.a,{href:"#use-the-web-gui",children:"Use the Web GUI"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.a,{href:"#form-a-thread-network",children:"Form a Thread Network"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsxs)(t.p,{children:["I tried to ",(0,o.jsx)(t.a,{href:"/docs/IoT-and-Machine-Learning/Home_Automation/2023-01-23-thread-edge-router/2023-01-23",children:"prepare a Raspberry Pi and installed Docker"})," but I keep running into issues that are most likely based on me getting past the countries firewall (TLS errors on downloads). The bootstrap and setup script run through without to the end. But there are still parts missing. So now I simply use ",(0,o.jsx)(t.a,{href:"https://openthread.io/guides/border-router/docker",children:"Docker to setup the router"})," on my desktop Linux PC."]}),"\n"]}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsxs)(t.p,{children:["You still need to ",(0,o.jsx)(t.a,{href:"/docs/IoT-and-Machine-Learning/Home_Automation/2023-01-23-thread-edge-router/2023-01-23#preparing-the-pitaya-go",children:"prepare the Pitaya Go"})," and plug it into a free USB port on your PC."]}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"run-otbr-docker",children:"Run OTBR Docker"}),"\n",(0,o.jsxs)(t.p,{children:["Attach the Pitaya Go to the Raspberry Pi 3B via USB and determine the serial port name for the NCP device by checking ",(0,o.jsx)(t.code,{children:"/dev"})," - e.g. ",(0,o.jsx)(t.code,{children:"ttyACM0"}),":"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:"ls /dev/tty*\n"})}),"\n",(0,o.jsx)(t.p,{children:"Get the Docker image:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"docker pull openthread/otbr\n"})}),"\n",(0,o.jsxs)(t.p,{children:["In a new terminal window, start OTBR Docker, referencing the Pitaya Go's serial port. For example, if the Pitaya Go is mounted at ",(0,o.jsx)(t.code,{children:"/dev/ttyACM0"}),":"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:'docker run --sysctl "net.ipv6.conf.all.disable_ipv6=0 net.ipv4.conf.all.forwarding=1 net.ipv6.conf.all.forwarding=1" -p 8888:80 --dns=127.0.0.1 -it --volume /dev/ttyACM0:/dev/ttyACM0 --privileged openthread/otbr --radio-url spinel+hdlc+uart:///dev/ttyACM0\n'})}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.strong,{children:"ERROR"}),": ",(0,o.jsx)(t.code,{children:"ip6tables v1.6.1: can't initialize ip6tables table "}),"filter': Table does not exist (do you need to insmod?). ERROR:  Failed to start firewall service`:"]}),"\n"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"sudo apt-get install rpi-update\nsudo chmod +x /sbin/depmod\nsudo sudo rpi-update\nsudo modprobe ip_tables\nsudo modprobe ip6table_filter\n"})}),"\n",(0,o.jsx)(t.h2,{id:"use-the-web-gui",children:"Use the Web GUI"}),"\n",(0,o.jsx)(t.p,{children:"Now, you can use the OpenThread Border Router (OTBR) Web GUI to configure and form, join, or check the status of a Thread network."}),"\n",(0,o.jsxs)(t.p,{children:["Visit the WebUI on ",(0,o.jsx)(t.code,{children:"http://localhost:8888"}),":"]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"OpenThread Border Router with Docker",src:r(540214).Z+"",width:"1310",height:"568"})}),"\n",(0,o.jsx)(t.h3,{id:"form-a-thread-network",children:"Form a Thread Network"}),"\n",(0,o.jsx)(t.p,{children:"Use the Form menu option to create a new Thread network. Observe that GREEN LED on Pitaya Go is lit. Confirm by checking the Status menu option:"}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"OpenThread Border Router with Docker",src:r(605526).Z+"",width:"1310",height:"704"})})]})}function h(e={}){const{wrapper:t}={...(0,n.ah)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},603905:(e,t,r)=>{r.d(t,{ah:()=>c});var o=r(667294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var d=o.createContext({}),c=function(e){var t=o.useContext(d),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},l={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,d=e.parentName,h=s(e,["components","mdxType","originalType","parentName"]),u=c(r),p=n,m=u["".concat(d,".").concat(p)]||u[p]||l[p]||i;return r?o.createElement(m,a(a({ref:t},h),{},{components:r})):o.createElement(m,a({ref:t},h))}));h.displayName="MDXCreateElement"},540214:(e,t,r)=>{r.d(t,{Z:()=>o});const o=r.p+"assets/images/Thread-Edge-Router_06-1e4600e840aed6990e2d5884a5786982.png"},605526:(e,t,r)=>{r.d(t,{Z:()=>o});const o=r.p+"assets/images/Thread-Edge-Router_07-2c323841be523ec14e70a09bf14ba1f6.png"},484774:(e,t,r)=>{r.d(t,{Z:()=>o});const o=r.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-98d71e33f881256303c68773a2ed92ba.jpg"}}]);