"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[90288],{964239:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>l,frontMatter:()=>s,metadata:()=>r,toc:()=>c});var i=a(474848),t=a(28453);const s={sidebar_position:7040,slug:"2020-12-03",title:"OpenHAB 3 INSTAR Camera Binding",authors:"mpolinowski",tags:["LINUX","Smarthome","IoT"]},o=void 0,r={id:"Automation_and_Robotics/Home_Automation/2020-12-03--openhab3-camera-binding/index",title:"OpenHAB 3 INSTAR Camera Binding",description:"Shenzhen, China",source:"@site/docs/Automation_and_Robotics/Home_Automation/2020-12-03--openhab3-camera-binding/index.md",sourceDirName:"Automation_and_Robotics/Home_Automation/2020-12-03--openhab3-camera-binding",slug:"/Automation_and_Robotics/Home_Automation/2020-12-03--openhab3-camera-binding/2020-12-03",permalink:"/docs/Automation_and_Robotics/Home_Automation/2020-12-03--openhab3-camera-binding/2020-12-03",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Automation_and_Robotics/Home_Automation/2020-12-03--openhab3-camera-binding/index.md",tags:[{label:"LINUX",permalink:"/docs/tags/linux"},{label:"Smarthome",permalink:"/docs/tags/smarthome"},{label:"IoT",permalink:"/docs/tags/io-t"}],version:"current",sidebarPosition:7040,frontMatter:{sidebar_position:7040,slug:"2020-12-03",title:"OpenHAB 3 INSTAR Camera Binding",authors:"mpolinowski",tags:["LINUX","Smarthome","IoT"]},sidebar:"tutorialSidebar",previous:{title:"Home Assistant - Python Scripts as Service",permalink:"/docs/Automation_and_Robotics/Home_Automation/2022-07-12-home-assistant-mqtt-python/2022-07-12"},next:{title:"OpenHAB 3 MQTT Binding",permalink:"/docs/Automation_and_Robotics/Home_Automation/2020-12-02--openhab3-mqtt-binding/2020-12-02"}},d={},c=[{value:"Add a Camera Thing",id:"add-a-camera-thing",level:2},{value:"Installing FFMPEG",id:"installing-ffmpeg",level:3},{value:"Add an Snapshot Channel",id:"add-an-snapshot-channel",level:2},{value:"Camera Control",id:"camera-control",level:2}];function h(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Shenzhen, China",src:a(814261).A+"",width:"1500",height:"676"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#add-a-camera-thing",children:"Add a Camera Thing"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#installing-ffmpeg",children:"Installing FFMPEG"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#add-an-snapshot-channel",children:"Add an Snapshot Channel"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#camera-control",children:"Camera Control"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"add-a-camera-thing",children:"Add a Camera Thing"}),"\n",(0,i.jsxs)(n.p,{children:["After installing the camera binding we can continue with adding our camera. Go to ",(0,i.jsx)(n.strong,{children:"Things"})," and select the camera binding (install it if it is missing by clicking on ",(0,i.jsx)(n.strong,{children:"Install More Bindings"}),"):"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(673089).A+"",width:"1037",height:"316"})}),"\n",(0,i.jsx)(n.p,{children:"Select the INSTAR preset for your camera:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(451960).A+"",width:"783",height:"379"})}),"\n",(0,i.jsxs)(n.p,{children:["Now configure the ",(0,i.jsx)(n.strong,{children:"Thing"})," with your camera IP, ONVIF server port (",(0,i.jsx)(n.em,{children:"default 8080"})," - make sure to deactivate authentication in your camera's webUI) and your camera admin login:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(797715).A+"",width:"757",height:"911"})}),"\n",(0,i.jsx)(n.h3,{id:"installing-ffmpeg",children:"Installing FFMPEG"}),"\n",(0,i.jsxs)(n.p,{children:["The camera binding is using FFMPEG to provide video streams and snapshots from your camera. Make sure that FFMPEG is installed on your system by running ",(0,i.jsx)(n.code,{children:"ffmpeg -version"}),". Also verify the installation path - default ",(0,i.jsx)(n.code,{children:"/usr/bin/ffmpeg"}),":"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(642506).A+"",width:"765",height:"271"})}),"\n",(0,i.jsxs)(n.p,{children:["In my case I am using the Alpine Linux Docker image of OpenHab which does not come with FFMPEG. I will install it by entering the ",(0,i.jsx)(n.code,{children:"openhab"})," container (I tagged my container ",(0,i.jsx)(n.code,{children:"openhab"})," - if you did not supply a tag when running the container, replace the ",(0,i.jsx)(n.code,{children:"openhab"})," tag with your container ID) and run the installation command:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker exec -ti openhab /bin/ash\r\napk add ffmpeg\r\nffmpeg -version\n"})}),"\n",(0,i.jsx)(n.p,{children:"Remember that when you remove this container and recreate it - e.g. after updating the container image - you have to re-install ffmpeg!"}),"\n",(0,i.jsx)(n.h2,{id:"add-an-snapshot-channel",children:"Add an Snapshot Channel"}),"\n",(0,i.jsxs)(n.p,{children:["Click save and re-enter the camera ",(0,i.jsx)(n.strong,{children:"Thing"})," you created. Now we can continue by adding Channels and link them to ",(0,i.jsx)(n.strong,{children:"Items"})," on our OpenHab dashboard:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(9381).A+"",width:"756",height:"527"})}),"\n",(0,i.jsxs)(n.p,{children:["I choose the ",(0,i.jsx)(n.strong,{children:"Image"})," channel and assign it to the ",(0,i.jsx)(n.strong,{children:"Semantic Property"})," ",(0,i.jsx)(n.code,{children:"Presence"}),":"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(442844).A+"",width:"781",height:"981"})}),"\n",(0,i.jsxs)(n.p,{children:["Click save and additionally add a ",(0,i.jsx)(n.strong,{children:"Poll Image"})," channel and add it to the same dashboard ",(0,i.jsx)(n.strong,{children:"Item"}),". It allows us to start the image polling service."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(184599).A+"",width:"1003",height:"520"})}),"\n",(0,i.jsxs)(n.p,{children:["On the properties tab on my dashboard I am now able to see the ",(0,i.jsx)(n.strong,{children:"Presence Property"}),". Clicking on the ",(0,i.jsx)(n.strong,{children:"Image Item"})," allows me to access a snapshot from my camera:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(755374).A+"",width:"841",height:"482"})}),"\n",(0,i.jsx)(n.h2,{id:"camera-control",children:"Camera Control"}),"\n",(0,i.jsx)(n.p,{children:"You can continue adding camera channels to take control over your camera from the OpenHab dashboard - e.g. the Pan&Tilt control:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(87289).A+"",width:"916",height:"669"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(81040).A+"",width:"886",height:"229"})})]})}function l(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},673089:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/OpenHAB3_Docker_20-2a7aa41f5b1868b6921c53253d24da0a.png"},451960:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/OpenHAB3_Docker_21-4e18beea78fee9964decb041521b9008.png"},797715:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/OpenHAB3_Docker_22-1451d0cb714eb576ada29bee5910de07.png"},642506:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/OpenHAB3_Docker_23-8dd32b4bc7e6443b387dbe5d63ac7392.png"},9381:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/OpenHAB3_Docker_24-b1a4e2894d966f111d116245f57b75cf.png"},442844:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/OpenHAB3_Docker_25-2eef0b1b4a53e7de8a5347b13198ede4.png"},184599:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/OpenHAB3_Docker_26-2a662367b2b465336cefe19a6c01eb3b.png"},755374:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/OpenHAB3_Docker_27-a38f393fef54901012eb219f170a72ea.png"},87289:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/OpenHAB3_Docker_28-da1d23b924182b4f453333efdf1ab949.png"},81040:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/OpenHAB3_Docker_29-2540bf0d599f334e7eb8ff1f78a6064d.png"},814261:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-e12a28f9c35f9ae6e3540843545ced7e.jpg"},28453:(e,n,a)=>{a.d(n,{R:()=>o,x:()=>r});var i=a(296540);const t={},s=i.createContext(t);function o(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);