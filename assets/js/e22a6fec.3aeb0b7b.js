"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[29362],{985546:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>c});var r=n(785893),i=n(603905);const s={sidebar_position:7e3,slug:"2021-06-02",title:"Mosquitto MQTT Cheat Sheet",authors:"mpolinowski",tags:["MQTT"]},o=void 0,a={id:"Development/Javascript/2021-06-02--mqtt-cheat-sheet/index",title:"Mosquitto MQTT Cheat Sheet",description:"Victoria Harbour, Hongkong",source:"@site/docs/Development/Javascript/2021-06-02--mqtt-cheat-sheet/index.md",sourceDirName:"Development/Javascript/2021-06-02--mqtt-cheat-sheet",slug:"/Development/Javascript/2021-06-02--mqtt-cheat-sheet/2021-06-02",permalink:"/docs/Development/Javascript/2021-06-02--mqtt-cheat-sheet/2021-06-02",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Development/Javascript/2021-06-02--mqtt-cheat-sheet/index.md",tags:[{label:"MQTT",permalink:"/docs/tags/mqtt"}],version:"current",sidebarPosition:7e3,frontMatter:{sidebar_position:7e3,slug:"2021-06-02",title:"Mosquitto MQTT Cheat Sheet",authors:"mpolinowski",tags:["MQTT"]},sidebar:"tutorialSidebar",previous:{title:"React Dashboard for MQTT",permalink:"/docs/Development/Javascript/2021-06-04--mqtt-dashboard-react/2021-06-04"},next:{title:"MQTT Webfrontend with React.js",permalink:"/docs/Development/Javascript/2021-06-01--mqtt-with-reactjs/2021-06-01"}},l={},c=[{value:"Installation LINUX",id:"installation-linux",level:2},{value:"Configuration",id:"configuration",level:3},{value:"Changing the Port",id:"changing-the-port",level:4},{value:"Changing the User Login",id:"changing-the-user-login",level:4},{value:"Adding additional users",id:"adding-additional-users",level:4},{value:"Deleting Users",id:"deleting-users",level:4},{value:"Activating User Auth",id:"activating-user-auth",level:4},{value:"Access Control List",id:"access-control-list",level:4},{value:"Publish &amp; Subscribe",id:"publish--subscribe",level:2},{value:"Pub Flags",id:"pub-flags",level:3},{value:"Sub Flags",id:"sub-flags",level:3},{value:"Debugging",id:"debugging",level:3},{value:"Retaining",id:"retaining",level:3},{value:"Clearing Retained Topics",id:"clearing-retained-topics",level:4},{value:"Quality-of-Service",id:"quality-of-service",level:3},{value:"QoS 0",id:"qos-0",level:4},{value:"QoS 1",id:"qos-1",level:4},{value:"QoS 2",id:"qos-2",level:4},{value:"Client Name",id:"client-name",level:3},{value:"Wildcards",id:"wildcards",level:3},{value:"Plus",id:"plus",level:4},{value:"Hash",id:"hash",level:4},{value:"Default mosquitto.conf",id:"default-mosquittoconf",level:2}];function d(e){const t={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.ah)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Victoria Harbour, Hongkong",src:n(929675).Z+"",width:"1500",height:"491"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"#installation-linux",children:"Installation LINUX"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"#configuration",children:"Configuration"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"#changing-the-port",children:"Changing the Port"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"#changing-the-user-login",children:"Changing the User Login"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"#adding-additional-users",children:"Adding additional users"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"#deleting-users",children:"Deleting Users"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"#activating-user-auth",children:"Activating User Auth"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"#access-control-list",children:"Access Control List"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"#publish--subscribe",children:"Publish & Subscribe"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"#pub-flags",children:"Pub Flags"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"#sub-flags",children:"Sub Flags"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"#debugging",children:"Debugging"})}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"#retaining",children:"Retaining"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"#clearing-retained-topics",children:"Clearing Retained Topics"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"#quality-of-service",children:"Quality-of-Service"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"#qos-0",children:"QoS 0"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"#qos-1",children:"QoS 1"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"#qos-2",children:"QoS 2"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"#client-name",children:"Client Name"})}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"#wildcards",children:"Wildcards"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"#plus",children:"Plus"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"#hash",children:"Hash"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"#default-mosquittoconf",children:"Default mosquitto.conf"})}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"installation-linux",children:"Installation LINUX"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"apt update\r\napt-cache search mosquitto\r\napt install mosquitto\n"})}),"\n",(0,r.jsxs)(t.p,{children:["And Mosquitto was successfully installed and is listening on the default port ",(0,r.jsx)(t.code,{children:"1883"}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"netstat -tlnp\r\n\r\nActive Internet connections (only servers)\r\nProto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name\r\ntcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      464/sshd: /usr/sbin\r\ntcp        0      0 127.0.0.1:1883          0.0.0.0:*               LISTEN      1692/mosquitto\r\ntcp6       0      0 :::22                   :::*                    LISTEN      464/sshd: /usr/sbin\r\ntcp6       0      0 ::1:1883                :::*                    LISTEN      1692/mosquitto\n"})}),"\n",(0,r.jsxs)(t.p,{children:["The service can be stopped and restarted with ",(0,r.jsx)(t.code,{children:"systemctl"}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"service mosquitto status\r\nservice mosquitto stop\r\nservice mosquitto start\r\nservice mosquitto restart\n"})}),"\n",(0,r.jsx)(t.h3,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsxs)(t.p,{children:["To configure Mosquitto put ",(0,r.jsx)(t.strong,{children:"*.conf"})," files into the ",(0,r.jsx)(t.code,{children:"/etc/mosquitto/conf.d/"})," directory. Any files placed in this directory that have a .conf ending will be loaded as config files by the broker. My broker was missing the default config template after installation ~ ",(0,r.jsx)(t.a,{href:"#default-mosquittoconf",children:"so I added it here at the end of the article"}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"nano /etc/mosquitto/conf.d/custom.conf\n"})}),"\n",(0,r.jsx)(t.h4,{id:"changing-the-port",children:"Changing the Port"}),"\n",(0,r.jsxs)(t.p,{children:["E.g. change the listener port from ",(0,r.jsx)(t.code,{children:"1883"})," to ",(0,r.jsx)(t.code,{children:"1885"})," and restart the service:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:"# Port to use for the default listener\r\nlistener 1885\r\n# After copying in the default config this was suddenly set to false - I set it back to true for now\r\nallow_anonymous false\n"})}),"\n",(0,r.jsx)(t.p,{children:"You now have to add the port to every sub & pub:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mosquitto_sub -h localhost -t /hello/world -p 1885\r\nmosquitto_pub -h localhost -t /hello/world -m 'welcome!' -p 1885\n"})}),"\n",(0,r.jsx)(t.h4,{id:"changing-the-user-login",children:"Changing the User Login"}),"\n",(0,r.jsxs)(t.p,{children:["In the following command replace the ",(0,r.jsx)(t.code,{children:"user"})," with your username:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mosquitto_passwd -c passwordfile user\n"})}),"\n",(0,r.jsx)(t.p,{children:"The password tool will ask you for your password and add the user to Mosquitto:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mosquitto_passwd -c passwordfile admin\r\n\r\nPassword: instar\r\nReenter password: instar\n"})}),"\n",(0,r.jsx)(t.h4,{id:"adding-additional-users",children:"Adding additional users"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mosquitto_passwd -b passwordfile user password\n"})}),"\n",(0,r.jsx)(t.h4,{id:"deleting-users",children:"Deleting Users"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mosquitto_passwd -D passwordfile user\n"})}),"\n",(0,r.jsx)(t.h4,{id:"activating-user-auth",children:"Activating User Auth"}),"\n",(0,r.jsxs)(t.p,{children:["Copy the ",(0,r.jsx)(t.code,{children:"passwordfile"})," to where you want to store it:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"cp passwordfile /etc/mosquitto/passwordfile\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Deactivate the anonymous login and add the ",(0,r.jsx)(t.code,{children:"passwordfile"})," path to your Mosquitto config:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"allow_anonymous false\r\npassword_file /etc/mosquitto/passwordfile\n"})}),"\n",(0,r.jsx)(t.p,{children:"Restart the service and try using it with your new user:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mosquitto_sub -h localhost -t /hello/world -p 1885 -u admin -P instar\r\n\r\nmosquitto_pub -h localhost -t /hello/world -m 'welcome!' -p 1885\n"})}),"\n",(0,r.jsx)(t.h4,{id:"access-control-list",children:"Access Control List"}),"\n",(0,r.jsxs)(t.p,{children:["Mosquitto comes with a default ACL file ",(0,r.jsx)(t.code,{children:"cat /etc/mosquitto/aclfile.example"}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:'# This affects access control for clients with no username.\r\ntopic read $SYS/#\r\n\r\n# This only affects clients with username "roger".\r\nuser roger\r\ntopic foo/bar\r\n\r\n# This affects all clients.\r\npattern write $SYS/broker/connection/%c/state\n'})}),"\n",(0,r.jsxs)(t.p,{children:["Copy that file ",(0,r.jsx)(t.code,{children:"cp /etc/mosquitto/aclfile.example /etc/mosquitto/acl.file"})," and add the ",(0,r.jsx)(t.code,{children:"admin"})," user there:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:"user admin\r\ntopic readwrite cameras/#\r\ntopic read $SYS/broker/#\r\ntopic write hello/world\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Now add the ",(0,r.jsx)(t.code,{children:"acl.file"})," file location to your mosquitto config and reload the service ",(0,r.jsx)(t.code,{children:"service mosquitto restart"}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:"# If an auth_plugin is used as well as acl_file, the auth_plugin check will be\r\n# made first.\r\nacl_file /etc/mosquitto/acl.file\n"})}),"\n",(0,r.jsxs)(t.p,{children:["You can now ",(0,r.jsx)(t.strong,{children:"read & write"})," all topics starting with ",(0,r.jsx)(t.code,{children:"cameras/"}),", ",(0,r.jsx)(t.strong,{children:"only read"})," broker status topics ",(0,r.jsx)(t.code,{children:"$SYS/broker/"})," and only write to ",(0,r.jsx)(t.code,{children:"hello/world"}),"."]}),"\n",(0,r.jsx)(t.h2,{id:"publish--subscribe",children:"Publish & Subscribe"}),"\n",(0,r.jsx)(t.h3,{id:"pub-flags",children:"Pub Flags"}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:"mosquitto_pub -h host -t topic \u2013m message"}),"\n"]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"-r"})," : Sets retain flag"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"-n"})," : Sends Null message useful for clearing retain message."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"-p"})," : Set Port number Default is 1883"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"-u"})," : Provide a username"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"-P"})," : Provide a password"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"-i"})," : Provide client name"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"-I"})," : Provide a client id prefix- Used when testing client restrictions using prefix\r\nsecurity."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"-q"})," : QoS Specify the quality of service to use for the message, from 0, 1 and 2.\r\nDefaults to 0"]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"sub-flags",children:"Sub Flags"}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:"mosquitto_sub -h host -t topic"}),"\n"]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"-p"})," : Set Port number Default is 1883"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"-u"})," : Provide a username"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"-P"})," : Provide a password"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"-i"})," : Provide client name"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"-I"})," : Provide a client id prefix- Used when testing client restrictions using prefix\r\nsecurity"]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"debugging",children:"Debugging"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mosquitto_sub -h localhost -t /hello/world -d\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mosquitto_pub -h localhost -t /hello/world -m 'welcome!' -d\r\n\r\nClient (null) sending CONNECT\r\nClient (null) received CONNACK (0)\r\nClient (null) sending PUBLISH (d0, q0, r0, m1, '/hello/world', ... (8 bytes))\r\nClient (null) sending DISCONNECT\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Publish Parameter"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"d0 / d1"}),(0,r.jsx)(t.td,{children:"DUP flag *"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"q0 - q2"}),(0,r.jsx)(t.td,{children:"QoS 0-2"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"r0 / r1"}),(0,r.jsx)(t.td,{children:"Retained"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"m0 / m1"}),(0,r.jsx)(t.td,{children:"Message Payload"})]})]})]}),"\n",(0,r.jsxs)(t.p,{children:["* If the ",(0,r.jsx)(t.a,{href:"https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901102",children:"DUP flag"})," is set to 0, it indicates that this is the first occasion that the Client or Server has attempted to send this PUBLISH packet. If the DUP flag is set to 1, it indicates that this might be re-delivery of an earlier attempt to send the packet."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mosquitto_sub -h localhost -t /hello/world -d\r\n\r\nClient (null) sending CONNECT\r\nClient (null) received CONNACK (0)\r\nClient (null) sending SUBSCRIBE (Mid: 1, Topic: /hello/world, QoS: 0, Options: 0x00)\r\nClient (null) received SUBACK\r\nSubscribed (mid: 1): 0\r\nClient (null) received PUBLISH (d0, q0, r0, m0, '/hello/world', ... (8 bytes))\r\nwelcome!\n"})}),"\n",(0,r.jsx)(t.h3,{id:"retaining",children:"Retaining"}),"\n",(0,r.jsx)(t.p,{children:"If you send an update and then subscribe to the topic afterwards you will not receive the update:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mosquitto_pub -h localhost -t /hello/world -m 'welcome!'\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mosquitto_sub -h localhost -t /#\r\n\r\n<no messages>\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Unlesss the update was send with the ",(0,r.jsx)(t.code,{children:"retained"})," flag:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mosquitto_pub -h localhost -t /hello/world -m 'welcome!' -r\n"})}),"\n",(0,r.jsx)(t.p,{children:"Re-run the subscription and you will see the retained message:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mosquitto_sub -h localhost -t /#\r\n\r\nClient (null) sending CONNECT\r\nClient (null) received CONNACK (0)\r\nClient (null) sending SUBSCRIBE (Mid: 1, Topic: /#, QoS: 0, Options: 0x00)\r\nClient (null) received SUBACK\r\nSubscribed (mid: 1): 0\r\nClient (null) received PUBLISH (d0, q0, r1, m0, '/hello/world', ... (8 bytes))\r\nwelcome!\n"})}),"\n",(0,r.jsx)(t.h4,{id:"clearing-retained-topics",children:"Clearing Retained Topics"}),"\n",(0,r.jsxs)(t.p,{children:["To clear (null) a retained topic use the ",(0,r.jsx)(t.code,{children:"-n"})," flag"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mosquitto_pub -h localhost -t /hello/world -d -n\r\n\r\nClient (null) sending CONNECT\r\nClient (null) received CONNACK (0)\r\nClient (null) sending PUBLISH (d0, q0, r0, m1, '/hello/world', ... (0 bytes))\r\nClient (null) sending DISCONNECT\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Your subscriber will now set the topic from ",(0,r.jsx)(t.code,{children:"r1"})," to ",(0,r.jsx)(t.code,{children:"r0"}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mosquitto_sub -h localhost -t /# -d\r\n\r\nClient (null) sending CONNECT\r\nClient (null) received CONNACK (0)\r\nClient (null) sending SUBSCRIBE (Mid: 1, Topic: /#, QoS: 0, Options: 0x00)\r\nClient (null) received SUBACK\r\nSubscribed (mid: 1): 0\r\nClient (null) received PUBLISH (d0, q0, r1, m0, '/hello/world', ... (8 bytes))\r\nwelcome!\r\nClient (null) received PUBLISH (d0, q0, r0, m0, '/hello/world', ... (0 bytes))\n"})}),"\n",(0,r.jsx)(t.h3,{id:"quality-of-service",children:"Quality-of-Service"}),"\n",(0,r.jsx)(t.h4,{id:"qos-0",children:"QoS 0"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Fire&Forget"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mosquitto_pub -h localhost -t /hello/world -m 'welcome!' -d -q 0\r\n\r\nClient (null) sending CONNECT\r\nClient (null) received CONNACK (0)\r\nClient (null) sending PUBLISH (d0, q0, r0, m1, '/hello/world', ... (8 bytes))\r\nClient (null) sending DISCONNECT\n"})}),"\n",(0,r.jsx)(t.h4,{id:"qos-1",children:"QoS 1"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Every Subscriber will Receive the Update"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mosquitto_pub -h localhost -t /hello/world -m 'welcome!' -d -q 1\r\n\r\nClient (null) sending CONNECT\r\nClient (null) received CONNACK (0)\r\nClient (null) sending PUBLISH (d0, q1, r0, m1, '/hello/world', ... (8 bytes))\r\nClient (null) received PUBACK (Mid: 1, RC:0)\r\nClient (null) sending DISCONNECT\n"})}),"\n",(0,r.jsx)(t.h4,{id:"qos-2",children:"QoS 2"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Every Subscriber will Receive the Update exactly one time!"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mosquitto_pub -h localhost -t /hello/world -m 'welcome!' -d -q 2\r\n\r\nClient (null) sending CONNECT\r\nClient (null) received CONNACK (0)\r\nClient (null) sending PUBLISH (d0, q2, r0, m1, '/hello/world', ... (8 bytes))\r\nClient (null) received PUBREC (Mid: 1)\r\nClient (null) sending PUBREL (m1)\r\nClient (null) received PUBCOMP (Mid: 1, RC:0)\r\nClient (null) sending DISCONNECT\n"})}),"\n",(0,r.jsxs)(t.p,{children:["The receiver always receives the update with ",(0,r.jsx)(t.code,{children:"q0"})," - you need to run your subscription with the ",(0,r.jsx)(t.code,{children:"q1"})," or ",(0,r.jsx)(t.code,{children:"q2"})," flag (",(0,r.jsx)(t.strong,{children:"why is that?"}),"). Se below - I published the update 3 times with different QoS values:"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"q0"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mosquitto_sub -h localhost -t /# -d\r\n\r\nClient (null) received PUBLISH (d0, q0, r0, m0, '/hello/world', ... (8 bytes))\r\nwelcome!\r\nClient (null) received PUBLISH (d0, q0, r0, m0, '/hello/world', ... (8 bytes))\r\nwelcome!\r\nClient (null) received PUBLISH (d0, q0, r0, m0, '/hello/world', ... (8 bytes))\r\nwelcome!\n"})}),"\n",(0,r.jsxs)(t.p,{children:["If I redo the ",(0,r.jsx)(t.code,{children:"q2"})," publish but make sure that the receiver is also set to ",(0,r.jsx)(t.code,{children:"q2"}),":"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"q2"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mosquitto_pub -h localhost -t /hello/world -m 'welcome!' -q 2\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"mosquitto_sub -h localhost -t /# -d -q 2\r\n\r\nClient (null) received PUBLISH (d0, q2, r0, m1, '/hello/world', ... (8 bytes))\r\nClient (null) sending PUBREC (m1, rc0)\r\nClient (null) received PUBREL (Mid: 1)\r\nClient (null) sending PUBCOMP (m1)\r\nwelcome!\n"})}),"\n",(0,r.jsx)(t.h3,{id:"client-name",children:"Client Name"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mosquitto_pub -h localhost -t /hello/world -m 'welcome!' -i 'MosquittoPub' -d\r\n\r\nClient MosquittoPub sending CONNECT\r\nClient MosquittoPub received CONNACK (0)\r\nClient MosquittoPub sending PUBLISH (d0, q0, r0, m1, '/hello/world', ... (8 bytes))\r\nClient MosquittoPub sending DISCONNEC\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mosquitto_sub -h localhost -t /# -d -i 'MosquittoSub'\r\n\r\nClient MosquittoSub sending CONNECT\r\nClient MosquittoSub received CONNACK (0)\r\nClient MosquittoSub sending SUBSCRIBE (Mid: 1, Topic: /#, QoS: 0, Options: 0x00)\r\nClient MosquittoSub received SUBACK\r\nSubscribed (mid: 1): 0\r\nClient MosquittoSub received PUBLISH (d0, q0, r0, m0, '/hello/world', ... (8 bytes))\r\nwelcome!\n"})}),"\n",(0,r.jsx)(t.h3,{id:"wildcards",children:"Wildcards"}),"\n",(0,r.jsx)(t.p,{children:"Receiving the the measurements of different sensors with a single subscription:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"sensors/altimeter1/altitude"}),"\n",(0,r.jsx)(t.li,{children:"sensors/altimeter2/altitude"}),"\n",(0,r.jsx)(t.li,{children:"sensors/altimeter3/altitude"}),"\n",(0,r.jsx)(t.li,{children:"sensors/altimeter4/altitude"}),"\n"]}),"\n",(0,r.jsx)(t.h4,{id:"plus",children:"Plus"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mosquitto_sub -h localhost -t sensors/+/altitude -v\r\n\r\nsensors/altimeter1/altitude 200\r\nsensors/altimeter2/altitude 201\r\nsensors/altimeter3/altitude 199\r\nsensors/altimeter4/altitude 198\n"})}),"\n",(0,r.jsx)(t.h4,{id:"hash",children:"Hash"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mosquitto_sub -h localhost -t sensors/# -v\r\n\r\nsensors/altimeter1/operation active\r\nsensors/altimeter1/status green\r\nsensors/altimeter1/altitude 200\r\nsensors/altimeter2/operation active\r\nsensors/altimeter2/status green\r\nsensors/altimeter2/altitude 201\r\nsensors/altimeter3/operation active\r\nsensors/altimeter3/status green\r\nsensors/altimeter3/altitude 199\r\nsensors/altimeter4/operation active\r\nsensors/altimeter4/status green\r\nsensors/altimeter4/altitude 198\n"})}),"\n",(0,r.jsx)(t.h2,{id:"default-mosquittoconf",children:"Default mosquitto.conf"}),"\n",(0,r.jsxs)(t.p,{children:["This file contains the default values for the Mosquitto (v.2.0.11) configuration. Copy it to ",(0,r.jsx)(t.code,{children:"/etc/mosquitto/conf.d/custom.conf"})," and modify the values you need to change:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cfg",children:'# Config file for mosquitto\r\n#\r\n# See mosquitto.conf(5) for more information.\r\n#\r\n# Default values are shown, uncomment to change.\r\n#\r\n# Use the # character to indicate a comment, but only if it is the\r\n# very first character on the line.\r\n\r\n# =================================================================\r\n# General configuration\r\n# =================================================================\r\n\r\n# Use per listener security settings.\r\n#\r\n# It is recommended this option be set before any other options.\r\n#\r\n# If this option is set to true, then all authentication and access control\r\n# options are controlled on a per listener basis. The following options are\r\n# affected:\r\n#\r\n# password_file acl_file psk_file auth_plugin auth_opt_* allow_anonymous\r\n# auto_id_prefix allow_zero_length_clientid\r\n#\r\n# Note that if set to true, then a durable client (i.e. with clean session set\r\n# to false) that has disconnected will use the ACL settings defined for the\r\n# listener that it was most recently connected to.\r\n#\r\n# The default behaviour is for this to be set to false, which maintains the\r\n# setting behaviour from previous versions of mosquitto.\r\n#per_listener_settings false\r\n\r\n\r\n# This option controls whether a client is allowed to connect with a zero\r\n# length client id or not. This option only affects clients using MQTT v3.1.1\r\n# and later. If set to false, clients connecting with a zero length client id\r\n# are disconnected. If set to true, clients will be allocated a client id by\r\n# the broker. This means it is only useful for clients with clean session set\r\n# to true.\r\n#allow_zero_length_clientid true\r\n\r\n# If allow_zero_length_clientid is true, this option allows you to set a prefix\r\n# to automatically generated client ids to aid visibility in logs.\r\n# Defaults to \'auto-\'\r\n#auto_id_prefix auto-\r\n\r\n# This option affects the scenario when a client subscribes to a topic that has\r\n# retained messages. It is possible that the client that published the retained\r\n# message to the topic had access at the time they published, but that access\r\n# has been subsequently removed. If check_retain_source is set to true, the\r\n# default, the source of a retained message will be checked for access rights\r\n# before it is republished. When set to false, no check will be made and the\r\n# retained message will always be published. This affects all listeners.\r\n#check_retain_source true\r\n\r\n# QoS 1 and 2 messages will be allowed inflight per client until this limit\r\n# is exceeded.  Defaults to 0. (No maximum)\r\n# See also max_inflight_messages\r\n#max_inflight_bytes 0\r\n\r\n# The maximum number of QoS 1 and 2 messages currently inflight per\r\n# client.\r\n# This includes messages that are partway through handshakes and\r\n# those that are being retried. Defaults to 20. Set to 0 for no\r\n# maximum. Setting to 1 will guarantee in-order delivery of QoS 1\r\n# and 2 messages.\r\n#max_inflight_messages 20\r\n\r\n# For MQTT v5 clients, it is possible to have the server send a "server\r\n# keepalive" value that will override the keepalive value set by the client.\r\n# This is intended to be used as a mechanism to say that the server will\r\n# disconnect the client earlier than it anticipated, and that the client should\r\n# use the new keepalive value. The max_keepalive option allows you to specify\r\n# that clients may only connect with keepalive less than or equal to this\r\n# value, otherwise they will be sent a server keepalive telling them to use\r\n# max_keepalive. This only applies to MQTT v5 clients. The maximum value\r\n# allowable is 65535. Do not set below 10.\r\n#max_keepalive 65535\r\n\r\n# For MQTT v5 clients, it is possible to have the server send a "maximum packet\r\n# size" value that will instruct the client it will not accept MQTT packets\r\n# with size greater than max_packet_size bytes. This applies to the full MQTT\r\n# packet, not just the payload. Setting this option to a positive value will\r\n# set the maximum packet size to that number of bytes. If a client sends a\r\n# packet which is larger than this value, it will be disconnected. This applies\r\n# to all clients regardless of the protocol version they are using, but v3.1.1\r\n# and earlier clients will of course not have received the maximum packet size\r\n# information. Defaults to no limit. Setting below 20 bytes is forbidden\r\n# because it is likely to interfere with ordinary client operation, even with\r\n# very small payloads.\r\n#max_packet_size 0\r\n\r\n# QoS 1 and 2 messages above those currently in-flight will be queued per\r\n# client until this limit is exceeded.  Defaults to 0. (No maximum)\r\n# See also max_queued_messages.\r\n# If both max_queued_messages and max_queued_bytes are specified, packets will\r\n# be queued until the first limit is reached.\r\n#max_queued_bytes 0\r\n\r\n# Set the maximum QoS supported. Clients publishing at a QoS higher than\r\n# specified here will be disconnected.\r\n#max_qos 2\r\n\r\n# The maximum number of QoS 1 and 2 messages to hold in a queue per client\r\n# above those that are currently in-flight.  Defaults to 1000. Set\r\n# to 0 for no maximum (not recommended).\r\n# See also queue_qos0_messages.\r\n# See also max_queued_bytes.\r\n#max_queued_messages 1000\r\n#\r\n# This option sets the maximum number of heap memory bytes that the broker will\r\n# allocate, and hence sets a hard limit on memory use by the broker.  Memory\r\n# requests that exceed this value will be denied. The effect will vary\r\n# depending on what has been denied. If an incoming message is being processed,\r\n# then the message will be dropped and the publishing client will be\r\n# disconnected. If an outgoing message is being sent, then the individual\r\n# message will be dropped and the receiving client will be disconnected.\r\n# Defaults to no limit.\r\n#memory_limit 0\r\n\r\n# This option sets the maximum publish payload size that the broker will allow.\r\n# Received messages that exceed this size will not be accepted by the broker.\r\n# The default value is 0, which means that all valid MQTT messages are\r\n# accepted. MQTT imposes a maximum payload size of 268435455 bytes.\r\n#message_size_limit 0\r\n\r\n# This option allows persistent clients (those with clean session set to false)\r\n# to be removed if they do not reconnect within a certain time frame.\r\n#\r\n# This is a non-standard option in MQTT V3.1 but allowed in MQTT v3.1.1.\r\n#\r\n# Badly designed clients may set clean session to false whilst using a randomly\r\n# generated client id. This leads to persistent clients that will never\r\n# reconnect. This option allows these clients to be removed.\r\n#\r\n# The expiration period should be an integer followed by one of h d w m y for\r\n# hour, day, week, month and year respectively. For example\r\n#\r\n# persistent_client_expiration 2m\r\n# persistent_client_expiration 14d\r\n# persistent_client_expiration 1y\r\n#\r\n# The default if not set is to never expire persistent clients.\r\n#persistent_client_expiration\r\n\r\n# Write process id to a file. Default is a blank string which means\r\n# a pid file shouldn\'t be written.\r\n# This should be set to /var/run/mosquitto/mosquitto.pid if mosquitto is\r\n# being run automatically on boot with an init script and\r\n# start-stop-daemon or similar.\r\n#pid_file\r\n\r\n# Set to true to queue messages with QoS 0 when a persistent client is\r\n# disconnected. These messages are included in the limit imposed by\r\n# max_queued_messages and max_queued_bytes\r\n# Defaults to false.\r\n# This is a non-standard option for the MQTT v3.1 spec but is allowed in\r\n# v3.1.1.\r\n#queue_qos0_messages false\r\n\r\n# Set to false to disable retained message support. If a client publishes a\r\n# message with the retain bit set, it will be disconnected if this is set to\r\n# false.\r\n#retain_available true\r\n\r\n# Disable Nagle\'s algorithm on client sockets. This has the effect of reducing\r\n# latency of individual messages at the potential cost of increasing the number\r\n# of packets being sent.\r\n#set_tcp_nodelay false\r\n\r\n# Time in seconds between updates of the $SYS tree.\r\n# Set to 0 to disable the publishing of the $SYS tree.\r\n#sys_interval 10\r\n\r\n# The MQTT specification requires that the QoS of a message delivered to a\r\n# subscriber is never upgraded to match the QoS of the subscription. Enabling\r\n# this option changes this behaviour. If upgrade_outgoing_qos is set true,\r\n# messages sent to a subscriber will always match the QoS of its subscription.\r\n# This is a non-standard option explicitly disallowed by the spec.\r\n#upgrade_outgoing_qos false\r\n\r\n# When run as root, drop privileges to this user and its primary\r\n# group.\r\n# Set to root to stay as root, but this is not recommended.\r\n# If set to "mosquitto", or left unset, and the "mosquitto" user does not exist\r\n# then it will drop privileges to the "nobody" user instead.\r\n# If run as a non-root user, this setting has no effect.\r\n# Note that on Windows this has no effect and so mosquitto should be started by\r\n# the user you wish it to run as.\r\n#user mosquitto\r\n\r\n# =================================================================\r\n# Listeners\r\n# =================================================================\r\n\r\n# Listen on a port/ip address combination. By using this variable\r\n# multiple times, mosquitto can listen on more than one port. If\r\n# this variable is used and neither bind_address nor port given,\r\n# then the default listener will not be started.\r\n# The port number to listen on must be given. Optionally, an ip\r\n# address or host name may be supplied as a second argument. In\r\n# this case, mosquitto will attempt to bind the listener to that\r\n# address and so restrict access to the associated network and\r\n# interface. By default, mosquitto will listen on all interfaces.\r\n# Note that for a websockets listener it is not possible to bind to a host\r\n# name.\r\n#\r\n# On systems that support Unix Domain Sockets, it is also possible\r\n# to create a # Unix socket rather than opening a TCP socket. In\r\n# this case, the port number should be set to 0 and a unix socket\r\n# path must be provided, e.g.\r\n# listener 0 /tmp/mosquitto.sock\r\n#\r\n# listener port-number [ip address/host name/unix socket path]\r\n#listener\r\n\r\n# By default, a listener will attempt to listen on all supported IP protocol\r\n# versions. If you do not have an IPv4 or IPv6 interface you may wish to\r\n# disable support for either of those protocol versions. In particular, note\r\n# that due to the limitations of the websockets library, it will only ever\r\n# attempt to open IPv6 sockets if IPv6 support is compiled in, and so will fail\r\n# if IPv6 is not available.\r\n#\r\n# Set to `ipv4` to force the listener to only use IPv4, or set to `ipv6` to\r\n# force the listener to only use IPv6. If you want support for both IPv4 and\r\n# IPv6, then do not use the socket_domain option.\r\n#\r\n#socket_domain\r\n\r\n# Bind the listener to a specific interface. This is similar to\r\n# the [ip address/host name] part of the listener definition, but is useful\r\n# when an interface has multiple addresses or the address may change. If used\r\n# with the [ip address/host name] part of the listener definition, then the\r\n# bind_interface option will take priority.\r\n# Not available on Windows.\r\n#\r\n# Example: bind_interface eth0\r\n#bind_interface\r\n\r\n# When a listener is using the websockets protocol, it is possible to serve\r\n# http data as well. Set http_dir to a directory which contains the files you\r\n# wish to serve. If this option is not specified, then no normal http\r\n# connections will be possible.\r\n#http_dir\r\n\r\n# The maximum number of client connections to allow. This is\r\n# a per listener setting.\r\n# Default is -1, which means unlimited connections.\r\n# Note that other process limits mean that unlimited connections\r\n# are not really possible. Typically the default maximum number of\r\n# connections possible is around 1024.\r\n#max_connections -1\r\n\r\n# The listener can be restricted to operating within a topic hierarchy using\r\n# the mount_point option. This is achieved be prefixing the mount_point string\r\n# to all topics for any clients connected to this listener. This prefixing only\r\n# happens internally to the broker; the client will not see the prefix.\r\n#mount_point\r\n\r\n# Choose the protocol to use when listening.\r\n# This can be either mqtt or websockets.\r\n# Certificate based TLS may be used with websockets, except that only the\r\n# cafile, certfile, keyfile, ciphers, and ciphers_tls13 options are supported.\r\n#protocol mqtt\r\n\r\n# Set use_username_as_clientid to true to replace the clientid that a client\r\n# connected with with its username. This allows authentication to be tied to\r\n# the clientid, which means that it is possible to prevent one client\r\n# disconnecting another by using the same clientid.\r\n# If a client connects with no username it will be disconnected as not\r\n# authorised when this option is set to true.\r\n# Do not use in conjunction with clientid_prefixes.\r\n# See also use_identity_as_username.\r\n#use_username_as_clientid\r\n\r\n# Change the websockets headers size. This is a global option, it is not\r\n# possible to set per listener. This option sets the size of the buffer used in\r\n# the libwebsockets library when reading HTTP headers. If you are passing large\r\n# header data such as cookies then you may need to increase this value. If left\r\n# unset, or set to 0, then the default of 1024 bytes will be used.\r\n#websockets_headers_size\r\n\r\n# -----------------------------------------------------------------\r\n# Certificate based SSL/TLS support\r\n# -----------------------------------------------------------------\r\n# The following options can be used to enable certificate based SSL/TLS support\r\n# for this listener. Note that the recommended port for MQTT over TLS is 8883,\r\n# but this must be set manually.\r\n#\r\n# See also the mosquitto-tls man page and the "Pre-shared-key based SSL/TLS\r\n# support" section. Only one of certificate or PSK encryption support can be\r\n# enabled for any listener.\r\n\r\n# Both of certfile and keyfile must be defined to enable certificate based\r\n# TLS encryption.\r\n\r\n# Path to the PEM encoded server certificate.\r\n#certfile\r\n\r\n# Path to the PEM encoded keyfile.\r\n#keyfile\r\n\r\n# If you wish to control which encryption ciphers are used, use the ciphers\r\n# option. The list of available ciphers can be optained using the "openssl\r\n# ciphers" command and should be provided in the same format as the output of\r\n# that command. This applies to TLS 1.2 and earlier versions only. Use\r\n# ciphers_tls1.3 for TLS v1.3.\r\n#ciphers\r\n\r\n# Choose which TLS v1.3 ciphersuites are used for this listener.\r\n# Defaults to "TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256"\r\n#ciphers_tls1.3\r\n\r\n# If you have require_certificate set to true, you can create a certificate\r\n# revocation list file to revoke access to particular client certificates. If\r\n# you have done this, use crlfile to point to the PEM encoded revocation file.\r\n#crlfile\r\n\r\n# To allow the use of ephemeral DH key exchange, which provides forward\r\n# security, the listener must load DH parameters. This can be specified with\r\n# the dhparamfile option. The dhparamfile can be generated with the command\r\n# e.g. "openssl dhparam -out dhparam.pem 2048"\r\n#dhparamfile\r\n\r\n# By default an TLS enabled listener will operate in a similar fashion to a\r\n# https enabled web server, in that the server has a certificate signed by a CA\r\n# and the client will verify that it is a trusted certificate. The overall aim\r\n# is encryption of the network traffic. By setting require_certificate to true,\r\n# the client must provide a valid certificate in order for the network\r\n# connection to proceed. This allows access to the broker to be controlled\r\n# outside of the mechanisms provided by MQTT.\r\n#require_certificate false\r\n\r\n# cafile and capath define methods of accessing the PEM encoded\r\n# Certificate Authority certificates that will be considered trusted when\r\n# checking incoming client certificates.\r\n# cafile defines the path to a file containing the CA certificates.\r\n# capath defines a directory that will be searched for files\r\n# containing the CA certificates. For capath to work correctly, the\r\n# certificate files must have ".crt" as the file ending and you must run\r\n# "openssl rehash <path to capath>" each time you add/remove a certificate.\r\n#cafile\r\n#capath\r\n\r\n\r\n# If require_certificate is true, you may set use_identity_as_username to true\r\n# to use the CN value from the client certificate as a username. If this is\r\n# true, the password_file option will not be used for this listener.\r\n#use_identity_as_username false\r\n\r\n# -----------------------------------------------------------------\r\n# Pre-shared-key based SSL/TLS support\r\n# -----------------------------------------------------------------\r\n# The following options can be used to enable PSK based SSL/TLS support for\r\n# this listener. Note that the recommended port for MQTT over TLS is 8883, but\r\n# this must be set manually.\r\n#\r\n# See also the mosquitto-tls man page and the "Certificate based SSL/TLS\r\n# support" section. Only one of certificate or PSK encryption support can be\r\n# enabled for any listener.\r\n\r\n# The psk_hint option enables pre-shared-key support for this listener and also\r\n# acts as an identifier for this listener. The hint is sent to clients and may\r\n# be used locally to aid authentication. The hint is a free form string that\r\n# doesn\'t have much meaning in itself, so feel free to be creative.\r\n# If this option is provided, see psk_file to define the pre-shared keys to be\r\n# used or create a security plugin to handle them.\r\n#psk_hint\r\n\r\n# When using PSK, the encryption ciphers used will be chosen from the list of\r\n# available PSK ciphers. If you want to control which ciphers are available,\r\n# use the "ciphers" option.  The list of available ciphers can be optained\r\n# using the "openssl ciphers" command and should be provided in the same format\r\n# as the output of that command.\r\n#ciphers\r\n\r\n# Set use_identity_as_username to have the psk identity sent by the client used\r\n# as its username. Authentication will be carried out using the PSK rather than\r\n# the MQTT username/password and so password_file will not be used for this\r\n# listener.\r\n#use_identity_as_username false\r\n\r\n\r\n# =================================================================\r\n# Persistence\r\n# =================================================================\r\n\r\n# If persistence is enabled, save the in-memory database to disk\r\n# every autosave_interval seconds. If set to 0, the persistence\r\n# database will only be written when mosquitto exits. See also\r\n# autosave_on_changes.\r\n# Note that writing of the persistence database can be forced by\r\n# sending mosquitto a SIGUSR1 signal.\r\n#autosave_interval 1800\r\n\r\n# If true, mosquitto will count the number of subscription changes, retained\r\n# messages received and queued messages and if the total exceeds\r\n# autosave_interval then the in-memory database will be saved to disk.\r\n# If false, mosquitto will save the in-memory database to disk by treating\r\n# autosave_interval as a time in seconds.\r\n#autosave_on_changes false\r\n\r\n# Save persistent message data to disk (true/false).\r\n# This saves information about all messages, including\r\n# subscriptions, currently in-flight messages and retained\r\n# messages.\r\n# retained_persistence is a synonym for this option.\r\n#persistence false\r\n\r\n# The filename to use for the persistent database, not including\r\n# the path.\r\n#persistence_file mosquitto.db\r\n\r\n# Location for persistent database.\r\n# Default is an empty string (current directory).\r\n# Set to e.g. /var/lib/mosquitto if running as a proper service on Linux or\r\n# similar.\r\n#persistence_location\r\n\r\n\r\n# =================================================================\r\n# Logging\r\n# =================================================================\r\n\r\n# Places to log to. Use multiple log_dest lines for multiple\r\n# logging destinations.\r\n# Possible destinations are: stdout stderr syslog topic file dlt\r\n#\r\n# stdout and stderr log to the console on the named output.\r\n#\r\n# syslog uses the userspace syslog facility which usually ends up\r\n# in /var/log/messages or similar.\r\n#\r\n# topic logs to the broker topic \'$SYS/broker/log/<severity>\',\r\n# where severity is one of D, E, W, N, I, M which are debug, error,\r\n# warning, notice, information and message. Message type severity is used by\r\n# the subscribe/unsubscribe log_types and publishes log messages to\r\n# $SYS/broker/log/M/susbcribe or $SYS/broker/log/M/unsubscribe.\r\n#\r\n# The file destination requires an additional parameter which is the file to be\r\n# logged to, e.g. "log_dest file /var/log/mosquitto.log". The file will be\r\n# closed and reopened when the broker receives a HUP signal. Only a single file\r\n# destination may be configured.\r\n#\r\n# The dlt destination is for the automotive `Diagnostic Log and Trace` tool.\r\n# This requires that Mosquitto has been compiled with DLT support.\r\n#\r\n# Note that if the broker is running as a Windows service it will default to\r\n# "log_dest none" and neither stdout nor stderr logging is available.\r\n# Use "log_dest none" if you wish to disable logging.\r\n#log_dest stderr\r\n\r\n# Types of messages to log. Use multiple log_type lines for logging\r\n# multiple types of messages.\r\n# Possible types are: debug, error, warning, notice, information,\r\n# none, subscribe, unsubscribe, websockets, all.\r\n# Note that debug type messages are for decoding the incoming/outgoing\r\n# network packets. They are not logged in "topics".\r\n#log_type error\r\n#log_type warning\r\n#log_type notice\r\n#log_type information\r\n\r\n\r\n# If set to true, client connection and disconnection messages will be included\r\n# in the log.\r\n#connection_messages true\r\n\r\n# If using syslog logging (not on Windows), messages will be logged to the\r\n# "daemon" facility by default. Use the log_facility option to choose which of\r\n# local0 to local7 to log to instead. The option value should be an integer\r\n# value, e.g. "log_facility 5" to use local5.\r\n#log_facility\r\n\r\n# If set to true, add a timestamp value to each log message.\r\n#log_timestamp true\r\n\r\n# Set the format of the log timestamp. If left unset, this is the number of\r\n# seconds since the Unix epoch.\r\n# This is a free text string which will be passed to the strftime function. To\r\n# get an ISO 8601 datetime, for example:\r\n# log_timestamp_format %Y-%m-%dT%H:%M:%S\r\n#log_timestamp_format\r\n\r\n# Change the websockets logging level. This is a global option, it is not\r\n# possible to set per listener. This is an integer that is interpreted by\r\n# libwebsockets as a bit mask for its lws_log_levels enum. See the\r\n# libwebsockets documentation for more details. "log_type websockets" must also\r\n# be enabled.\r\n#websockets_log_level 0\r\n\r\n\r\n# =================================================================\r\n# Security\r\n# =================================================================\r\n\r\n# If set, only clients that have a matching prefix on their\r\n# clientid will be allowed to connect to the broker. By default,\r\n# all clients may connect.\r\n# For example, setting "secure-" here would mean a client "secure-\r\n# client" could connect but another with clientid "mqtt" couldn\'t.\r\n#clientid_prefixes\r\n\r\n# Boolean value that determines whether clients that connect\r\n# without providing a username are allowed to connect. If set to\r\n# false then a password file should be created (see the\r\n# password_file option) to control authenticated client access.\r\n#\r\n# Defaults to false, unless there are no listeners defined in the configuration\r\n# file, in which case it is set to true, but connections are only allowed from\r\n# the local machine.\r\n#allow_anonymous false\r\n\r\n# -----------------------------------------------------------------\r\n# Default authentication and topic access control\r\n# -----------------------------------------------------------------\r\n\r\n# Control access to the broker using a password file. This file can be\r\n# generated using the mosquitto_passwd utility. If TLS support is not compiled\r\n# into mosquitto (it is recommended that TLS support should be included) then\r\n# plain text passwords are used, in which case the file should be a text file\r\n# with lines in the format:\r\n# username:password\r\n# The password (and colon) may be omitted if desired, although this\r\n# offers very little in the way of security.\r\n#\r\n# See the TLS client require_certificate and use_identity_as_username options\r\n# for alternative authentication options. If an auth_plugin is used as well as\r\n# password_file, the auth_plugin check will be made first.\r\n#password_file\r\n\r\n# Access may also be controlled using a pre-shared-key file. This requires\r\n# TLS-PSK support and a listener configured to use it. The file should be text\r\n# lines in the format:\r\n# identity:key\r\n# The key should be in hexadecimal format without a leading "0x".\r\n# If an auth_plugin is used as well, the auth_plugin check will be made first.\r\n#psk_file\r\n\r\n# Control access to topics on the broker using an access control list\r\n# file. If this parameter is defined then only the topics listed will\r\n# have access.\r\n# If the first character of a line of the ACL file is a # it is treated as a\r\n# comment.\r\n# Topic access is added with lines of the format:\r\n#\r\n# topic [read|write|readwrite|deny] <topic>\r\n#\r\n# The access type is controlled using "read", "write", "readwrite" or "deny".\r\n# This parameter is optional (unless <topic> contains a space character) - if\r\n# not given then the access is read/write.  <topic> can contain the + or #\r\n# wildcards as in subscriptions.\r\n#\r\n# The "deny" option can used to explicity deny access to a topic that would\r\n# otherwise be granted by a broader read/write/readwrite statement. Any "deny"\r\n# topics are handled before topics that grant read/write access.\r\n#\r\n# The first set of topics are applied to anonymous clients, assuming\r\n# allow_anonymous is true. User specific topic ACLs are added after a\r\n# user line as follows:\r\n#\r\n# user <username>\r\n#\r\n# The username referred to here is the same as in password_file. It is\r\n# not the clientid.\r\n#\r\n#\r\n# If is also possible to define ACLs based on pattern substitution within the\r\n# topic. The patterns available for substition are:\r\n#\r\n# %c to match the client id of the client\r\n# %u to match the username of the client\r\n#\r\n# The substitution pattern must be the only text for that level of hierarchy.\r\n#\r\n# The form is the same as for the topic keyword, but using pattern as the\r\n# keyword.\r\n# Pattern ACLs apply to all users even if the "user" keyword has previously\r\n# been given.\r\n#\r\n# If using bridges with usernames and ACLs, connection messages can be allowed\r\n# with the following pattern:\r\n# pattern write $SYS/broker/connection/%c/state\r\n#\r\n# pattern [read|write|readwrite] <topic>\r\n#\r\n# Example:\r\n#\r\n# pattern write sensor/%u/data\r\n#\r\n# If an auth_plugin is used as well as acl_file, the auth_plugin check will be\r\n# made first.\r\n#acl_file\r\n\r\n# -----------------------------------------------------------------\r\n# External authentication and topic access plugin options\r\n# -----------------------------------------------------------------\r\n\r\n# External authentication and access control can be supported with the\r\n# auth_plugin option. This is a path to a loadable plugin. See also the\r\n# auth_opt_* options described below.\r\n#\r\n# The auth_plugin option can be specified multiple times to load multiple\r\n# plugins. The plugins will be processed in the order that they are specified\r\n# here. If the auth_plugin option is specified alongside either of\r\n# password_file or acl_file then the plugin checks will be made first.\r\n#\r\n#auth_plugin\r\n\r\n# If the auth_plugin option above is used, define options to pass to the\r\n# plugin here as described by the plugin instructions. All options named\r\n# using the format auth_opt_* will be passed to the plugin, for example:\r\n#\r\n# auth_opt_db_host\r\n# auth_opt_db_port\r\n# auth_opt_db_username\r\n# auth_opt_db_password\r\n\r\n\r\n# =================================================================\r\n# Bridges\r\n# =================================================================\r\n\r\n# A bridge is a way of connecting multiple MQTT brokers together.\r\n# Create a new bridge using the "connection" option as described below. Set\r\n# options for the bridges using the remaining parameters. You must specify the\r\n# address and at least one topic to subscribe to.\r\n#\r\n# Each connection must have a unique name.\r\n#\r\n# The address line may have multiple host address and ports specified. See\r\n# below in the round_robin description for more details on bridge behaviour if\r\n# multiple addresses are used. Note that if you use an IPv6 address, then you\r\n# are required to specify a port.\r\n#\r\n# The direction that the topic will be shared can be chosen by\r\n# specifying out, in or both, where the default value is out.\r\n# The QoS level of the bridged communication can be specified with the next\r\n# topic option. The default QoS level is 0, to change the QoS the topic\r\n# direction must also be given.\r\n#\r\n# The local and remote prefix options allow a topic to be remapped when it is\r\n# bridged to/from the remote broker. This provides the ability to place a topic\r\n# tree in an appropriate location.\r\n#\r\n# For more details see the mosquitto.conf man page.\r\n#\r\n# Multiple topics can be specified per connection, but be careful\r\n# not to create any loops.\r\n#\r\n# If you are using bridges with cleansession set to false (the default), then\r\n# you may get unexpected behaviour from incoming topics if you change what\r\n# topics you are subscribing to. This is because the remote broker keeps the\r\n# subscription for the old topic. If you have this problem, connect your bridge\r\n# with cleansession set to true, then reconnect with cleansession set to false\r\n# as normal.\r\n#connection <name>\r\n#address <host>[:<port>] [<host>[:<port>]]\r\n#topic <topic> [[[out | in | both] qos-level] local-prefix remote-prefix]\r\n\r\n# If you need to have the bridge connect over a particular network interface,\r\n# use bridge_bind_address to tell the bridge which local IP address the socket\r\n# should bind to, e.g. `bridge_bind_address 192.168.1.10`\r\n#bridge_bind_address\r\n\r\n# If a bridge has topics that have "out" direction, the default behaviour is to\r\n# send an unsubscribe request to the remote broker on that topic. This means\r\n# that changing a topic direction from "in" to "out" will not keep receiving\r\n# incoming messages. Sending these unsubscribe requests is not always\r\n# desirable, setting bridge_attempt_unsubscribe to false will disable sending\r\n# the unsubscribe request.\r\n#bridge_attempt_unsubscribe true\r\n\r\n# Set the version of the MQTT protocol to use with for this bridge. Can be one\r\n# of mqttv50, mqttv311 or mqttv31. Defaults to mqttv311.\r\n#bridge_protocol_version mqttv311\r\n\r\n# Set the clean session variable for this bridge.\r\n# When set to true, when the bridge disconnects for any reason, all\r\n# messages and subscriptions will be cleaned up on the remote\r\n# broker. Note that with cleansession set to true, there may be a\r\n# significant amount of retained messages sent when the bridge\r\n# reconnects after losing its connection.\r\n# When set to false, the subscriptions and messages are kept on the\r\n# remote broker, and delivered when the bridge reconnects.\r\n#cleansession false\r\n\r\n# Set the amount of time a bridge using the lazy start type must be idle before\r\n# it will be stopped. Defaults to 60 seconds.\r\n#idle_timeout 60\r\n\r\n# Set the keepalive interval for this bridge connection, in\r\n# seconds.\r\n#keepalive_interval 60\r\n\r\n# Set the clientid to use on the local broker. If not defined, this defaults to\r\n# \'local.<clientid>\'. If you are bridging a broker to itself, it is important\r\n# that local_clientid and clientid do not match.\r\n#local_clientid\r\n\r\n# If set to true, publish notification messages to the local and remote brokers\r\n# giving information about the state of the bridge connection. Retained\r\n# messages are published to the topic $SYS/broker/connection/<clientid>/state\r\n# unless the notification_topic option is used.\r\n# If the message is 1 then the connection is active, or 0 if the connection has\r\n# failed.\r\n# This uses the last will and testament feature.\r\n#notifications true\r\n\r\n# Choose the topic on which notification messages for this bridge are\r\n# published. If not set, messages are published on the topic\r\n# $SYS/broker/connection/<clientid>/state\r\n#notification_topic\r\n\r\n# Set the client id to use on the remote end of this bridge connection. If not\r\n# defined, this defaults to \'name.hostname\' where name is the connection name\r\n# and hostname is the hostname of this computer.\r\n# This replaces the old "clientid" option to avoid confusion. "clientid"\r\n# remains valid for the time being.\r\n#remote_clientid\r\n\r\n# Set the password to use when connecting to a broker that requires\r\n# authentication. This option is only used if remote_username is also set.\r\n# This replaces the old "password" option to avoid confusion. "password"\r\n# remains valid for the time being.\r\n#remote_password\r\n\r\n# Set the username to use when connecting to a broker that requires\r\n# authentication.\r\n# This replaces the old "username" option to avoid confusion. "username"\r\n# remains valid for the time being.\r\n#remote_username\r\n\r\n# Set the amount of time a bridge using the automatic start type will wait\r\n# until attempting to reconnect.\r\n# This option can be configured to use a constant delay time in seconds, or to\r\n# use a backoff mechanism based on "Decorrelated Jitter", which adds a degree\r\n# of randomness to when the restart occurs.\r\n#\r\n# Set a constant timeout of 20 seconds:\r\n# restart_timeout 20\r\n#\r\n# Set backoff with a base (start value) of 10 seconds and a cap (upper limit) of\r\n# 60 seconds:\r\n# restart_timeout 10 30\r\n#\r\n# Defaults to jitter with a base of 5 and cap of 30\r\n#restart_timeout 5 30\r\n\r\n# If the bridge has more than one address given in the address/addresses\r\n# configuration, the round_robin option defines the behaviour of the bridge on\r\n# a failure of the bridge connection. If round_robin is false, the default\r\n# value, then the first address is treated as the main bridge connection. If\r\n# the connection fails, the other secondary addresses will be attempted in\r\n# turn. Whilst connected to a secondary bridge, the bridge will periodically\r\n# attempt to reconnect to the main bridge until successful.\r\n# If round_robin is true, then all addresses are treated as equals. If a\r\n# connection fails, the next address will be tried and if successful will\r\n# remain connected until it fails\r\n#round_robin false\r\n\r\n# Set the start type of the bridge. This controls how the bridge starts and\r\n# can be one of three types: automatic, lazy and once. Note that RSMB provides\r\n# a fourth start type "manual" which isn\'t currently supported by mosquitto.\r\n#\r\n# "automatic" is the default start type and means that the bridge connection\r\n# will be started automatically when the broker starts and also restarted\r\n# after a short delay (30 seconds) if the connection fails.\r\n#\r\n# Bridges using the "lazy" start type will be started automatically when the\r\n# number of queued messages exceeds the number set with the "threshold"\r\n# parameter. It will be stopped automatically after the time set by the\r\n# "idle_timeout" parameter. Use this start type if you wish the connection to\r\n# only be active when it is needed.\r\n#\r\n# A bridge using the "once" start type will be started automatically when the\r\n# broker starts but will not be restarted if the connection fails.\r\n#start_type automatic\r\n\r\n# Set the number of messages that need to be queued for a bridge with lazy\r\n# start type to be restarted. Defaults to 10 messages.\r\n# Must be less than max_queued_messages.\r\n#threshold 10\r\n\r\n# If try_private is set to true, the bridge will attempt to indicate to the\r\n# remote broker that it is a bridge not an ordinary client. If successful, this\r\n# means that loop detection will be more effective and that retained messages\r\n# will be propagated correctly. Not all brokers support this feature so it may\r\n# be necessary to set try_private to false if your bridge does not connect\r\n# properly.\r\n#try_private true\r\n\r\n# Some MQTT brokers do not allow retained messages. MQTT v5 gives a mechanism\r\n# for brokers to tell clients that they do not support retained messages, but\r\n# this is not possible for MQTT v3.1.1 or v3.1. If you need to bridge to a\r\n# v3.1.1 or v3.1 broker that does not support retained messages, set the\r\n# bridge_outgoing_retain option to false. This will remove the retain bit on\r\n# all outgoing messages to that bridge, regardless of any other setting.\r\n#bridge_outgoing_retain true\r\n\r\n# If you wish to restrict the size of messages sent to a remote bridge, use the\r\n# bridge_max_packet_size option. This sets the maximum number of bytes for\r\n# the total message, including headers and payload.\r\n# Note that MQTT v5 brokers may provide their own maximum-packet-size property.\r\n# In this case, the smaller of the two limits will be used.\r\n# Set to 0 for "unlimited".\r\n#bridge_max_packet_size 0\r\n\r\n\r\n# -----------------------------------------------------------------\r\n# Certificate based SSL/TLS support\r\n# -----------------------------------------------------------------\r\n# Either bridge_cafile or bridge_capath must be defined to enable TLS support\r\n# for this bridge.\r\n# bridge_cafile defines the path to a file containing the\r\n# Certificate Authority certificates that have signed the remote broker\r\n# certificate.\r\n# bridge_capath defines a directory that will be searched for files containing\r\n# the CA certificates. For bridge_capath to work correctly, the certificate\r\n# files must have ".crt" as the file ending and you must run "openssl rehash\r\n# <path to capath>" each time you add/remove a certificate.\r\n#bridge_cafile\r\n#bridge_capath\r\n\r\n\r\n# If the remote broker has more than one protocol available on its port, e.g.\r\n# MQTT and WebSockets, then use bridge_alpn to configure which protocol is\r\n# requested. Note that WebSockets support for bridges is not yet available.\r\n#bridge_alpn\r\n\r\n# When using certificate based encryption, bridge_insecure disables\r\n# verification of the server hostname in the server certificate. This can be\r\n# useful when testing initial server configurations, but makes it possible for\r\n# a malicious third party to impersonate your server through DNS spoofing, for\r\n# example. Use this option in testing only. If you need to resort to using this\r\n# option in a production environment, your setup is at fault and there is no\r\n# point using encryption.\r\n#bridge_insecure false\r\n\r\n# Path to the PEM encoded client certificate, if required by the remote broker.\r\n#bridge_certfile\r\n\r\n# Path to the PEM encoded client private key, if required by the remote broker.\r\n#bridge_keyfile\r\n\r\n# -----------------------------------------------------------------\r\n# PSK based SSL/TLS support\r\n# -----------------------------------------------------------------\r\n# Pre-shared-key encryption provides an alternative to certificate based\r\n# encryption. A bridge can be configured to use PSK with the bridge_identity\r\n# and bridge_psk options. These are the client PSK identity, and pre-shared-key\r\n# in hexadecimal format with no "0x". Only one of certificate and PSK based\r\n# encryption can be used on one\r\n# bridge at once.\r\n#bridge_identity\r\n#bridge_psk\r\n\r\n\r\n# =================================================================\r\n# External config files\r\n# =================================================================\r\n\r\n# External configuration files may be included by using the\r\n# include_dir option. This defines a directory that will be searched\r\n# for config files. All files that end in \'.conf\' will be loaded as\r\n# a configuration file. It is best to have this as the last option\r\n# in the main file. This option will only be processed from the main\r\n# configuration file. The directory specified must not contain the\r\n# main configuration file.\r\n# Files within include_dir will be loaded sorted in case-sensitive\r\n# alphabetical order, with capital letters ordered first. If this option is\r\n# given multiple times, all of the files from the first instance will be\r\n# processed before the next instance. See the man page for examples.\r\n#include_dir\n'})})]})}function h(e={}){const{wrapper:t}={...(0,i.ah)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},603905:(e,t,n)=>{n.d(t,{ah:()=>c});var r=n(667294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,s=e.originalType,l=e.parentName,h=a(e,["components","mdxType","originalType","parentName"]),u=c(n),p=i,m=u["".concat(l,".").concat(p)]||u[p]||d[p]||s;return n?r.createElement(m,o(o({ref:t},h),{},{components:n})):r.createElement(m,o({ref:t},h))}));h.displayName="MDXCreateElement"},929675:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-ec75d5087582b8f10fb3dbbf1f8b5a5e.jpg"}}]);