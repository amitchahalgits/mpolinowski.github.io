"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[24894],{600687:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>b,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var n=i(474848),a=i(28453);const r={sidebar_position:8040,slug:"2022-01-14",title:"Zabbix HTTPS Certificate Monitor",authors:"mpolinowski",tags:["Zabbix","Linux"]},s=void 0,o={id:"DevOps/Zabbix/2022-01-14--zabbix-http-cert-monitor/index",title:"Zabbix HTTPS Certificate Monitor",description:"Guangzhou, China",source:"@site/docs/DevOps/Zabbix/2022-01-14--zabbix-http-cert-monitor/index.md",sourceDirName:"DevOps/Zabbix/2022-01-14--zabbix-http-cert-monitor",slug:"/DevOps/Zabbix/2022-01-14--zabbix-http-cert-monitor/2022-01-14",permalink:"/docs/DevOps/Zabbix/2022-01-14--zabbix-http-cert-monitor/2022-01-14",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Zabbix/2022-01-14--zabbix-http-cert-monitor/index.md",tags:[{label:"Zabbix",permalink:"/docs/tags/zabbix"},{label:"Linux",permalink:"/docs/tags/linux"}],version:"current",sidebarPosition:8040,frontMatter:{sidebar_position:8040,slug:"2022-01-14",title:"Zabbix HTTPS Certificate Monitor",authors:"mpolinowski",tags:["Zabbix","Linux"]},sidebar:"tutorialSidebar",previous:{title:"Zabbix v6 NGINX Monitor",permalink:"/docs/DevOps/Zabbix/2022-01-14--zabbix-nginx-monitor/2022-01-14"},next:{title:"Zabbix v6 Docker Monitor",permalink:"/docs/DevOps/Zabbix/2022-01-14--zabbix-docker-monitor/2022-01-14"}},c={},d=[{value:"Install Agent 2",id:"install-agent-2",level:2},{value:"Website Certificate Plugin",id:"website-certificate-plugin",level:2}];function l(e){const t={a:"a",code:"code",em:"em",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Guangzhou, China",src:i(204901).A+"",width:"1500",height:"467"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"#install-agent-2",children:"Install Agent 2"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"#website-certificate-plugin",children:"Website Certificate Plugin"})}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"install-agent-2",children:"Install Agent 2"}),"\n",(0,n.jsx)(t.p,{children:"Remove Agent v1 (if present) and install version 2:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"wget https://repo.zabbix.com/zabbix/5.4/debian/pool/main/z/zabbix-release/zabbix-release_5.4-1%2Bdebian11_all.deb\r\ndpkg -i zabbix-release_5.4-1+debian11_all.deb\r\napt update && apt install zabbix-agent2\n"})}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"/docs/DevOps/Zabbix/2020-07-16--zabbix-agent/2020-07-16",children:"Configure the agent according to your server setup"}),". And in addition to that un-comment the following line in ",(0,n.jsx)(t.em,{children:"/etc/zabbix/zabbix_agent2.conf"}),":"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-conf",children:"### Option: Plugins.Docker.Endpoint\r\n#       Docker API endpoint.\r\n#\r\n# Mandatory: no\r\n# Default: unix:///var/run/docker.sock\r\nPlugins.Docker.Endpoint=unix:///var/run/docker.sock\n"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"/docs/DevOps/Zabbix/2022-01-14--zabbix-docker-monitor/2022-01-14#error-configuration-file-not-loaded",children:"Troubleshooting"})}),"\n",(0,n.jsx)(t.h2,{id:"website-certificate-plugin",children:"Website Certificate Plugin"}),"\n",(0,n.jsx)(t.p,{children:"Open the host configuration and add the web cert template:"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Zabbix HTTPS Certificate Monitor",src:i(531519).A+"",width:"1234",height:"354"})}),"\n",(0,n.jsx)(t.p,{children:"Connect to your host server and check active certificates:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"certbot certificates                                                                                                  \r\nSaving debug log to /var/log/letsencrypt/letsencrypt.log\r\n\r\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\nFound the following certs:\r\n  Certificate Name: wiki.instar.com\r\n\r\n...\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Back in the Zabbix host configuration switch to the ",(0,n.jsx)(t.strong,{children:"Macros"})," tab and add the domain you want to monitor ",(0,n.jsx)(t.code,{children:"wiki.instar.com"}),":"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Zabbix HTTPS Certificate Monitor",src:i(194660).A+"",width:"1285",height:"409"})}),"\n",(0,n.jsx)(t.p,{children:"Get yourself another cup of coffee... data will arrive eventually:"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Zabbix HTTPS Certificate Monitor",src:i(448557).A+"",width:"1283",height:"900"})}),"\n",(0,n.jsx)(t.p,{children:"Available triggers:"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Zabbix HTTPS Certificate Monitor",src:i(643698).A+"",width:"1243",height:"265"})})]})}function b(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},531519:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/Zabbix_Cert_Watcher_01-8a9316deec58134d644b8b8a2b1dd053.png"},194660:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/Zabbix_Cert_Watcher_02-5ae31aea29b4b0cc5351d322a2e34ad5.png"},448557:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/Zabbix_Cert_Watcher_03-510b704dd21e107a2ed276a6a0e051d8.png"},643698:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/Zabbix_Cert_Watcher_04-fdb88d4a05db79e2538c95847991ada1.png"},204901:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-539dc0d90c8fd4caf3d5cd5162b8ded5.jpg"},28453:(e,t,i)=>{i.d(t,{R:()=>s,x:()=>o});var n=i(296540);const a={},r=n.createContext(a);function s(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);