"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[6741],{278754:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>r,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>c,toc:()=>l});var n=i(785893),a=i(603905);const s={sidebar_position:8e3,slug:"2022-01-15",title:"Zabbix v6 Slack Notifications",authors:"mpolinowski",tags:["LINUX","Slack","Zabbix"]},o=void 0,c={id:"DevOps/Zabbix/2022-01-15--zabbix-v6-slack-notifications/index",title:"Zabbix v6 Slack Notifications",description:"TST, Hong Kong",source:"@site/docs/DevOps/Zabbix/2022-01-15--zabbix-v6-slack-notifications/index.md",sourceDirName:"DevOps/Zabbix/2022-01-15--zabbix-v6-slack-notifications",slug:"/DevOps/Zabbix/2022-01-15--zabbix-v6-slack-notifications/2022-01-15",permalink:"/docs/DevOps/Zabbix/2022-01-15--zabbix-v6-slack-notifications/2022-01-15",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Zabbix/2022-01-15--zabbix-v6-slack-notifications/index.md",tags:[{label:"LINUX",permalink:"/docs/tags/linux"},{label:"Slack",permalink:"/docs/tags/slack"},{label:"Zabbix",permalink:"/docs/tags/zabbix"}],version:"current",sidebarPosition:8e3,frontMatter:{sidebar_position:8e3,slug:"2022-01-15",title:"Zabbix v6 Slack Notifications",authors:"mpolinowski",tags:["LINUX","Slack","Zabbix"]},sidebar:"tutorialSidebar",previous:{title:"Zabbix v6 SMART HDD Check",permalink:"/docs/DevOps/Zabbix/2022-01-15--zabbix-v6-smart-hdd-check/2022-01-15"},next:{title:"Zabbix v6 Email Notifications",permalink:"/docs/DevOps/Zabbix/2022-01-15--zabbix-v6-email-notifications/2022-01-15"}},r={},l=[{value:"Preparing Slack",id:"preparing-slack",level:3},{value:"Configure Zabbix",id:"configure-zabbix",level:3}];function d(e){const t={a:"a",code:"code",h3:"h3",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,a.ah)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"TST, Hong Kong",src:i(617868).Z+"",width:"1500",height:"622"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"#preparing-slack",children:"Preparing Slack"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"#configure-zabbix",children:"Configure Zabbix"})}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"preparing-slack",children:"Preparing Slack"}),"\n",(0,n.jsx)(t.p,{children:"Start by creating a Channel for the Zabbix bot:"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Slack Notifications",src:i(667396).Z+"",width:"1011",height:"567"})}),"\n",(0,n.jsxs)(t.p,{children:["Now click to ",(0,n.jsx)(t.a,{href:"https://api.slack.com/apps?new_app=1",children:"add a new app"})," and click on the link in the top right that leads you to the ",(0,n.jsx)(t.strong,{children:"App Directory"})," that will open the Slack webpage inside your default browser. In the top right click on the ",(0,n.jsx)(t.strong,{children:"Build"})," tab and then on the big ",(0,n.jsx)(t.strong,{children:"Start Building"})," button."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Slack Notifications",src:i(133227).Z+"",width:"1051",height:"506"})}),"\n",(0,n.jsxs)(t.p,{children:["Give your app a name and assign a workspace then click on ",(0,n.jsx)(t.strong,{children:"Create App"}),". In the following list select ",(0,n.jsx)(t.strong,{children:"Bots"}),":"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Slack Notifications",src:i(405990).Z+"",width:"916",height:"431"})}),"\n",(0,n.jsxs)(t.p,{children:["There we need to assign a scope to your bot token. Click on ",(0,n.jsx)(t.strong,{children:"Review Scopes to Add"}),":"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Slack Notifications",src:i(106808).Z+"",width:"1019",height:"909"})}),"\n",(0,n.jsxs)(t.p,{children:["Add the ",(0,n.jsx)(t.code,{children:"chat.write"})," scope and click on ",(0,n.jsx)(t.strong,{children:"Install App to Workspace"})," and give permission to your bot to access your workspace. You will now be given a token that you have to copy into the Zabbix interface so that Zabbix will be able to use the bot to send messages to your workspace:"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Slack Notifications",src:i(316272).Z+"",width:"964",height:"421"})}),"\n",(0,n.jsx)(t.h3,{id:"configure-zabbix",children:"Configure Zabbix"}),"\n",(0,n.jsxs)(t.p,{children:["Open the Zabbix dashboard, enter the ",(0,n.jsx)(t.strong,{children:"Media types"})," configuration and select the ",(0,n.jsx)(t.strong,{children:"Slack"})," media type:"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Slack Notifications",src:i(649689).Z+"",width:"1149",height:"367"})}),"\n",(0,n.jsxs)(t.p,{children:["Copy your bot token in to the ",(0,n.jsx)(t.code,{children:"bot_token"})," field and set the channel we want to bot to post into - click on ",(0,n.jsx)(t.strong,{children:"Update"})," to save your settings. Before using the Webhook, you need to setup the global macro ",(0,n.jsx)(t.code,{children:"{$ZABBIX.URL}"}),", which must contain the URL to the Zabbix frontend - go to ",(0,n.jsx)(t.strong,{children:"Administration"})," / ",(0,n.jsx)(t.strong,{children:"General"})," / ",(0,n.jsx)(t.strong,{children:"Macros"}),":"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Slack Notifications",src:i(966567).Z+"",width:"1169",height:"339"})}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Test"})," the bot (the Test will complain about some undefined variables - you can fill them with dummy data:"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Slack Notifications",src:i(18453).Z+"",width:"1034",height:"880"})}),"\n",(0,n.jsxs)(t.p,{children:["Now the test runs successfully and you should receive the test message in ",(0,n.jsx)(t.code,{children:"#server_management"}),":"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Slack Notifications",src:i(898977).Z+"",width:"953",height:"338"})}),"\n",(0,n.jsxs)(t.p,{children:["Great! Now we can add the Slack notification as a ",(0,n.jsx)(t.strong,{children:"Media Type"})," inside our user notification settings:"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Slack Notifications",src:i(485124).Z+"",width:"981",height:"443"})}),"\n",(0,n.jsx)(t.p,{children:"Make sure that reporting problems to Zabbix Administrators is activated and you are good to go:"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Slack Notifications",src:i(992939).Z+"",width:"1262",height:"351"})})]})}function h(e={}){const{wrapper:t}={...(0,a.ah)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},603905:(e,t,i)=>{i.d(t,{ah:()=>l});var n=i(667294);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function c(e,t){if(null==e)return{};var i,n,a=function(e,t){if(null==e)return{};var i,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(a[i]=e[i]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}var r=n.createContext({}),l=function(e){var t=n.useContext(r),i=t;return e&&(i="function"==typeof e?e(t):o(o({},t),e)),i},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var i=e.components,a=e.mdxType,s=e.originalType,r=e.parentName,h=c(e,["components","mdxType","originalType","parentName"]),p=l(i),b=a,g=p["".concat(r,".").concat(b)]||p[b]||d[b]||s;return i?n.createElement(g,o(o({ref:t},h),{},{components:i})):n.createElement(g,o({ref:t},h))}));h.displayName="MDXCreateElement"},667396:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/Slack_Notifications_01-33521b9ac5b36bb430b15d1987a31f34.png"},133227:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/Slack_Notifications_02-d92c2c48c30ff2d87853c968a1f974ee.png"},405990:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/Slack_Notifications_03-8d62ed4498e1afe805e5f15ddbb3c1ac.png"},106808:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/Slack_Notifications_04-d98d58514269dccff780811eaaea628b.png"},316272:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/Slack_Notifications_05-0866ef4d7130271be9c4117042ee39f7.png"},649689:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/Slack_Notifications_06-7aa2abcc3dbccb97ad110901d174c6bc.png"},966567:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/Slack_Notifications_06b-381fc5912b34dc5c2dd1ea2e93dc9937.png"},18453:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/Slack_Notifications_07-f372bb628581910fab6e33d9dae77c37.png"},898977:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/Slack_Notifications_08-a49841d02d5682bb0d930709ea760402.png"},485124:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/Slack_Notifications_09-786475225232487d6e47261b527de87e.png"},992939:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/Slack_Notifications_10-dfb00129393dbaa5f4521026ee5d5a1c.png"},617868:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-d8b333d1f9ddf34ac7392aef86b14c83.jpg"}}]);