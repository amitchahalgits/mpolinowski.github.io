"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[45186],{272130:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>i,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>c,toc:()=>l});var t=r(785893),a=r(603905);const s={sidebar_position:7050,slug:"2021-05-09",title:"Electron@13 and Create-React-App",authors:"mpolinowski",tags:["Javascript","Electron","Gatsby","React"]},o=void 0,c={id:"Development/Javascript/2021-05-09-electron13-and-react/index",title:"Electron@13 and Create-React-App",description:"Shenzhen, China",source:"@site/docs/Development/Javascript/2021-05-09-electron13-and-react/index.md",sourceDirName:"Development/Javascript/2021-05-09-electron13-and-react",slug:"/Development/Javascript/2021-05-09-electron13-and-react/2021-05-09",permalink:"/docs/Development/Javascript/2021-05-09-electron13-and-react/2021-05-09",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Development/Javascript/2021-05-09-electron13-and-react/index.md",tags:[{label:"Javascript",permalink:"/docs/tags/javascript"},{label:"Electron",permalink:"/docs/tags/electron"},{label:"Gatsby",permalink:"/docs/tags/gatsby"},{label:"React",permalink:"/docs/tags/react"}],version:"current",sidebarPosition:7050,frontMatter:{sidebar_position:7050,slug:"2021-05-09",title:"Electron@13 and Create-React-App",authors:"mpolinowski",tags:["Javascript","Electron","Gatsby","React"]},sidebar:"tutorialSidebar",previous:{title:"Carbon Design System in React.js - Part I",permalink:"/docs/Development/Javascript/2021-05-10-carbon-design-react/2021-05-10"},next:{title:"Electron@13 as a Gatsby.js Wrapper",permalink:"/docs/Development/Javascript/2021-05-08-electron13-gatsby-wrapper/2021-05-08"}},i={},l=[{value:"Setup",id:"setup",level:2},{value:"BROWSER=none",id:"browsernone",level:3},{value:"Run the App",id:"run-the-app",level:2}];function p(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.ah)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Shenzhen, China",src:r(351069).Z+"",width:"1500",height:"505"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"#setup",children:"Setup"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#browsernone",children:"BROWSER=none"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#run-the-app",children:"Run the App"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://github.com/mpolinowski/electron-react-app",children:"Github Repository"})}),"\n",(0,t.jsxs)(n.p,{children:["I now used Electron to host local HTML and as a wrapper around a Gatsby.js app. Now I want to use Electron together with ",(0,t.jsx)(n.a,{href:"https://reactjs.org/docs/create-a-new-react-app.html",children:"Create-React-App"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"setup",children:"Setup"}),"\n",(0,t.jsx)(n.p,{children:"Scaffold your react app and add Electron:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npx create-react-app electron-react-app\r\ncd electron-react-app\r\nnpm install --save-dev electron@latest electron-is-dev\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Now add the Electron index file inside the ",(0,t.jsx)(n.code,{children:"/public"})," directory - ",(0,t.jsx)(n.code,{children:"/public/electron.js"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const path = require('path');\r\n\r\nconst { app, BrowserWindow } = require('electron');\r\nconst isDev = require('electron-is-dev');\r\n\r\nfunction createWindow() {\r\n  // Create the browser window.\r\n  const win = new BrowserWindow({\r\n    width: 800,\r\n    height: 600,\r\n    webPreferences: {\r\n      nodeIntegration: true,\r\n    },\r\n  });\r\n\r\n  // and load the index.html of the app.\r\n  // win.loadFile(\"index.html\");\r\n  win.loadURL(\r\n    isDev\r\n      ? 'http://localhost:3000'\r\n      : `file://${path.join(__dirname, '../build/index.html')}`\r\n  );\r\n  // Open the DevTools.\r\n  if (isDev) {\r\n    win.webContents.openDevTools({ mode: 'detach' });\r\n  }\r\n}\r\n\r\napp.whenReady().then(createWindow);\r\n\r\napp.on('window-all-closed', () => {\r\n    app.quit();\r\n});\r\n\r\napp.on('activate', () => {\r\n  if (BrowserWindow.getAllWindows().length === 0) {\r\n    createWindow();\r\n  }\r\n});\n"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"electron-is-dev"})," will open the Chromium Dev Tools when your app is not detached!"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Just as before I will use concurrently to run my react and electron app side-by-side:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install --save-dev concurrently wait-on\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Now I have to set the ",(0,t.jsx)(n.code,{children:"electron.js"})," file as the main ingress and add two scripts that allow me to run both apps:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'  "main": "public/electron.js",\r\n  "scripts": {\r\n    "start": "react-scripts start",\r\n    "build": "react-scripts build",\r\n    "test": "react-scripts test",\r\n    "eject": "react-scripts eject",\r\n    "dev": "concurrently -k \\"BROWSER=none npm start\\" \\"npm:electron\\"",\r\n    "electron": "wait-on tcp:3000 && electron ."\r\n  },\n'})}),"\n",(0,t.jsx)(n.h3,{id:"browsernone",children:"BROWSER=none"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"ERROR"}),": to start Create-React-App without opening the app inside your browser you have to set the environment variable ",(0,t.jsx)(n.code,{children:"BROWSER=none"}),". This led me to the following error message:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'> concurrently --kill-others "BROWSER=none npm start" "npm run electron"\r\n\r\n[0] \'BROWSER\' is not recognized as an internal or external command,\r\n[0] operable program or batch file.\r\n[0] BROWSER=none npm start exited with code 1\r\n--\x3e Sending SIGTERM to other processes..\r\n[1] npm run electron exited with code 1\n'})}),"\n",(0,t.jsxs)(n.p,{children:["I was able to solve this issue by installing ",(0,t.jsx)(n.code,{children:"cross-env"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install --save cross-env\n"})}),"\n",(0,t.jsx)(n.p,{children:"And change to script to:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'"dev": "concurrently -k \\"cross-env BROWSER=none npm start\\" \\"npm:electron\\"",\n'})}),"\n",(0,t.jsx)(n.h2,{id:"run-the-app",children:"Run the App"}),"\n",(0,t.jsx)(n.p,{children:"The App now starts up with:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm run dev\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Electron with Create React App",src:r(688926).Z+"",width:"1569",height:"595"})})]})}function d(e={}){const{wrapper:n}={...(0,a.ah)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},603905:(e,n,r)=>{r.d(n,{ah:()=>l});var t=r(667294);function a(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function s(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function o(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?s(Object(r),!0).forEach((function(n){a(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function c(e,n){if(null==e)return{};var r,t,a=function(e,n){if(null==e)return{};var r,t,a={},s=Object.keys(e);for(t=0;t<s.length;t++)r=s[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)r=s[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var i=t.createContext({}),l=function(e){var n=t.useContext(i),r=n;return e&&(r="function"==typeof e?e(n):o(o({},n),e)),r},p={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},d=t.forwardRef((function(e,n){var r=e.components,a=e.mdxType,s=e.originalType,i=e.parentName,d=c(e,["components","mdxType","originalType","parentName"]),h=l(r),u=a,m=h["".concat(i,".").concat(u)]||h[u]||p[u]||s;return r?t.createElement(m,o(o({ref:n},d),{},{components:r})):t.createElement(m,o({ref:n},d))}));d.displayName="MDXCreateElement"},688926:(e,n,r)=>{r.d(n,{Z:()=>t});const t=r.p+"assets/images/Electron_with_Create_React_App_01-d01ca4cec53c0253ddc7c7488e450606.png"},351069:(e,n,r)=>{r.d(n,{Z:()=>t});const t=r.p+"assets/images/photo-456tdsfggd_67gfh6dgdf4_d-ac14d97339cfca3b47b1867de2eb81d0.jpg"}}]);