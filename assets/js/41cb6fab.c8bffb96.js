"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[17884],{134384:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>l});var a=o(785893),t=o(603905);const r={sidebar_position:8010,slug:"2019-09-27",title:"Home Assistant, OpenHAB, Node-RED, ioBroker, MotionEye Containerized (Podman)",authors:"mpolinowski",tags:["LINUX","Smarthome","IoT","Docker","Cheating"]},s=void 0,i={id:"Automation_and_Robotics/Home_Automation/2019-09-27--home-assistant-podman-centos8/index",title:"Home Assistant, OpenHAB, Node-RED, ioBroker, MotionEye Containerized (Podman)",description:"Siem Reap, Cambodia",source:"@site/docs/Automation_and_Robotics/Home_Automation/2019-09-27--home-assistant-podman-centos8/index.mdx",sourceDirName:"Automation_and_Robotics/Home_Automation/2019-09-27--home-assistant-podman-centos8",slug:"/Automation_and_Robotics/Home_Automation/2019-09-27--home-assistant-podman-centos8/2019-09-27",permalink:"/docs/Automation_and_Robotics/Home_Automation/2019-09-27--home-assistant-podman-centos8/2019-09-27",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Automation_and_Robotics/Home_Automation/2019-09-27--home-assistant-podman-centos8/index.mdx",tags:[{label:"LINUX",permalink:"/docs/tags/linux"},{label:"Smarthome",permalink:"/docs/tags/smarthome"},{label:"IoT",permalink:"/docs/tags/io-t"},{label:"Docker",permalink:"/docs/tags/docker"},{label:"Cheating",permalink:"/docs/tags/cheating"}],version:"current",sidebarPosition:8010,frontMatter:{sidebar_position:8010,slug:"2019-09-27",title:"Home Assistant, OpenHAB, Node-RED, ioBroker, MotionEye Containerized (Podman)",authors:"mpolinowski",tags:["LINUX","Smarthome","IoT","Docker","Cheating"]},sidebar:"tutorialSidebar",previous:{title:"Shinobi Video Surveillance",permalink:"/docs/Automation_and_Robotics/Home_Automation/2019-02-08--shinobi-on-debian/2019-02-08"},next:{title:"MotionEye Video Surveillance",permalink:"/docs/Automation_and_Robotics/Home_Automation/2019-02-07--motioneye-on-debian/2019-02-07"}},d={},l=[{value:"Installation through Podman on CentOS8",id:"installation-through-podman-on-centos8",level:2},{value:"Home Assistant",id:"home-assistant",level:3},{value:"Node-RED",id:"node-red",level:3},{value:"Theming",id:"theming",level:4},{value:"OpenHAB",id:"openhab",level:3},{value:"OpenHAB CLI",id:"openhab-cli",level:4},{value:"Updating the Image",id:"updating-the-image",level:4},{value:"ioBroker",id:"iobroker",level:3},{value:"MotionEye",id:"motioneye",level:3}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.ah)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"Siem Reap, Cambodia",src:o(852572).Z+"",width:"1500",height:"546"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"#installation-through-podman-on-centos8",children:"Installation through Podman on CentOS8"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#home-assistant",children:"Home Assistant"})}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"#node-red",children:"Node-RED"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#theming",children:"Theming"})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#openhab",children:"OpenHAB"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#iobroker",children:"ioBroker"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#motioneye",children:"MotionEye"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"installation-through-podman-on-centos8",children:"Installation through Podman on CentOS8"}),"\n",(0,a.jsx)(n.h3,{id:"home-assistant",children:"Home Assistant"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"podman pull homeassistant/home-assistant:stable\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"mkdir -p /opt/homeassistant/{config}\r\nchmod -R 775 /opt/homeassistant\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"podman run -d --rm --privileged --net=host --name='home-assistant' -e 'TZ=Europe/Berlin' -v /opt/homeassistant/config:/config homeassistant/home-assistant:stable\n"})}),"\n",(0,a.jsxs)(n.p,{children:["There seems to be an issue with Podman - or the way I am using it. I have to run the container ",(0,a.jsx)(n.code,{children:"privileged"})," to be able to write to the volume. Google did not help me solve this 'issue', yet."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"podman start home-assistant\r\npodman stop home-assistant\n"})}),"\n",(0,a.jsx)(n.h3,{id:"node-red",children:"Node-RED"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"podman pull nodered/node-red\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"mkdir -p /opt/nodered/{data}\r\nchmod -R 775 /opt/nodered\r\nchown 1000:1000 -R /opt/nodered \n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"podman run -d --rm --privileged --net=host -v /opt/nodered/data:/data --name nodered nodered/node-red\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"podman start nodered\r\npodman stop nodered\n"})}),"\n",(0,a.jsx)(n.h4,{id:"theming",children:"Theming"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cd /opt/nodered/data\r\nnpm install @node-red-contrib-themes/midnight-red\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Add the following to the editorTheme section of your ",(0,a.jsx)(n.code,{children:"settings.js"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"editorTheme: {\r\n    projects: {\r\n            // To enable the Projects feature, set this value to true\r\n            enabled: false\r\n    }\r\n}\n"})}),"\n",(0,a.jsx)(n.p,{children:"Change to ->"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"// Customising the editor\r\n    editorTheme: {\r\n        page: {\r\n            css: '/opt/nodered/data/node_modules/@node-red-contrib-themes/midnight-red/theme.css'\r\n        }\r\n    }\n"})}),"\n",(0,a.jsx)(n.h3,{id:"openhab",children:"OpenHAB"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"groupadd -g 9001 openhab\r\nuseradd -g 9001 openhab\r\nusermod -a -G openhab myownuser\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"mkdir -p /opt/openhab/{openhab_addons,openhab_conf,openhab_userdata}\r\nchmod -R 775 /opt/openhab\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"podman run \\\r\n        --name openhab \\\r\n        --net=host \\\r\n        --privileged \\\r\n         --rm \\\r\n        -v /etc/localtime:/etc/localtime:ro \\\r\n        -v /opt/openhab/openhab_addons:/openhab/addons \\\r\n        -v /opt/openhab/openhab_conf:/openhab/conf \\\r\n        -v /opt/openhab/openhab_userdata:/openhab/userdata \\\r\n        -d \\\r\n        openhab/openhab:latest\n"})}),"\n",(0,a.jsx)(n.h4,{id:"openhab-cli",children:"OpenHAB CLI"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"docker exec -it openhab\r\n/openhab/runtime/bin/client -p habopen\n"})}),"\n",(0,a.jsx)(n.h4,{id:"updating-the-image",children:"Updating the Image"}),"\n",(0,a.jsx)(n.p,{children:"Use the following steps to update the docker image and all installed add-ons."}),"\n",(0,a.jsx)(n.p,{children:"Stop the container:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"docker stop openhab\n"})}),"\n",(0,a.jsx)(n.p,{children:"Delete the container:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"docker rm openhab\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Delete the contents of ",(0,a.jsx)(n.code,{children:"/opt/openhab/userdata/cache"})," and ",(0,a.jsx)(n.code,{children:"/opt/openhab/userdata/tmp"})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"rm -rf /opt/openhab/userdata/cache\r\nrm -rf /opt/openhab/userdata/tmp\n"})}),"\n",(0,a.jsx)(n.p,{children:"Pull down the latest image:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"docker pull openhab/openhab:`latest`\n"})}),"\n",(0,a.jsx)(n.p,{children:"Restart the container using the full command above."}),"\n",(0,a.jsx)(n.h3,{id:"iobroker",children:"ioBroker"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"podman pull iobroker/iobroker:latest\n"})}),"\n",(0,a.jsx)(n.p,{children:"And and run it:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"podman run \\\r\n  --net=host \\\r\n  --privileged \\\r\n  --rm \\\r\n  --name iobroker \\\r\n  -v /opt/iobroker:/opt/iobroker \\\r\n  -v /opt/iobroker/home:/home/iobroker \\\r\n  --detach=true \\\r\n  iobroker/iobroker:latest\n"})}),"\n",(0,a.jsx)(n.h3,{id:"motioneye",children:"MotionEye"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"podman pull ccrisan/motioneye:master-amd64\n"})}),"\n",(0,a.jsx)(n.p,{children:"And and run it:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"podman run --name='motioneye' \\\r\n    --net=host \\\r\n    --privileged \\\r\n    --rm \\\r\n    --hostname='motioneye' \\\r\n    -v /etc/localtime:/etc/localtime:ro \\\r\n    -v /opt/motioneye:/etc/motioneye \\\r\n    -v /opt/motioneye/lib:/var/lib/motioneye \\\r\n    --security-opt label=disable \\\r\n    --detach=true \\\r\n    ccrisan/motioneye:master-amd64\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.ah)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},603905:(e,n,o)=>{o.d(n,{ah:()=>l});var a=o(667294);function t(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function r(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,a)}return o}function s(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?r(Object(o),!0).forEach((function(n){t(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function i(e,n){if(null==e)return{};var o,a,t=function(e,n){if(null==e)return{};var o,a,t={},r=Object.keys(e);for(a=0;a<r.length;a++)o=r[a],n.indexOf(o)>=0||(t[o]=e[o]);return t}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)o=r[a],n.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(t[o]=e[o])}return t}var d=a.createContext({}),l=function(e){var n=a.useContext(d),o=n;return e&&(o="function"==typeof e?e(n):s(s({},n),e)),o},c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},h=a.forwardRef((function(e,n){var o=e.components,t=e.mdxType,r=e.originalType,d=e.parentName,h=i(e,["components","mdxType","originalType","parentName"]),m=l(o),p=t,u=m["".concat(d,".").concat(p)]||m[p]||c[p]||r;return o?a.createElement(u,s(s({ref:n},h),{},{components:o})):a.createElement(u,s({ref:n},h))}));h.displayName="MDXCreateElement"},852572:(e,n,o)=>{o.d(n,{Z:()=>a});const a=o.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-e09c4b863b29d0c9c2cb81b620df559f.jpg"}}]);