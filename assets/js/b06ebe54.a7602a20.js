"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[97938],{105383:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>d,toc:()=>t});var r=s(474848),i=s(28453);const a={sidebar_position:6050,slug:"2022-03-07",title:"FFMPEG Cheat Sheet",authors:"mpolinowski",tags:["LINUX","FFMPEG","Cheating"],description:"ffmpeg version 5.0-full_build-www.gyan.dev Copyright (c) 2000-2022"},l=void 0,d={id:"DevOps/Linux/2022-03-07--ffmpeg-cheat-sheet/index",title:"FFMPEG Cheat Sheet",description:"ffmpeg version 5.0-full_build-www.gyan.dev Copyright (c) 2000-2022",source:"@site/docs/DevOps/Linux/2022-03-07--ffmpeg-cheat-sheet/index.md",sourceDirName:"DevOps/Linux/2022-03-07--ffmpeg-cheat-sheet",slug:"/DevOps/Linux/2022-03-07--ffmpeg-cheat-sheet/2022-03-07",permalink:"/docs/DevOps/Linux/2022-03-07--ffmpeg-cheat-sheet/2022-03-07",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Linux/2022-03-07--ffmpeg-cheat-sheet/index.md",tags:[{label:"LINUX",permalink:"/docs/tags/linux"},{label:"FFMPEG",permalink:"/docs/tags/ffmpeg"},{label:"Cheating",permalink:"/docs/tags/cheating"}],version:"current",sidebarPosition:6050,frontMatter:{sidebar_position:6050,slug:"2022-03-07",title:"FFMPEG Cheat Sheet",authors:"mpolinowski",tags:["LINUX","FFMPEG","Cheating"],description:"ffmpeg version 5.0-full_build-www.gyan.dev Copyright (c) 2000-2022"},sidebar:"tutorialSidebar",previous:{title:"Using the AVM Fritzbox VPN on Manjaro (KDE)",permalink:"/docs/DevOps/Linux/2022-03-08--arch-kde-fritz-vpn/2022-03-08"},next:{title:"Install Davinci Resolve on Arch Linux",permalink:"/docs/DevOps/Linux/2021-10-26--install-davinci-resolve-on-arch/2021-10-26"}},c={},t=[{value:"Conversions",id:"conversions",level:2},{value:"h.264 (AVC)",id:"h264-avc",level:3},{value:"Encoding Presets",id:"encoding-presets",level:4},{value:"Tuning Presets",id:"tuning-presets",level:4},{value:"Costant Rate Factor",id:"costant-rate-factor",level:4},{value:"Profiles",id:"profiles",level:4},{value:"h.265 (HEVC)",id:"h265-hevc",level:3},{value:"Encoding Presets",id:"encoding-presets-1",level:4},{value:"Tuning Presets",id:"tuning-presets-1",level:4},{value:"Costant Rate Factor",id:"costant-rate-factor-1",level:4},{value:"Profiles",id:"profiles-1",level:4},{value:"h.266 (VVC)",id:"h266-vvc",level:3},{value:"VP8 &amp; webM",id:"vp8--webm",level:3},{value:"Costant Rate Factor",id:"costant-rate-factor-2",level:4},{value:"VP9 &amp; webM",id:"vp9--webm",level:3},{value:"Constant Rate Factor",id:"constant-rate-factor",level:4},{value:"Lossless Encoding",id:"lossless-encoding",level:4},{value:"Advanced Settings",id:"advanced-settings",level:4},{value:"Opus Audio",id:"opus-audio",level:3},{value:"AV1 &amp; webM",id:"av1--webm",level:3},{value:"AV1 SVT-AV1",id:"av1-svt-av1",level:3},{value:"Recordings",id:"recordings",level:2},{value:"RTSP Streams",id:"rtsp-streams",level:3},{value:"Timelapse from Images",id:"timelapse-from-images",level:3},{value:"Create Snapshots from Videos",id:"create-snapshots-from-videos",level:3},{value:"Generate GIF from Video",id:"generate-gif-from-video",level:3},{value:"Streaming",id:"streaming",level:2},{value:"Dynamic Adaptive Streaming over HTTP (DASH)",id:"dynamic-adaptive-streaming-over-http-dash",level:3},{value:"Adaptive WebM DASH Streaming",id:"adaptive-webm-dash-streaming",level:3},{value:"Playback",id:"playback",level:2},{value:"Probing &amp; Metadata",id:"probing--metadata",level:2},{value:"Video Editing",id:"video-editing",level:2},{value:"Cutting",id:"cutting",level:3},{value:"Resolution Scaling",id:"resolution-scaling",level:3},{value:"Video Overlays",id:"video-overlays",level:3},{value:"Add an Audio Track",id:"add-an-audio-track",level:3},{value:"Waveform",id:"waveform",level:3}];function o(e){const n={a:"a",blockquote:"blockquote",br:"br",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Shenzhen, China",src:s(32861).A+"",width:"1500",height:"606"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#conversions",children:"Conversions"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#h264-avc",children:"h.264 (AVC)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#encoding-presets",children:"Encoding Presets"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#tuning-presets",children:"Tuning Presets"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#costant-rate-factor",children:"Costant Rate Factor"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#profiles",children:"Profiles"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#h265-hevc",children:"h.265 (HEVC)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#encoding-presets-1",children:"Encoding Presets"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#tuning-presets-1",children:"Tuning Presets"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#costant-rate-factor-1",children:"Costant Rate Factor"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#profiles-1",children:"Profiles"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#h266-vvc",children:"h.266 (VVC)"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#vp8--webm",children:"VP8 & webM"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#costant-rate-factor-2",children:"Costant Rate Factor"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#vp9--webm",children:"VP9 & webM"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#constant-rate-factor",children:"Constant Rate Factor"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#lossless-encoding",children:"Lossless Encoding"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#advanced-settings",children:"Advanced Settings"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#opus-audio",children:"Opus Audio"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#av1--webm",children:"AV1 & webM"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#av1-svt-av1",children:"AV1 SVT-AV1"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#recordings",children:"Recordings"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#rtsp-streams",children:"RTSP Streams"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#timelapse-from-images",children:"Timelapse from Images"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#create-snapshots-from-videos",children:"Create Snapshots from Videos"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#generate-gif-from-video",children:"Generate GIF from Video"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#streaming",children:"Streaming"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#dynamic-adaptive-streaming-over-http-dash",children:"Dynamic Adaptive Streaming over HTTP (DASH)"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#adaptive-webm-dash-streaming",children:"Adaptive WebM DASH Streaming"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#playback",children:"Playback"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#probing--metadata",children:"Probing & Metadata"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#video-editing",children:"Video Editing"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#cutting",children:"Cutting"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#resolution-scaling",children:"Resolution Scaling"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#video-overlays",children:"Video Overlays"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#add-an-audio-track",children:"Add an Audio Track"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#waveform",children:"Waveform"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"ffmpeg -version"}),(0,r.jsx)(n.br,{}),"\n",(0,r.jsxs)(n.em,{children:["ffmpeg version 5.0-full_build-",(0,r.jsx)(n.a,{href:"http://www.gyan.dev",children:"www.gyan.dev"})," Copyright (c) 2000-2022 the FFmpeg developers built with gcc 11.2.0 (Rev5, Built by MSYS2 project)"]})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"conversions",children:"Conversions"}),"\n",(0,r.jsx)(n.p,{children:"Get audio from a video file:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i video.mp4 -vn -c:a copy song.mp3\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i video.mp4 -vn -c:a mp3 -b:a 128k -ar 44100 -ac 2 song.mp3\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"size=2456kB time=00:02:37.12 bitrate=128.0kbits/s speed=59.6x video:0kB audio:2456kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.013761%"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i song.m4a -af loudnorm -c:a mp3 -b:a 320k -ar 48000 song.mp3\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"size=12213kB time=00:05:12.60 bitrate=320.1kbits/s speed=16.8x video:0kB audio:12212kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.008781%"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Strip audio from a video file:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i video.mp4 -an -c:v copy video_only.mp4\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i video.mp4 -an video_only.h265\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["frame= 4707 fps=466 q=35.8 Lsize=659kB time=00:02:36.99 bitrate=34.4kbits/s speed=15.6x",(0,r.jsx)(n.br,{}),"\n","video:659kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%\r\nencoded 4707 frames in 10.08s (467.10 fps), 31.01 kb/s, Avg QP:34.70"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i https://my-domain.com/movie.mkv -t 00:02:30 -c:v h264 -b:v 2500k -c:a mp3 -b:a 128k -ar 44100 -ac 2 movie.mp4\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"video:398897kB audio:16473kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.321552%\r\n[libx264 @ 0000028f21bb09c0] kb/s:2477.36"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Convert ALL streams included in your input file using the MAP flag:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i video.mp4 -map 0 -c:a aac -c:v hevc output.mkv\n"})}),"\n",(0,r.jsx)(n.h3,{id:"h264-avc",children:"h.264 (AVC)"}),"\n",(0,r.jsx)(n.h4,{id:"encoding-presets",children:"Encoding Presets"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"ultrafast"}),"\n",(0,r.jsx)(n.li,{children:"superfast"}),"\n",(0,r.jsx)(n.li,{children:"veryfast"}),"\n",(0,r.jsx)(n.li,{children:"faster"}),"\n",(0,r.jsx)(n.li,{children:"fast"}),"\n",(0,r.jsx)(n.li,{children:"medium"}),"\n",(0,r.jsx)(n.li,{children:"slow"}),"\n",(0,r.jsx)(n.li,{children:"slower"}),"\n",(0,r.jsx)(n.li,{children:"veryslow"}),"\n",(0,r.jsx)(n.li,{children:"placebo"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"tuning-presets",children:"Tuning Presets"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"psnr"}),"\n",(0,r.jsx)(n.li,{children:"ssim"}),"\n",(0,r.jsx)(n.li,{children:"grain"}),"\n",(0,r.jsx)(n.li,{children:"zerolatency"}),"\n",(0,r.jsx)(n.li,{children:"fastdecode"}),"\n",(0,r.jsx)(n.li,{children:"animation"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"costant-rate-factor",children:"Costant Rate Factor"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"0"})," \u2013 ",(0,r.jsx)(n.code,{children:"51"})," (",(0,r.jsx)(n.em,{children:"lossless - low quality"}),"), default ",(0,r.jsx)(n.code,{children:"23"}),",  ",(0,r.jsx)(n.em,{children:"usable"})," range ",(0,r.jsx)(n.code,{children:"17"})," \u2013 ",(0,r.jsx)(n.code,{children:"28"})]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"profiles",children:"Profiles"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["-profile",":v"," baseline"]}),"\n",(0,r.jsxs)(n.li,{children:["-profile",":v"," high"]}),"\n",(0,r.jsxs)(n.li,{children:["-profile",":v"," high"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"leave out to let FFMPEG decide based on input (recommended)"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i video.mkv -c:v hevc -crf 23 -preset slower -tune zerolatency output.mp4\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"video:1422kB audio:2350kB subtitle:0kB other streams:0kB global headers:2kB muxing overhead: 4.637553%\r\nx265 [info]: frame I:     19, Avg QP:10.82  kb/s: 5285.69\r\nx265 [info]: frame P:   4689, Avg QP:15.41  kb/s: 52.07\r\nx265 [info]: Weighted P-Frames: Y:1.9% UV:1.8%\r\nx265 [info]: consecutive B-frames: 100.0%\r\nencoded 4708 frames in 307.38s (15.32 fps), 73.19 kb/s, Avg QP:15.39\r\n[aac @ 0000021ab0643d00] Qavg: 4054.659"}),"\n"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.adobe.com/devnet/video/articles/mp4_movie_atom.html",children:"The Movie Atom"})}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Move flags to start (",(0,r.jsx)(n.a,{href:"https://support.google.com/youtube/answer/1722171",children:"make file playable before fully downloaded"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i video.mkv -c:v h264 -crf 23 -maxrate 1M -bufsize 2M -movflags +faststart output.mp4\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"[mp4 @ 000001f50ef56140] Starting second pass: moving the moov atom to the beginning of the file\r\nframe= 4708 fps=716 q=-1.0 Lsize=    3418kB time=00:02:37.12 bitrate= 178.2kbits/s dup=1 drop=0 speed=23.9x"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"h265-hevc",children:"h.265 (HEVC)"}),"\n",(0,r.jsx)(n.h4,{id:"encoding-presets-1",children:"Encoding Presets"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"ultrafast"}),"\n",(0,r.jsx)(n.li,{children:"superfast"}),"\n",(0,r.jsx)(n.li,{children:"veryfast"}),"\n",(0,r.jsx)(n.li,{children:"faster"}),"\n",(0,r.jsx)(n.li,{children:"fast"}),"\n",(0,r.jsx)(n.li,{children:"medium"}),"\n",(0,r.jsx)(n.li,{children:"slow"}),"\n",(0,r.jsx)(n.li,{children:"slower"}),"\n",(0,r.jsx)(n.li,{children:"veryslow"}),"\n",(0,r.jsx)(n.li,{children:"placebo"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"tuning-presets-1",children:"Tuning Presets"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"psnr"}),"\n",(0,r.jsx)(n.li,{children:"ssim"}),"\n",(0,r.jsx)(n.li,{children:"grain"}),"\n",(0,r.jsx)(n.li,{children:"zerolatency"}),"\n",(0,r.jsx)(n.li,{children:"fastdecode"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"costant-rate-factor-1",children:"Costant Rate Factor"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"0"})," \u2013 ",(0,r.jsx)(n.code,{children:"51"})," (",(0,r.jsx)(n.em,{children:"lossless - low quality"}),"), default ",(0,r.jsx)(n.code,{children:"28"}),",  ",(0,r.jsx)(n.em,{children:"usable"})," range ",(0,r.jsx)(n.code,{children:"17"})," \u2013 ",(0,r.jsx)(n.code,{children:"28"})]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"profiles-1",children:"Profiles"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["-profile",":v"," baseline"]}),"\n",(0,r.jsxs)(n.li,{children:["-profile",":v"," high"]}),"\n",(0,r.jsxs)(n.li,{children:["-profile",":v"," high"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i video.mp4 -c:v libx265 -crf 28 -c:a aac -b:a 128k output.mp4\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Stream #0:0(und): Video: hevc (hev1 / 0x31766568), yuv420p(progressive), 480x360 [SAR 1:1 DAR 4:3], q=2-31, 29.97 fps, 30k tbn (default)\r\nStream #0:1(und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 128 kb/s (default)"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"h266-vvc",children:"h.266 (VVC)"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"not available yet"})}),"\n",(0,r.jsx)(n.h3,{id:"vp8--webm",children:"VP8 & webM"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i video.mp4 -c:v libvpx -b:v 1M -c:a libvorbis output.webm\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Stream #0:0(und): Video: vp8, yuv420p(progressive), 480x360 [SAR 1:1 DAR 4:3], q=2-31, 1000 kb/s, 29.97 fps, 1k tbn (default)\r\nStream #0:1(und): Audio: vorbis, 44100 Hz, stereo, fltp (default)"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"costant-rate-factor-2",children:"Costant Rate Factor"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"4"})," \u2013 ",(0,r.jsx)(n.code,{children:"63"})," (",(0,r.jsx)(n.em,{children:"high - low quality"}),"), ",(0,r.jsx)(n.a,{href:"https://trac.ffmpeg.org/wiki/Encode/VP8",children:"default 10"})]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i video.mp4 -c:v libvpx -crf 10 -b:v 1M -c:a libvorbis output.webm\n"})}),"\n",(0,r.jsx)(n.h3,{id:"vp9--webm",children:"VP9 & webM"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://developers.google.com/media/vp9",children:"Google VP9 Developer Docs"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"1-pass encoding with an average video bitrate of 1M:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i video.mp4 -c:v libvpx-vp9 -b:v 1M -c:a libvorbis output.webm\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Stream #0:0(und): Video: vp9, yuv420p(progressive), 480x360 [SAR 1:1 DAR 4:3], q=2-31, 1000 kb/s, 29.97 fps, 1k tbn (default)\r\nStream #0:1(und): Audio: vorbis, 44100 Hz, stereo, fltp (default)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"2-pass encoding:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i video.mp4 -c:v libvpx-vp9 -b:v 0 -crf 30 -pass 1 -an -f webm /dev/null&&ffmpeg -i video.mp4 -c:v libvpx-vp9 -b:v 0 -crf 30 -pass 2 -c:a libopus output.webm\n"})}),"\n",(0,r.jsx)(n.h4,{id:"constant-rate-factor",children:"Constant Rate Factor"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"0"})," \u2013 ",(0,r.jsx)(n.code,{children:"63"})," (",(0,r.jsx)(n.em,{children:"high - low quality"}),"), default ",(0,r.jsx)(n.code,{children:"31"}),",  ",(0,r.jsx)(n.em,{children:"usable"})," range ",(0,r.jsx)(n.code,{children:"15"})," \u2013 ",(0,r.jsx)(n.code,{children:"35"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Constant Quality 1-pass encoding:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i video.mp4 -c:v libvpx-vp9 -crf 31 -b:v 0 output.webm\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Stream #0:0(und): Video: vp9, yuv420p(progressive), 480x360 [SAR 1:1 DAR 4:3], q=2-31, 29.97 fps, 1k tbn (default)\r\nStream #0:1(und): Audio: opus, 48000 Hz, stereo, flt, 96 kb/s (default)"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Constrained Quality 1-pass encoding when ",(0,r.jsx)(n.code,{children:"b:v"})," > ",(0,r.jsx)(n.code,{children:"0"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i video.mp4 -c:v libvpx-vp9 -crf 31 -b:v 2500k output.webm\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Stream #0:0(und): Video: vp9, yuv420p(progressive), 480x360 [SAR 1:1 DAR 4:3], q=2-31, 2500 kb/s, 29.97 fps, 1k tbn (default)\r\nStream #0:1(und): Audio: opus, 48000 Hz, stereo, flt, 96 kb/s (default)"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"lossless-encoding",children:"Lossless Encoding"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"fmpeg -i video.mp4 -c:v libvpx-vp9 -lossless 1 output.webm\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Stream #0:0(und): Video: vp9, yuv420p(progressive), 480x360 [SAR 1:1 DAR 4:3], q=2-31, 29.97 fps, 1k tbn (default)\r\nStream #0:1(und): Audio: opus, 48000 Hz, stereo, flt, 96 kb/s (default)"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"advanced-settings",children:"Advanced Settings"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"http://wiki.webmproject.org/ffmpeg/vp9-encoding-guide",children:"wiki.webmproject.com"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://developers.google.com/media/vp9/settings/vod/",children:"Google VP9 Docs"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i video.mp4 -b:v 3600k -minrate 1800k -maxrate 5220k -tile-columns 2 -g 240 -threads 8 -quality good -crf 27 -c:v libvpx-vp9 -map 0 -sn -c:a libopus -ac 2 -b:a 128k -pass 1 -speed 4 output.webm&&ffmpeg -i video.mp4 -b:v 3600k -minrate 1800k -maxrate 5220k -tile-columns 3 -g 240 -threads 8 -quality good -crf 27 -c:v libvpx-vp9 -map 0 -sn -c:a libopus -ac 2 -b:a 128k -pass 2 -speed 4 -y output.webm\n"})}),"\n",(0,r.jsx)(n.h3,{id:"opus-audio",children:"Opus Audio"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://opus-codec.org/",children:"opus-codec.org"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i video.mp4 -c:a libopus -b:a 128k -ar 48000 -ac 2 output.opus\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Stream #0:1[0x2] (und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 122 kb/s (default)\r\nStream #0:1 -> #0:0 (aac (native) -> opus (libopus))"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"av1--webm",children:"AV1 & webM"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://trac.ffmpeg.org/wiki/Encode/AV1",children:"AV1 FFMPEG Docs"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i video.mp4 -c:v libaom-av1 -crf 27 -b:v 0 -strict experimental -c:a libopus -b:a 128k -movflags +faststart output.webm\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Stream #0:0(und): Video: av1, yuv420p(progressive), 480x360 [SAR 1:1 DAR 4:3], q=2-31, 29.97 fps, 1k tbn (default)\r\nStream #0:1(und): Audio: opus, 48000 Hz, stereo, flt, 128 kb/s (default)"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"av1-svt-av1",children:"AV1 SVT-AV1"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/OpenVisualCloud/SVT-AV1/",children:"Github"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://pypi.org/project/Av1an",children:"AV1an"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"recordings",children:"Recordings"}),"\n",(0,r.jsx)(n.h3,{id:"rtsp-streams",children:"RTSP Streams"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i rtsp://admin:instar@192.168.2.19:554/livestream/11 -c:v h264 -keyint_min 25 -g 50 -sc_threshold 0 recording.mp4\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"frame= 1017 fps= 30 q=-1.0 Lsize=   29399kB time=10:20:37.33 bitrate=   6.5kbits/s dup=341 drop=1 speed=1.09e+03x\r\nvideo:29098kB audio:279kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.074037%"}),"\n"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"* Minimum keyframe interval 25 / maximum for a GoP is 50 = 2s @ 25fps."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"timelapse-from-images",children:"Timelapse from Images"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'ls | cat -n | while read n f; do mv "$f" `printf "A_%03d.jpeg" $n`; done\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-framerate 1"}),": 1 fps"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-framerate 1/2"}),": 0.5 fps"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-framerate 1/10"}),": 0.1 fps"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -framerate 1 -i A_%03d.jpeg -r 25 -pix_fmt yuv420p timelapse.mp4\n"})}),"\n",(0,r.jsx)(n.p,{children:"Compress timelapse using x.265:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i timelapse.mp4 -c:v hevc -crf 23 -preset slower -tune zerolatency timelapse_h265.mp4\n"})}),"\n",(0,r.jsx)(n.p,{children:"Reduce resolution:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i timelapse_h265.mp4 -s 1280x720 timelapse_h265_720p.mp4\n"})}),"\n",(0,r.jsx)(n.h3,{id:"create-snapshots-from-videos",children:"Create Snapshots from Videos"}),"\n",(0,r.jsxs)(n.p,{children:["Create a snapshot every 45s starting with ",(0,r.jsx)(n.code,{children:"P_001.png"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i video.mp4 -f image2 -bt 20M -r 1/45 P_%03d.png\n"})}),"\n",(0,r.jsx)(n.p,{children:"Start at 30s and record 5 frames:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -ss 00:00:30.00 -i video.mp4 -frames:v 5 -f image2 -bt 10M 5frames_%03d.png\n"})}),"\n",(0,r.jsx)(n.h3,{id:"generate-gif-from-video",children:"Generate GIF from Video"}),"\n",(0,r.jsx)(n.p,{children:"Cut 10 seconds of the video starting at the 2min 30s mark:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -ss 00:02:30 -i video.mkv -t 00:00:10 -avoid_negative_ts 1 cut.mp4\n"})}),"\n",(0,r.jsx)(n.p,{children:"Resize the cut video:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i cut.mp4 -vf scale=640x360 -c:v h264 -crf 18 -c:a aac scaled.mp4\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Create a subtitle file ",(0,r.jsx)(n.code,{children:"captions.srt"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"1\r\n00:00:00,00 --\x3e 00:00:03,00\r\nThis is some text,\r\n\r\n2\r\n00:00:03,00 --\x3e 00:00:06,00\r\nand some more text,\r\n\r\n3\r\n00:00:06,00 --\x3e 00:00:09,00\r\nAnd now - The Punch Line!!\n"})}),"\n",(0,r.jsx)(n.p,{children:"Convert the SRT file to the ASS format:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i captions.srt captions.ass\n"})}),"\n",(0,r.jsx)(n.p,{children:"Hardcode the captions:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'ffmpeg -i scaled.mp4 -filter_complex "subtitles=captions.ass" subtitled.mp4\n'})}),"\n",(0,r.jsx)(n.p,{children:"Convert to GIF:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i subtitled.mp4 mygif.gif\n"})}),"\n",(0,r.jsxs)(n.p,{children:["For better results - better resolution, much smaller filesize - use ",(0,r.jsx)(n.a,{href:"https://gif.ski/",children:"Gifski"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i subtitled.mp4 subtitled_frame%04d.png\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"gifski -o mygif.gif subtitled_frame*.png\n"})}),"\n",(0,r.jsx)(n.h2,{id:"streaming",children:"Streaming"}),"\n",(0,r.jsx)(n.h3,{id:"dynamic-adaptive-streaming-over-http-dash",children:"Dynamic Adaptive Streaming over HTTP (DASH)"}),"\n",(0,r.jsx)(n.p,{children:"Start by creating input file versions with different resolutions:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i video.mp4 -c:v h264 -crf 22 -tune zerolatency -profile:v high -level:v 4.0 -maxrate 5000k -bufsize 10000k -r 25 -keyint_min 25 -g 50 -sc_threshold 0 -c:a aac -ar 44100 -b:a 128k -ac 2 -pix_fmt yuv420p -movflags +faststart 1080.mp4 \\\r\n-s 1280x720 -c:v h264 -crf 24 -tune zerolatency -profile:v high -level:v 4.0 -maxrate 2500k -bufsize 5000k -r 25 -keyint_min 25 -g 50 -sc_threshold 0 -c:a aac -ar 44100 -b:a 128k -ac 2 -pix_fmt yuv420p -movflags +faststart 720.mp4 \\\r\n-s 854x480 -c:v h264 -crf 30 -tune zerolatency -profile:v high -level:v 4.0 -maxrate 1250k -bufsize 2500k -r 25 -keyint_min 25 -g 50 -sc_threshold 0 -c:a aac -ar 44100 -b:a 96k -ac 2 -pix_fmt yuv420p -movflags +faststart 480.mp4 \\\r\n-s 640x360 -c:v h264 -crf 33 -tune zerolatency -profile:v high -level:v 4.0 -maxrate 900k -bufsize 1800k -r 25 -keyint_min 25 -g 50 -sc_threshold 0 -c:a aac -ar 44100 -b:a 96k -ac 2 -pix_fmt yuv420p -movflags +faststart 360.mp4 \\\r\n-s 320x240 -c:v h264 -crf 36 -tune zerolatency -profile:v high -level:v 4.0 -maxrate 625k -bufsize 1250k -r 25 -keyint_min 25 -g 50 -sc_threshold 0 -c:a aac -ar 22050 -b:a 64k -ac 1 -pix_fmt yuv420p -movflags +faststart 240.mp4\n"})}),"\n",(0,r.jsx)(n.p,{children:"Create file fragments:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.bento4.com/downloads/",children:"Install Bento4"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mp4fragment 1080.mp4 1080-f.mp4 && \\\r\nmp4fragment 720.mp4 720-f.mp4 && \\\r\nmp4fragment 480.mp4 480-f.mp4 && \\\r\nmp4fragment 360.mp4 360-f.mp4 && \\\r\nmp4fragment 240.mp4 240-f.mp4\n"})}),"\n",(0,r.jsx)(n.p,{children:"Generate the DASH Playlist:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mp4dash 240-f.mp4 360-f.mp4 480-f.mp4 720-f.mp4 1080-f.mp4\n"})}),"\n",(0,r.jsx)(n.h3,{id:"adaptive-webm-dash-streaming",children:"Adaptive WebM DASH Streaming"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/Dash-Industry-Forum/dash.js/wiki",children:"dash.js"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"http://wiki.webmproject.org/adaptive-streaming/instructions-to-playback-adaptive-webm-using-dash",children:"wiki.webmproject.org"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"playback",children:"Playback"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffplay rtsp://admin:instar@192.168.2.19:554/livestream/11\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Stream #0:0: Video: hevc (Main), yuv420p(tv), 2560x1440, 30 tbr, 90k tbn\r\nStream #0:1: Audio: aac (LC), 16000 Hz, mono, fltp"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"probing--metadata",children:"Probing & Metadata"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffprobe recording_h264.mp4\r\n\r\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from 'recording_h264.mp4':\r\n  Metadata:\r\n    major_brand     : isom\r\n    minor_version   : 512\r\n    compatible_brands: isomiso2avc1mp41\r\n    title           : instarsxrtpsion\r\n    encoder         : Lavf59.16.100\r\n  Duration: 10:20:37.34, start: 0.000000, bitrate: 6 kb/s\r\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 2560x1440, 7031 kb/s, 30 fps, 30 tbr, 15360 tbn (default)\r\n    Metadata:\r\n      handler_name    : VideoHandler\r\n      vendor_id       : [0][0][0][0]\r\n  Stream #0:1[0x2](und): Audio: aac (LC) (mp4a / 0x6134706D), 16000 Hz, mono, fltp, 0 kb/s (default)      \r\n    Metadata:\r\n      handler_name    : SoundHandler\r\n      vendor_id       : [0][0][0][0]\n"})}),"\n",(0,r.jsx)(n.p,{children:"Writing results to file:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffprobe -v quiet -print_format json -show_format -show_streams recording_h264.mp4 > recording_h264.json\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\r\n    "streams": [\r\n        {\r\n            "index": 0,\r\n            "codec_name": "h264",\r\n            "codec_long_name": "H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10",\r\n            "profile": "High",\r\n            "codec_type": "video",\r\n            "codec_tag_string": "avc1",\r\n            "codec_tag": "0x31637661",\r\n            "width": 2560,\r\n            "height": 1440,\r\n            "coded_width": 2560,\r\n            "coded_height": 1440,\r\n            "closed_captions": 0,\r\n            "film_grain": 0,\r\n            "has_b_frames": 2,\r\n            "pix_fmt": "yuv420p",\r\n            "level": 50,\r\n            "chroma_location": "left",\r\n            "field_order": "progressive",\r\n            "refs": 1,\r\n            "is_avc": "true",\r\n            "nal_length_size": "4",\r\n            "id": "0x1",\r\n            "r_frame_rate": "30/1",\r\n            "avg_frame_rate": "30/1",\r\n            "time_base": "1/15360",\r\n            "start_pts": 0,\r\n            "start_time": "0.000000",\r\n            "duration_ts": 520704,\r\n            "duration": "33.900000",\r\n            "bit_rate": "7031676",\r\n            "bits_per_raw_sample": "8",\r\n            "nb_frames": "1017",\r\n            "extradata_size": 46,\r\n            "disposition": {\r\n                "default": 1,\r\n                "dub": 0,\r\n                "original": 0,\r\n                "comment": 0,\r\n                "lyrics": 0,\r\n                "karaoke": 0,\r\n                "forced": 0,\r\n                "hearing_impaired": 0,\r\n                "visual_impaired": 0,\r\n                "clean_effects": 0,\r\n                "attached_pic": 0,\r\n                "timed_thumbnails": 0,\r\n                "captions": 0,\r\n                "descriptions": 0,\r\n                "metadata": 0,\r\n                "dependent": 0,\r\n                "still_image": 0\r\n            },\r\n            "tags": {\r\n                "language": "und",\r\n                "handler_name": "VideoHandler",\r\n                "vendor_id": "[0][0][0][0]"\r\n            }\r\n        },\r\n        {\r\n            "index": 1,\r\n            "codec_name": "aac",\r\n            "codec_long_name": "AAC (Advanced Audio Coding)",\r\n            "profile": "LC",\r\n            "codec_type": "audio",\r\n            "codec_tag_string": "mp4a",\r\n            "codec_tag": "0x6134706d",\r\n            "sample_fmt": "fltp",\r\n            "sample_rate": "16000",\r\n            "channels": 1,\r\n            "channel_layout": "mono",\r\n            "bits_per_sample": 0,\r\n            "id": "0x2",\r\n            "r_frame_rate": "0/0",\r\n            "avg_frame_rate": "0/0",\r\n            "time_base": "1/16000",\r\n            "start_pts": 0,\r\n            "start_time": "0.000000",\r\n            "duration_ts": 595797424,\r\n            "duration": "37237.339000",\r\n            "bit_rate": "61",\r\n            "nb_frames": "565",\r\n            "extradata_size": 5,\r\n            "disposition": {\r\n                "default": 1,\r\n                "dub": 0,\r\n                "original": 0,\r\n                "comment": 0,\r\n                "lyrics": 0,\r\n                "karaoke": 0,\r\n                "forced": 0,\r\n                "hearing_impaired": 0,\r\n                "visual_impaired": 0,\r\n                "clean_effects": 0,\r\n                "attached_pic": 0,\r\n                "timed_thumbnails": 0,\r\n                "captions": 0,\r\n                "descriptions": 0,\r\n                "metadata": 0,\r\n                "dependent": 0,\r\n                "still_image": 0\r\n            },\r\n            "tags": {\r\n                "language": "und",\r\n                "handler_name": "SoundHandler",\r\n                "vendor_id": "[0][0][0][0]"\r\n            }\r\n        }\r\n    ],\r\n    "format": {\r\n        "filename": "recording_h264.mp4",\r\n        "nb_streams": 2,\r\n        "nb_programs": 0,\r\n        "format_name": "mov,mp4,m4a,3gp,3g2,mj2",\r\n        "format_long_name": "QuickTime / MOV",\r\n        "start_time": "0.000000",\r\n        "duration": "37237.339000",\r\n        "size": "30104435",\r\n        "bit_rate": "6467",\r\n        "probe_score": 100,\r\n        "tags": {\r\n            "major_brand": "isom",\r\n            "minor_version": "512",\r\n            "compatible_brands": "isomiso2avc1mp41",\r\n            "title": "instarsxrtpsion",\r\n            "encoder": "Lavf59.16.100"\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Get recording length in sexagesimal format (HH:MM:SS",":ms",") :"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffprobe -v error -select_streams v:0 -show_entries stream=duration -of default=noprint_wrappers=1:nokey=1 -sexagesimal recording_h264.mp4\r\n\r\n0:00:33.900000\n"})}),"\n",(0,r.jsx)(n.p,{children:"Get recording bitrate:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffprobe -v error -select_streams v:0 -show_entries stream=bit_rate -of default=noprint_wrappers=1:nokey=1 recording_h264.mp4\r\n\r\n7031676\n"})}),"\n",(0,r.jsx)(n.p,{children:"Get embedded metadata:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i '03. No Regrets.mp3' -print_format json -f ffmetadata meta.txt\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-conf",children:";FFMETADATA1\r\ntitle=No Regrets\r\nartist=Joss Stone\r\nARTISTS=Joss Stone\r\nalbum=Never Forget My Love\r\nalbum_artist=Joss Stone\r\ntrack=3\r\ndisc=1/1\r\nTLEN=223000\r\nTSRC=QMDA62165268\r\nBARCODE=196292637489\r\nITUNESADVISORY=0\r\ncomposer=Joss Stone\r\ngenre=R&B\r\ndate=2022\n"})}),"\n",(0,r.jsx)(n.h2,{id:"video-editing",children:"Video Editing"}),"\n",(0,r.jsx)(n.h3,{id:"cutting",children:"Cutting"}),"\n",(0,r.jsx)(n.p,{children:"Get a 10s excerpt of your video starting from the 30s marker:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -ss 00:00:30.000 -i video.mp4 -t 00:00:10.000 video_excerpt.mp4\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -ss 00:00:30.000 -i video.mp4 -t 00:00:10.000 -c copy video_excerpt.mp4\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"frame=329 fps=0.0 q=-1.0 Lsize=395kB time=00:00:10.00 bitrate= 323.3kbits/s speed=2.77e+03x\r\nvideo:256kB audio:129kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 2.728323%"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"resolution-scaling",children:"Resolution Scaling"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://ffmpeg.org/ffmpeg-all.html#Video-size",children:"Video Size"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i video.mp4 -s 1280x720 output.mp4\n"})}),"\n",(0,r.jsx)(n.h3,{id:"video-overlays",children:"Video Overlays"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'ffmpeg -i video.mp4 -i logo.png -filter_complex "overlay=0:0" -codec:a copy watermarked.mp4\n'})}),"\n",(0,r.jsx)(n.p,{children:"This can also be used to watermark images:"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"overlay=0:0"}),": Position from left top ",(0,r.jsx)(n.em,{children:"horizontal:vertical"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i source.jpg -i logo.png -filter_complex \u201coverlay=0:0\u201d watermarked.jpg\n"})}),"\n",(0,r.jsx)(n.h3,{id:"add-an-audio-track",children:"Add an Audio Track"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i video.mp4 -i 03_No_Regrets.mp3 -map 0:v -map 1:a -c copy result.mp4\n"})}),"\n",(0,r.jsx)(n.h3,{id:"waveform",children:"Waveform"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://ffmpeg.org/ffmpeg-filters.html#showwaves",children:"FFMPEG Waveforms"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://ffmpeg.org/ffmpeg-utils.html#Color",children:"Colours"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Single audio channel:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i mysong.mp3 -filter_complex \"[0:a]showwaves=mode=cline:s=640x480:colors=purple[v]\" -map '[v]' -map '0:a' -c:a copy -pix_fmt yuv420p mysong_waveform.mp4\n"})}),"\n",(0,r.jsx)(n.p,{children:"Stereo channels:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i mysong.mp3 -filter_complex \"[0:a]showwaves=split_channels=1:mode=cline:s=640x480:colors=green[v]\" -map '[v]' -map '0:a' -c:a copy -pix_fmt yuv420p mysong_waveform.mp4\n"})}),"\n",(0,r.jsx)(n.p,{children:"Show Volume:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i  mysong.mp3 -t 00:01:00 -filter_complex \"[0:a]showvolume,scale=640:-1,pad=640:480 :(ow-iw)/2:(oh-ih)/2[v]\" -map '[v]' -map '0:a' -c:a copy -pix_fmt yuv420p mysong_volume.mp4\n"})}),"\n",(0,r.jsx)(n.p,{children:"Frequencies:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Default style"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i mysong.mp3 -t 00:01:00 -filter_complex \"[0:a]showfreqs=s=640x480[v]\" -map '[v]' -map '0:a' -c:a copy -pix_fmt yuv420p mysong_freq.mp4\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Coloured line style"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i mysong.mp3 -filter_complex \"[0:a]showwaves=mode=line:s=640x480:colors=red[v]\" -map '[v]' -map '0:a' -c:a copy -pix_fmt yuv420p mysong_freq.mp4\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Cline frequency style"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i mysong.mp3 -filter_complex \"[0:a]showwaves=mode=cline:s=640x480:colors=dodgerblue[v]\" -map '[v]' -map '0:a' -c:a copy -pix_fmt yuv420p mysong_freq.mp4\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},32861:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-8f745c02d0c455477788a770b5badbe1.jpg"},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var r=s(296540);const i={},a=r.createContext(i);function l(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);