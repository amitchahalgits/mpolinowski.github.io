"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[84927],{672251:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var a=t(785893),s=t(603905);const r={sidebar_position:5970,slug:"2022-11-19",title:"Web3.js Blockchain Application",authors:"mpolinowski",tags:["Javascript"],description:"Ethereum and Metamask for Decentralized Authentication"},l=void 0,i={id:"Development/Javascript/2022-11-19-web3-javascript-app/index",title:"Web3.js Blockchain Application",description:"Ethereum and Metamask for Decentralized Authentication",source:"@site/docs/Development/Javascript/2022-11-19-web3-javascript-app/index.md",sourceDirName:"Development/Javascript/2022-11-19-web3-javascript-app",slug:"/Development/Javascript/2022-11-19-web3-javascript-app/2022-11-19",permalink:"/docs/Development/Javascript/2022-11-19-web3-javascript-app/2022-11-19",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Development/Javascript/2022-11-19-web3-javascript-app/index.md",tags:[{label:"Javascript",permalink:"/docs/tags/javascript"}],version:"current",sidebarPosition:5970,frontMatter:{sidebar_position:5970,slug:"2022-11-19",title:"Web3.js Blockchain Application",authors:"mpolinowski",tags:["Javascript"],description:"Ethereum and Metamask for Decentralized Authentication"},sidebar:"tutorialSidebar",previous:{title:"TypeScript 2.0 in React 19 (2023)",permalink:"/docs/Development/Javascript/2022-11-29-react-typescript-intro-2023/2022-11-29"},next:{title:"WebRTC Introduction - Interactive Connectivity Establishment",permalink:"/docs/Development/Javascript/2022-11-10-webrtc-introduction-video-chat-part2/2022-11-10"}},o={},c=[{value:"Web3.js Library",id:"web3js-library",level:2},{value:"Ethereum Wallet",id:"ethereum-wallet",level:2},{value:"Building the Application",id:"building-the-application",level:2},{value:"The Login Screen",id:"the-login-screen",level:3},{value:"The Dashboard",id:"the-dashboard",level:3},{value:"Scripting",id:"scripting",level:2},{value:"Do you even have an Ethereum Wallet?",id:"do-you-even-have-an-ethereum-wallet",level:3},{value:"Login Button",id:"login-button",level:3},{value:"Load Dashboard after Login",id:"load-dashboard-after-login",level:3},{value:"Displaying Ethereum Stats",id:"displaying-ethereum-stats",level:3},{value:"Web3 Logout",id:"web3-logout",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.ah)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"Shenzhen, China",src:t(208782).Z+"",width:"2208",height:"757"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#web3js-library",children:"Web3.js Library"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#ethereum-wallet",children:"Ethereum Wallet"})}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"#building-the-application",children:"Building the Application"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#the-login-screen",children:"The Login Screen"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#the-dashboard",children:"The Dashboard"})}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"#scripting",children:"Scripting"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#do-you-even-have-an-ethereum-wallet",children:"Do you even have an Ethereum Wallet?"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#login-button",children:"Login Button"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#load-dashboard-after-login",children:"Load Dashboard after Login"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#displaying-ethereum-stats",children:"Displaying Ethereum Stats"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#web3-logout",children:"Web3 Logout"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["Following along a tutorial by ",(0,a.jsx)(n.a,{href:"https://hashnode.com/@unclebigbay",children:"Ayodele Samuel Adebayo"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.a,{href:"https://web3js.org/",children:"Web3.js"})," is a collection of libraries that allow you to interact with a local or remote Ethereum node using HTTP, IPC, or WebSocket. Web3.js can be used in the frontend or backend of an application to read data from the blockchain."]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Blockchain"})," authentication can be used to protect application with public data. It helps identify who is accessing the website and what data should be accessible for the logged-in user. This is the evolution coming from a ",(0,a.jsx)(n.strong,{children:"Basic Authentication"})," system with a username and password in ",(0,a.jsx)(n.code,{children:"web1"})," to ",(0,a.jsx)(n.strong,{children:"OAuth"})," system allowing users to use their social media logins to login to another system with ",(0,a.jsx)(n.code,{children:"web2"})," and on to ",(0,a.jsx)(n.code,{children:"web3"})," - a decentralized system that does not involve a third-party that holds your data for you. Every user has complete control over their personal data using a ",(0,a.jsx)(n.strong,{children:"Decentralised Identity"}),"."]}),"\n",(0,a.jsx)(n.p,{children:"As a proof of work we can build an application that:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Has a login section where the user can connect to their wallet."}),"\n",(0,a.jsx)(n.li,{children:"Has a dashboard section to display the logged-in user's wallet address and their Ethereum account balance."}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"web3js-library",children:"Web3.js Library"}),"\n",(0,a.jsxs)(n.p,{children:["The Web3 library can be installed as a ",(0,a.jsx)(n.a,{href:"https://www.npmjs.com/package/web3",children:"Node module"}),". But to get started it can also be linked in from a ",(0,a.jsx)(n.a,{href:"https://cdnjs.com/libraries/web3",children:"CDN"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-html",children:'<script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.8.1/web3.min.js" integrity="sha512-vtUOC0YIaNm/UutU7yfnwqnF9LOYnXtpHe2kwi1nvJNloeGQuncNBiEKP/3Ww3D62USAhbXGsnYpAYoiDsa+wA==" crossorigin="anonymous" referrerpolicy="no-referrer"><\/script>\n'})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Update"}),": There is now a new ",(0,a.jsx)(n.a,{href:"https://cdnjs.com/libraries/web3/4.0.1-alpha.1",children:"alpha version 4"})," available."]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-html",children:'<script src="https://cdnjs.cloudflare.com/ajax/libs/web3/4.0.1-alpha.1/web3.min.js" integrity="sha512-53NYeuuMZACjFqIMYEeKpIAURC/HYaAKFQ3InNgTmS45BX7qNOMmjgmE5Fvidj0+hHHC9ICYi5L4AAIhqG2fOQ==" crossorigin="anonymous" referrerpolicy="no-referrer"><\/script>\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"index.html"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-html",children:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/4.0.1-alpha.1/web3.min.js"\n            integrity="sha512-53NYeuuMZACjFqIMYEeKpIAURC/HYaAKFQ3InNgTmS45BX7qNOMmjgmE5Fvidj0+hHHC9ICYi5L4AAIhqG2fOQ=="\n            crossorigin="anonymous"\n            referrerpolicy="no-referrer"><\/script>\n    <link rel="stylesheet" href="styles.css" />\n    <title>Web3.js Login Test</title>\n  </head>\n  <body></body>\n  <script src="./scripts.js"><\/script>\n</html>\n'})}),"\n",(0,a.jsx)(n.h2,{id:"ethereum-wallet",children:"Ethereum Wallet"}),"\n",(0,a.jsxs)(n.p,{children:["To be able to authenticate using the Ethereum Blockchain we need to setup a Ethereum Wallet on our device first. We can use ",(0,a.jsx)(n.a,{href:"https://metamask.io/download/",children:"Metamask"})," to interact with our Ethereum account via a web browser - e.g. as a ",(0,a.jsx)(n.a,{href:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn",children:"Chrome Plugin"}),":"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"Web3 and Dapp Development",src:t(128938).Z+"",width:"1092",height:"266"})}),"\n",(0,a.jsxs)(n.p,{children:["Create your account and generate your ",(0,a.jsx)(n.strong,{children:"Master Key"})," and keep it somewhere save:"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"Web3 and Dapp Development",src:t(686732).Z+"",width:"874",height:"552"})}),"\n",(0,a.jsx)(n.h2,{id:"building-the-application",children:"Building the Application"}),"\n",(0,a.jsx)(n.p,{children:"Now that we have Web3.js and an Ethereum wallet installed we can start building the interface. Add the following blocks inside the Body tag."}),"\n",(0,a.jsx)(n.h3,{id:"the-login-screen",children:"The Login Screen"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"index.html"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-html",children:'<section class="login-section">\n    <button class="login-btn">\ud83d\udd13 Log in with Web3</button>\n    <span class="instruction">\n        Ensure to have an Ethereum based wallet installed i.e MetaMask\n    </span>\n</section>\n'})}),"\n",(0,a.jsx)(n.h3,{id:"the-dashboard",children:"The Dashboard"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"index.html"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-html",children:'\x3c!-- DASHBOARD SECTION --\x3e\n<section class="dashboard-section">\n    <h2 class="wallet-status">Wallet Connected! \ud83e\udd1d</h2>\n    <h3 class="wallet-address-heading">\n        ETH Wallet Address:\n        <span class="wallet-address"></span>\n    </h3>\n    <h3 class="wallet-balance-heading">\n        ETH Balance:\n        <span class="wallet-balance"></span>\n    </h3>\n    <button class="logout-btn">\ud83d\udd10 Log out</button>\n</section>\n'})}),"\n",(0,a.jsx)(n.h2,{id:"scripting",children:"Scripting"}),"\n",(0,a.jsx)(n.h3,{id:"do-you-even-have-an-ethereum-wallet",children:"Do you even have an Ethereum Wallet?"}),"\n",(0,a.jsx)(n.p,{children:"On page load, check if the user has an Ethereum wallet installed. Else prompt the user with a message to install a wallet. If the user is already logged in simply load the dashboard:"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"scripts.js"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'// Global wallet address variable\nwindow.userWalletAddress = null;\n\n// Check if metamask is available and if user is logged in already\nwindow.onload = async (event) => {\n\n  // Check if ethereum extension is installed\n  if (window.ethereum) {\n    // Create instance\n    window.web3 = new Web3(window.ethereum);\n  } else {\n    // Prompt to install\n    alert("Please install MetaMask or any Ethereum Extension Wallet");\n  }\n  // Check if already logged in and update the global userWalletAddress variable\n  window.userWalletAddress = window.localStorage.getItem("userWalletAddress");\n  // Show dashboard\n  showUserDashboard();\n};\n'})}),"\n",(0,a.jsx)(n.h3,{id:"login-button",children:"Login Button"}),"\n",(0,a.jsx)(n.p,{children:"When the Metamask extension is installed but the user is not yet logged in we need a login function. Bind the login button to this function:"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"scripts.js"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'// Web3 login function\nconst loginWithEth = async () => {\n    // Check if there is global instance\n    if (window.web3) {\n      try {\n        // Get the user\'s account\n        const selectedAccount = await window.ethereum\n          .request({\n            // Prompt metamask to login\n            method: "eth_requestAccounts",\n          })\n          .then((accounts) => accounts[0])\n          .catch(() => {\n            // Catch cancelled login\n            throw Error("Please select an account");\n          });\n  \n        // Set global wallet address variable\n        window.userWalletAddress = selectedAccount;\n  \n        // Store in local storage => can be moved to db later\n        window.localStorage.setItem("userWalletAddress", selectedAccount);\n  \n        // Show dashboard\n        showUserDashboard();\n  \n      } catch (error) {\n        alert(error);\n      }\n    } else {\n      alert("Wallet not found");\n    }\n  };\n  \n  // Bind function to login button\n  document.querySelector(".login-btn").addEventListener("click", loginWithEth);\n'})}),"\n",(0,a.jsx)(n.h3,{id:"load-dashboard-after-login",children:"Load Dashboard after Login"}),"\n",(0,a.jsx)(n.p,{children:"Check if a user is connected to their wallet address. If they are not connected, display the login section. Once connected redirect the user to the dashboard section:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'// Show the user dashboard\nconst showUserDashboard = async () => {\n\n    // If not logged in\n    if (!window.userWalletAddress) {\n  \n      // Change the page title\n      document.title = "Web3 Login";\n  \n      // Show the login\n      document.querySelector(".login-section").style.display = "flex";\n  \n      // Hide dashboard\n      document.querySelector(".dashboard-section").style.display = "none";\n      return false;\n    }\n  \n    // change the page title\n    document.title = "Metamask Dashboard";\n  \n    // Hide the login\n    document.querySelector(".login-section").style.display = "none";\n  \n    // Show dashboard\n    document.querySelector(".dashboard-section").style.display = "flex";\n};\n'})}),"\n",(0,a.jsx)(n.h3,{id:"displaying-ethereum-stats",children:"Displaying Ethereum Stats"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'// Show wallet address from stored variable\nconst showUserWalletAddress = () => {\n  const walletAddressEl = document.querySelector(".wallet-address")\n  walletAddressEl.innerHTML = window.userWalletAddress\n}\n\n// Get wallet balance\nconst getWalletBalance = async () => {\n    if (!window.userWalletAddress) {\n      return false\n    }\n    const balance = await window.web3.eth.getBalance(window.userWalletAddress)\n    // Convert the balance to ether\n    document.querySelector(".wallet-balance").innerHTML = web3.utils.fromWei(\n      balance,\n      "ether"\n    )\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"Web3 and Dapp Development",src:t(164389).Z+"",width:"1143",height:"442"})}),"\n",(0,a.jsx)(n.h3,{id:"web3-logout",children:"Web3 Logout"}),"\n",(0,a.jsxs)(n.p,{children:["To logout we need to set the global ",(0,a.jsx)(n.code,{children:"userWalletAddress"})," variable to ",(0,a.jsx)(n.code,{children:"null"})," and remove the ",(0,a.jsx)(n.code,{children:"userWalletAddress"})," from the browser ",(0,a.jsx)(n.code,{children:"localStorage"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'// Web3 logout\nconst logout = () => {\n  // Set the global userWalletAddress to null\n  window.userWalletAddress = null\n\n  // Remove wallet address from local storage\n  window.localStorage.removeItem("userWalletAddress")\n\n  // Show the user dashboard\n  showUserDashboard()\n}\n\n// Bind function to logout button\ndocument.querySelector(".logout-btn").addEventListener("click", logout)\n'})})]})}function h(e={}){const{wrapper:n}={...(0,s.ah)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},603905:(e,n,t)=>{t.d(n,{ah:()=>c});var a=t(667294);function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,s=function(e,n){if(null==e)return{};var t,a,s={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(s[t]=e[t]);return s}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}var o=a.createContext({}),c=function(e){var n=a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},h=a.forwardRef((function(e,n){var t=e.components,s=e.mdxType,r=e.originalType,o=e.parentName,h=i(e,["components","mdxType","originalType","parentName"]),u=c(t),p=s,b=u["".concat(o,".").concat(p)]||u[p]||d[p]||r;return t?a.createElement(b,l(l({ref:n},h),{},{components:t})):a.createElement(b,l({ref:n},h))}));h.displayName="MDXCreateElement"},128938:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/Web3-Javascript_App_01-9546ac20d7b2cd06c1e52d15e5c219d5.png"},686732:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/Web3-Javascript_App_02-ce8f25896a257874ed3039df46130a5f.png"},164389:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/Web3-Javascript_App_03-61e4ba0c77152a7701e77f2fc5b4c714.png"},208782:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-e38404fdf0e14587f660e537829bfab5.jpg"}}]);