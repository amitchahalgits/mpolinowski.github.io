<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Development/Javascript/2021-09-08--websockets-html-video/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.0">
<title data-rh="true">HTML Video over Websockets | Mike Polinowski</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://mpolinowski.github.io/docs/Development/Javascript/2021-09-08--websockets-html-video/2021-09-08"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="HTML Video over Websockets | Mike Polinowski"><meta data-rh="true" name="description" content="Shenzhen, China"><meta data-rh="true" property="og:description" content="Shenzhen, China"><link data-rh="true" rel="icon" href="/img/icons/favicon-32x32.png"><link data-rh="true" rel="canonical" href="https://mpolinowski.github.io/docs/Development/Javascript/2021-09-08--websockets-html-video/2021-09-08"><link data-rh="true" rel="alternate" href="https://mpolinowski.github.io/docs/Development/Javascript/2021-09-08--websockets-html-video/2021-09-08" hreflang="en"><link data-rh="true" rel="alternate" href="https://mpolinowski.github.io/docs/Development/Javascript/2021-09-08--websockets-html-video/2021-09-08" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Mike Polinowski RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Mike Polinowski Atom Feed">




<link rel="icon" href="/img/angular_momentum.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37,194,160)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/angular_momentum.png">
<link rel="mask-icon" href="/img/angular_momentum.png" color="rgb(33,33,33)">
<meta name="msapplication-TileImage" content="/img/angular_momentum.png">
<meta name="msapplication-TileColor" content="#000">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-P74BDWF0C6"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-P74BDWF0C6",{})</script><link rel="stylesheet" href="/assets/css/styles.08c8c484.css">
<script src="/assets/js/runtime~main.d611b206.js" defer="defer"></script>
<script src="/assets/js/main.35b0b7ac.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/angular_momentum.png" alt="Mike Polinowski :: Dev Notebook" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/angular_momentum.png" alt="Mike Polinowski :: Dev Notebook" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Mike Polinowski</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/docs/tags">Tags</a><a class="navbar__item navbar__link" href="/Search">Search</a><a href="https://mpolinowski.github.io/Personal" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">About<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/mpolinowski" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/development">Development</a><button aria-label="Collapse sidebar category &#x27;Development&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/javascript">Javascript</a><button aria-label="Collapse sidebar category &#x27;Javascript&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2023-12-31-js-typescript-rest/2023-12-31">Typescript for Web APIs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2023-12-14-reactjs-typescript-2023/2023-12-14">React.js with Typescript 2023</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2023-06-04-nodejs-typescript-sql/2023-06-04">Node / Express with Typescript - (Re)Introduction 2023</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2023-04-01-reactjs-2023/2023-04-01">React.js 2023 - A (Re)Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2023-02-13-gatsby-meili-search-starter/2023-02-13">MeiLi Search for your Gatsby.js Blog</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2023-02-12-react-meili-search-starter/2023-02-12">React Frontend for MeiLi Search</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2022-12-29-reactive-search-starter/2022-12-29">Reactive Search Starter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2022-12-11-11ty-starter/2022-12-11">11ty Static Site Generator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2022-11-29-react-typescript-intro-2023/2022-11-29">TypeScript 2.0 in React 19 (2023)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2022-11-19-web3-javascript-app/2022-11-19">Web3.js Blockchain Application</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2022-11-10-webrtc-introduction-video-chat-part2/2022-11-10">WebRTC Introduction - Interactive Connectivity Establishment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2022-10-30-webrtc-introduction-video-chat-part1/2022-10-30">WebRTC Introduction - Client Side Signalling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2022-10-29-webrtc-introduction-realtime-chat/2022-10-29">WebRTC Introduction - Realtime Chat</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2022-07-01-docusaurus-introduction/2022-07-01">Docusaurus Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2022-03-01--json-apis-training/2022-03-01">Working with JSON APIs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2021-09-10--websocket-recconects/2021-09-10">Reconnecting Websockets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2021-09-10--notifications-alerts-as-toast/2021-09-10">Convert Alerts into Toasts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2021-09-09--websocket-NGINX/2021-09-09">NGINX as a Proxy for Websockets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2021-09-09--websocket-HAproxy/2021-09-09">HAProxy Loadbalancing and Websockets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Development/Javascript/2021-09-08--websockets-html-video/2021-09-08">HTML Video over Websockets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2021-09-07--intro-to-websockets/2021-09-07">Introduction to Websockets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2021-06-04--mqtt-dashboard-react/2021-06-04">React Dashboard for MQTT</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2021-06-02--mqtt-cheat-sheet/2021-06-02">Mosquitto MQTT Cheat Sheet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2021-06-01--mqtt-with-reactjs/2021-06-01">MQTT Webfrontend with React.js</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2021-05-12-carbon-design-react-part3/2021-05-12">Carbon Design System in React.js - Part III</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2021-05-11-carbon-design-react-part2/2021-05-11">Carbon Design System in React.js - Part II</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2021-05-10-carbon-design-react/2021-05-10">Carbon Design System in React.js - Part I</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2021-05-09-electron13-and-react/2021-05-09">Electron@13 and Create-React-App</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2021-05-08-electron13-gatsby-wrapper/2021-05-08">Electron@13 as a Gatsby.js Wrapper</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2021-05-07-electron-cross-platform-apps/2021-05-07">Electron for Cross Platform Applications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2021-02-14-next-js-2021/2021-02-14">Next.js in 2021</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2020-01-12--node-express-redirect-server/2020-01-12">Web traffic redirection with Node and Express on CentOS8</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2019-08-02--building-an-mqtt-interface/2019-08-02">Building a MQTT Interface</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2018-01-17--server-side-render-react-router/2018-01-17">Server Rendering with React and React Router</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2018-01-15--react-transition-group-demo/2018-01-15">react-transition-group</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2018-01-07--gatsby-material-ui-starter/2018-01-07">Gatsby Material UI Starter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2017-12-17--gatsby-reactstrap/2017-12-17">Gatsby.js with Bootstrap 4</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2017-12-14--gatsby-wiki/2017-12-14">Gatsby.js Knowledgebase</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2017-12-09--next-start/2017-12-09">Next.js Server Side Rendering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2017-12-07--react-router-4/2017-12-07">React Router 4</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2017-09-03--react-under-the-hood/2017-09-03">React under the Hood</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2017-08-21--reactive-material/2017-08-21">create-react-app and Material-UI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2017-08-15--gatsby-blog-starter/2017-08-15">Gatsby Blog Starter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2017-08-07--google-analytics-amp/2017-08-07">Google Analytics in AMP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2017-07-24--obligatory-react-todo-list/2017-07-24">React TODO List</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2017-07-22--caloric-burn/2017-07-22">Food Caloric Table App</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2017-07-04--random-password-generator/2017-07-04">Random Password Generator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2016-08-11--node-express-static-wiki/2016-08-11">Node Express Static</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2016-06-01--node-express-mongodb/2016-06-01">Node/Express with MongoDB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2016-05-27--javascript-apis-and-ajax/2016-05-27">JavaScript and Getting Started with APIs and AJAX</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2010-01-05--markdown-live-code/2010-01-05">React-Live &amp; Code example</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Development/Javascript/2010-01-01--mdx/2010-01-01">Markdown Cheatsheet</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/python">Python</a><button aria-label="Expand sidebar category &#x27;Python&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/go">Go</a><button aria-label="Expand sidebar category &#x27;Go&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/graphs">Graphs</a><button aria-label="Expand sidebar category &#x27;Graphs&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/react-native">React Native</a><button aria-label="Expand sidebar category &#x27;React Native&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/magento">Magento</a><button aria-label="Expand sidebar category &#x27;Magento&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/misc">Misc</a><button aria-label="Expand sidebar category &#x27;Misc&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/devops">DevOps</a><button aria-label="Expand sidebar category &#x27;DevOps&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/machine-learning-ai-and-computer-vision">Machine Learning, AI and Computer Vision</a><button aria-label="Expand sidebar category &#x27;Machine Learning, AI and Computer Vision&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/automation-deep-vision-and-robotics">Automation, Deep Vision and Robotics</a><button aria-label="Expand sidebar category &#x27;Automation, Deep Vision and Robotics&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/development"><span itemprop="name">Development</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/javascript"><span itemprop="name">Javascript</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">HTML Video over Websockets</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>HTML Video over Websockets</h1></header><p><img alt="Shenzhen, China" src="/assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-dd2c04030bd344a6c433c240ed2c2bba.jpg" width="1500" height="374"></p>
<ul>
<li><a href="#html-frontend-ws-client">HTML Frontend (WS Client)</a></li>
<li><a href="#websocket-server">Websocket Server</a></li>
<li><a href="#user-notifications">User Notifications</a></li>
<li><a href="#auto-reconnect-the-websocket">Auto-Reconnect the Websocket</a></li>
</ul>
<p>This is a frontend client for the INSTAR WQHD (<code>IN-9408 2k+</code>) camera websocket server. It connects to the server and displays the camera&#x27;s live video stream inside an HTML5 video tag.</p>
<h2 id="html-frontend-ws-client">HTML Frontend (WS Client)</h2>
<p><img alt="HTML Video over Websockets" src="/assets/images/ws_html_video_01-1248c1a608e0e7c871f0582d5017c3c2.png" width="1050" height="972"></p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;meta http-equiv=&quot;Content-Security-Policy&quot;  content=&quot;connect-src * &#x27;unsafe-inline&#x27;;&quot;&gt;
        &lt;!-- Bootstrap CSS --&gt;
        &lt;link href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot; integrity=&quot;sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://unpkg.com/notie/dist/notie.min.css&quot;&gt;
        &lt;style&gt;
            /* override styles here */
            .notie-container {
            box-shadow: none;
            }
        &lt;/style&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;nav class=&quot;navbar sticky-top navbar-dark bg-dark mb-3&quot;&gt;
            &lt;div class=&quot;container-fluid&quot;&gt;
                &lt;a class=&quot;navbar-brand&quot; href=&quot;#&quot;&gt;
                    &lt;img src=&quot;instar.svg&quot; alt=&quot;&quot; width=&quot;156&quot; height=&quot;45&quot; class=&quot;d-inline-block&quot;&gt;
                &lt;/a&gt;
                &lt;div class=&quot;d-flex text-light me-2&quot; id=&quot;status&quot;&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/nav&gt;
        &lt;div class=&quot;container-fluid&quot;&gt;
            &lt;div class=&quot;row justify-content-between&quot;&gt;
                &lt;div class=&quot;col&quot;&gt;
                    &lt;div class=&quot;container-md&quot; id=&quot;connection_paramter&quot;&gt;
                        &lt;table class=&quot;table table-hover&quot;&gt;
                        &lt;thead&gt;
                            &lt;tr&gt;
                                &lt;th scope=&quot;col&quot;&gt;Websocket&lt;/th&gt;
                                &lt;th scope=&quot;col&quot;&gt;Configuration&lt;/th&gt;
                            &lt;/tr&gt;
                        &lt;/thead&gt;
                        &lt;tbody&gt;
                            &lt;tr&gt;
                                &lt;th width=&quot;200px&quot; scope=&quot;row&quot;&gt;WS Protocol&lt;/th&gt;
                                &lt;td&gt;
                                    &lt;select id=&quot;protocol&quot; class=&quot;form-select&quot;&gt;
                                        &lt;option value=&quot;ws&quot; selected=&quot;selected&quot;&gt;ws&lt;/option&gt;
                                        &lt;option value=&quot;wss&quot;&gt;wss&lt;/option&gt;
                                    &lt;/select&gt;
                                &lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                                &lt;th scope=&quot;row&quot;&gt;WS Hostname&lt;/th&gt;
                                &lt;td&gt;
                                    &lt;div class=&quot;input-group&quot;&gt;
                                        &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;hostname&quot; value=&quot;192.168.2.19&quot;/&gt;
                                    &lt;/div&gt;
                                &lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                                &lt;th scope=&quot;row&quot;&gt;WS Port&lt;/th&gt;
                                &lt;td&gt;
                                    &lt;div class=&quot;input-group&quot;&gt;
                                        &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;port&quot; value=&quot;80&quot;/&gt;
                                    &lt;/div&gt;
                                &lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                                &lt;th scope=&quot;row&quot;&gt;WS Endpoint&lt;/th&gt;
                                &lt;td&gt;
                                    &lt;div class=&quot;input-group&quot;&gt;
                                        &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;endpoint&quot; value=&quot;/ws&quot; /&gt;
                                    &lt;/div&gt;
                                &lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                                &lt;th scope=&quot;row&quot;&gt;Connection&lt;/th&gt;
                                &lt;td&gt;
                                    &lt;div class=&quot;d-flex gap-2&quot;&gt;
                                        &lt;button type=&quot;button&quot; class=&quot;btn btn-primary p-2 flex-grow-1&quot; id=&quot;btnConnect&quot; onclick=&quot;onConnectClick()&quot;&gt;
                                        Connect
                                        &lt;/button&gt;
                                        &lt;button type=&quot;button&quot; class=&quot;btn btn-danger p-2 flex-grow-1&quot; id=&quot;btnDisconnect&quot; onclick=&quot;onDisconnectClick()&quot; disabled&gt;
                                            Disconnect
                                        &lt;/button&gt;
                                    &lt;/div&gt;
                                &lt;/td&gt;
                            &lt;/tr&gt;
                        &lt;/tbody&gt;
                        &lt;/table&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
                &lt;div class=&quot;col&quot;&gt;
                    &lt;div class=&quot;container-md&quot; id=&quot;message&quot;&gt;
                        &lt;table class=&quot;table table-hover&quot;&gt;
                            &lt;thead&gt;
                                &lt;tr&gt;
                                    &lt;th colspan=&quot;2&quot; scope=&quot;col&quot;&gt;h.264 Stream&lt;/th&gt;
                                &lt;/tr&gt;
                            &lt;/thead&gt;
                            &lt;tbody&gt;
                                &lt;tr&gt;
                                    &lt;th scope=&quot;row&quot;&gt;Username&lt;/th&gt;
                                    &lt;td&gt;
                                        &lt;div class=&quot;input-group&quot;&gt;
                                            &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;username&quot; value=&quot;admin&quot;/&gt;
                                        &lt;/div&gt;
                                    &lt;/td&gt;
                                &lt;/tr&gt;
                                &lt;tr&gt;
                                    &lt;th scope=&quot;row&quot;&gt;Password&lt;/th&gt;
                                    &lt;td&gt;
                                        &lt;div class=&quot;input-group&quot;&gt;
                                            &lt;input type=&quot;password&quot; class=&quot;form-control&quot; id=&quot;password&quot; value=&quot;instar&quot; /&gt;
                                        &lt;/div&gt;
                                    &lt;/td&gt;
                                &lt;/tr&gt;
                                &lt;tr&gt;
                                    &lt;td colspan=&quot;2&quot;&gt;
                                        &lt;div class=&quot;input-group&quot;&gt;
                                            &lt;select id=&quot;wsmessage&quot; class=&quot;form-select&quot;&gt;
                                                &lt;option value=&quot;livestream&quot; selected=&quot;selected&quot;&gt;Start&lt;/option&gt;
                                                &lt;option value=&quot;stop&quot;&gt;Stop&lt;/option&gt;
                                            &lt;/select&gt;
                                            &lt;!-- &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;wsmessage&quot; value=&quot;livestream&quot;&gt; --&gt;
                                        &lt;/div&gt;
                                    &lt;/td&gt;
                                &lt;/tr&gt;
                                &lt;tr&gt;
                                    &lt;td colspan=&quot;2&quot;&gt;
                                        &lt;div class=&quot;d-flex&quot;&gt;
                                            &lt;button type=&quot;button&quot; class=&quot;btn btn-success p-2 flex-grow-1&quot; id=&quot;btnSend&quot; onclick=&quot;onSendClick()&quot; disabled&gt;
                                                Send Message
                                            &lt;/button&gt;
                                        &lt;/div&gt;
                                    &lt;/td&gt;
                                &lt;/tr&gt;
                            &lt;/tbody&gt;
                        &lt;/table&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
                &lt;div class=&quot;container-fluid&quot;&gt;
                &lt;div class=&quot;row&quot; id=&quot;message&quot;&gt;

                    &lt;div class=&quot;col align-self-center&quot;&gt;
                        &lt;video playsinline muted controls preload=&quot;none&quot; width=&quot;100%&quot;&gt;&lt;/video&gt;
                    &lt;/div&gt;

                    &lt;div class=&quot;accordion accordion mb-5&quot; id=&quot;accordionFlushExample&quot;&gt;
                        &lt;div class=&quot;accordion-item&quot;&gt;
                          &lt;h2 class=&quot;accordion-header&quot; id=&quot;headingOne&quot;&gt;
                            &lt;button class=&quot;accordion-button collapsed&quot; type=&quot;button&quot; data-bs-toggle=&quot;collapse&quot; data-bs-target=&quot;#collapseOne&quot; aria-expanded=&quot;false&quot; aria-controls=&quot;collapseOne&quot;&gt;
                                Incoming Messages
                            &lt;/button&gt;
                          &lt;/h2&gt;
                          &lt;div id=&quot;collapseOne&quot; class=&quot;accordion-collapse collapse&quot; aria-labelledby=&quot;headingOne&quot; data-bs-parent=&quot;#accordionFlushExample&quot;&gt;
                            &lt;div class=&quot;input-group&quot;&gt;
                                &lt;textarea class=&quot;form-control&quot; id=&quot;incomingMsgOutput&quot; rows=&quot;10&quot; cols=&quot;20&quot; disabled=&quot;disabled&quot;&gt;&lt;/textarea&gt;
                            &lt;/div&gt;
                          &lt;/div&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;

                &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;!-- Scripts --&gt;
        &lt;!-- Websocket Client --&gt;
        &lt;script src=&quot;wsclient.js&quot;&gt;&lt;/script&gt;
        &lt;!-- Bootstrap JS and Popper.js --&gt;
        &lt;!-- &lt;script src=&quot;https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js&quot; integrity=&quot;sha384-W8fXfP3gkOKtndU4JGtKDvXbO53Wy8SZCQHczT5FMiiqmQfUpWbYdTil/SxwZgAN&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt; --&gt;
        &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js&quot; integrity=&quot;sha384-skAcpIdS7UcVUC05LJ9Dxay8AXcDYfBJqt1CJ85S/CFujBsIzCIv+l9liuYLaMQ/&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;
        &lt;script src=&quot;https://unpkg.com/notie&quot;&gt;&lt;/script&gt;
        &lt;script src=&quot;reconnecting-websocket.min.js&quot;&gt;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h2 id="websocket-server">Websocket Server</h2>
<pre><code class="language-js">
var ws_protocol = document.getElementById(&quot;protocol&quot;);
var ws_hostname = document.getElementById(&quot;hostname&quot;);
var ws_port     = document.getElementById(&quot;port&quot;);
var ws_endpoint = document.getElementById(&quot;endpoint&quot;);
var cam_username = document.getElementById(&quot;username&quot;);
var cam_password = document.getElementById(&quot;password&quot;);

var queue = [];
var video = null;
var webSocket   = null;
var sourceBuffer = null;
var streamingStarted = false;

// Display ws pre-connected state
var statusBadge = document.getElementById(&quot;status&quot;);
const idle = `&lt;h4&gt;&lt;span class=&quot;badge bg-primary&quot;&gt;WS Client&lt;/span&gt;&lt;/h4&gt;`
statusBadge.innerHTML = idle;

// Init the Media Source and add event listener
function initMediaSource() {
    video = document.querySelector(&#x27;video&#x27;);
    video.onerror = elementError;
    video.loop = false;
    video.addEventListener(&#x27;canplay&#x27;, (event) =&gt; {
        console.log(&#x27;Video can start, but not sure it will play through.&#x27;);
        video.play();
    });
    video.addEventListener(&#x27;paused&#x27;, (event) =&gt; {
        console.log(&#x27;Video paused for buffering...&#x27;);
        setTimeout(function() { video.play(); }, 2000);
    });
    
    /* NOTE: Chrome will not play the video if we define audio here
    * and the stream does not include audio */
    var mimeCodec = &#x27;video/mp4; codecs=&quot;avc1.4D0033, mp4a.40.2&quot;&#x27;;
    //var mimeCodec = &#x27;video/mp4; codecs=avc1.42E01E,mp4a.40.2&#x27;; baseline
    //var mimeCodec = &#x27;video/mp4; codecs=avc1.4d002a,mp4a.40.2&#x27;; main
    //var mimeCodec = &#x27;video/mp4; codecs=&quot;avc1.64001E, mp4a.40.2&quot;&#x27;; high

    if (!window.MediaSource) {
        console.error(&quot;No Media Source API available&quot;);
        document.getElementById(&quot;incomingMsgOutput&quot;).value += &quot;error: No Media Source API available&quot; + &quot;\r\n&quot;;
        return;
    }
    
    if (!MediaSource.isTypeSupported(mimeCodec)) {
        console.error(&quot;Unsupported MIME type or codec: &quot; + mimeCodec);
        document.getElementById(&quot;incomingMsgOutput&quot;).value += &quot;error: Unsupported MIME type or codec&quot; + &quot;\r\n&quot;;
        return;
    }
    
    var ms = new MediaSource();
    video.src = window.URL.createObjectURL(ms);
    ms.addEventListener(&#x27;sourceopen&#x27;, onMediaSourceOpen);
    
    function onMediaSourceOpen() {
        sourceBuffer = ms.addSourceBuffer(mimeCodec);
        sourceBuffer.addEventListener(&quot;updateend&quot;,loadPacket);
        sourceBuffer.addEventListener(&quot;onerror&quot;, sourceError);
    }
    
    function loadPacket() { // called when sourceBuffer is ready for more
        if (!sourceBuffer.updating) {
            if (queue.length&gt;0) {
                data = queue.shift(); // pop from the beginning
                appendToBuffer(data);
            } else { // the queue runs empty, so we must force-feed the next packet
                streamingStarted = false;
            }
        }
        else {}
    }
    
    function sourceError(event) {
        console.log(&quot;Media source error&quot;);
    }
    
    function elementError(event) {
        console.log(&quot;Media element error&quot;);
    }
}

// Append AV data to source buffer
function appendToBuffer(videoChunk) {
    if (videoChunk) {
        sourceBuffer.appendBuffer(videoChunk);
    }
}

// Event handler for clicking on button &quot;Connect&quot;
function onConnectClick() {
     // Makes sure that user typed username and message before sending
     if ((ws_protocol.value === &#x27;&#x27;) || (ws_hostname.value === &#x27;&#x27;) || (ws_port.value === &#x27;&#x27;) || (ws_endpoint.value === &#x27;&#x27;) ||(cam_username === &#x27;&#x27;) || (cam_password === &#x27;&#x27;)) {
        errorToast(&quot;Please fill out all the configuration fields above!&quot;);
        return false;
    } else {
        initMediaSource();
        document.getElementById(&quot;incomingMsgOutput&quot;).value = &quot;&quot;;
        document.getElementById(&quot;btnConnect&quot;).disabled    = true;
        openWSConnection(ws_protocol.value, ws_hostname.value, ws_port.value, ws_endpoint.value);
        successToast(&quot;Send the &#x27;Start&#x27; message to start the video stream.&quot;);
        }    
}

// Event handler for clicking on button &quot;Disconnect&quot;
function onDisconnectClick() {
    document.getElementById(&quot;btnDisconnect&quot;).disabled = true;
    webSocket.close();
    video.pause();
}

// Adding confirmations with notie.js
function successToast(msg) {
    notie.alert({
        type: &#x27;success&#x27;, // optional, default = 4, enum: [1, 2, 3, 4, 5, &#x27;success&#x27;, &#x27;warning&#x27;, &#x27;error&#x27;, &#x27;info&#x27;, &#x27;neutral&#x27;]
        text: msg,
        stay: false, // optional, default = false
        time: 3, // optional, default = 3, minimum = 1,
        position: &#x27;bottom&#x27; // optional, default = &#x27;top&#x27;, enum: [&#x27;top&#x27;, &#x27;bottom&#x27;]
    })
}

//Adding alerts with notie.js
function errorToast(msg) {
    notie.alert({
        type: &#x27;error&#x27;, // optional, default = 4, enum: [1, 2, 3, 4, 5, &#x27;success&#x27;, &#x27;warning&#x27;, &#x27;error&#x27;, &#x27;info&#x27;, &#x27;neutral&#x27;]
        text: msg,
        stay: false, // optional, default = false
        time: 3, // optional, default = 3, minimum = 1,
        position: &#x27;bottom&#x27; // optional, default = &#x27;top&#x27;, enum: [&#x27;top&#x27;, &#x27;bottom&#x27;]
    })
}

// Open a new WebSocket connection using the given parameters
function openWSConnection(protocol, hostname, port, endpoint) {
    
    var webSocketURL = null;
    var keepAliveCount = 0;
    
    webSocketURL = protocol + &quot;://&quot; + hostname + &quot;:&quot; + port + endpoint;
    console.log(&quot;openWSConnection::Connecting to: &quot; + webSocketURL);

    const offline = `&lt;h4&gt;&lt;span class=&quot;badge bg-danger&quot;&gt;Disconnected&lt;/span&gt;&lt;/h4&gt;`
    const online = `&lt;h4&gt;&lt;span class=&quot;badge bg-success&quot;&gt;Connected&lt;/span&gt;&lt;/h4&gt;`
    
    let statusBadge = document.getElementById(&quot;status&quot;);

    try {
        // webSocket = new WebSocket(webSocketURL);
        webSocket = new ReconnectingWebSocket(webSocketURL);
        webSocket.debug = true;
        webSocket.timeoutInterval = 3000;
        webSocket.onopen = function(openEvent) {
            var open = JSON.stringify(openEvent, null, 4);
            console.log(&quot;WebSocket open&quot;);
            document.getElementById(&quot;btnSend&quot;).disabled       = false;
            document.getElementById(&quot;btnConnect&quot;).disabled    = true;
            document.getElementById(&quot;btnDisconnect&quot;).disabled = false;
            document.getElementById(&quot;incomingMsgOutput&quot;).value += &quot;WebSocket connected&quot; + &quot;\r\n&quot;;
            statusBadge.innerHTML = online
        };
        webSocket.onclose = function (closeEvent) {
            var closed = JSON.stringify(closeEvent, null, 4);
            console.log(&quot;WebSocket closed&quot;);
            document.getElementById(&quot;btnSend&quot;).disabled       = true;
            document.getElementById(&quot;btnConnect&quot;).disabled    = false;
            document.getElementById(&quot;btnDisconnect&quot;).disabled = true;
            document.getElementById(&quot;incomingMsgOutput&quot;).value += &quot;WebSocket closed&quot; + &quot;\r\n&quot;;
            statusBadge.innerHTML = offline
        };
        webSocket.onerror = function (errorEvent) {
            var error = JSON.stringify(errorEvent, null, 4);
            console.log(&quot;WebSocket ERROR: &quot; + error);
            document.getElementById(&quot;btnConnect&quot;).disabled    = false;
            document.getElementById(&quot;incomingMsgOutput&quot;).value += &quot;error: Websocket connection failed&quot; + &quot;\r\n&quot;;
            statusBadge.innerHTML = offline
        };
        webSocket.onmessage = function (messageEvent) {
            var wsMsg = messageEvent.data;
            if (typeof wsMsg === &#x27;string&#x27;) {
            	if (wsMsg.indexOf(&quot;error:&quot;) == 0) {
                	document.getElementById(&quot;incomingMsgOutput&quot;).value += wsMsg + &quot;\r\n&quot;;
            	} else {
                	document.getElementById(&quot;incomingMsgOutput&quot;).value += &quot;echo message: &quot; + wsMsg + &quot;\r\n&quot;;
            	}
            } else {
                var arrayBuffer;
                var fileReader = new FileReader();
                fileReader.onload = function(event) {
                    arrayBuffer = event.target.result;
                    var data = new Uint8Array(arrayBuffer);
                    document.getElementById(&quot;incomingMsgOutput&quot;).value += &quot;received: &quot; + data.length + &quot; bytes\r\n&quot;;
                    if (!streamingStarted) {
                        appendToBuffer(arrayBuffer);
                        streamingStarted=true;
                        return;
                    }
                    queue.push(arrayBuffer); // add to the end
                };
                fileReader.readAsArrayBuffer(wsMsg);
                /* NOTE: the web server has a idle-timeout of 60 seconds,
                 so we need to send a keep-alive message regulary */
                keepAliveCount++;
                if (keepAliveCount &gt;= 10 &amp;&amp; webSocket.readyState == WebSocket.OPEN) {
                    keepAliveCount = 0;
                    webSocket.send(&quot;keep-alive&quot;);
                }
            }
        };
    } catch (exception) {
        console.error(exception);
    }
}

// Send a message to the WebSocket server
function onSendClick() {
    if (webSocket.readyState != WebSocket.OPEN) {
        console.error(&quot;webSocket is not open: &quot; + webSocket.readyState);
        return;
    }
    var msg = document.getElementById(&quot;wsmessage&quot;).value;
    webSocket.send(msg);
}
</code></pre>
<h2 id="user-notifications">User Notifications</h2>
<p><a href="/docs/Development/Javascript/2021-09-10--notifications-alerts-as-toast/2021-09-10">Adding toast notifications with Notie.js</a>.</p>
<h2 id="auto-reconnect-the-websocket">Auto-Reconnect the Websocket</h2>
<p><a href="/docs/Development/Javascript/2021-09-10--websocket-recconects/2021-09-10">Make sure that the connection is always re-established with ReconnectingWebsockets</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/javascript">Javascript</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Development/Javascript/2021-09-08--websockets-html-video/index.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Development/Javascript/2021-09-09--websocket-HAproxy/2021-09-09"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">HAProxy Loadbalancing and Websockets</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Development/Javascript/2021-09-07--intro-to-websockets/2021-09-07"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Introduction to Websockets</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#html-frontend-ws-client" class="table-of-contents__link toc-highlight">HTML Frontend (WS Client)</a></li><li><a href="#websocket-server" class="table-of-contents__link toc-highlight">Websocket Server</a></li><li><a href="#user-notifications" class="table-of-contents__link toc-highlight">User Notifications</a></li><li><a href="#auto-reconnect-the-websocket" class="table-of-contents__link toc-highlight">Auto-Reconnect the Websocket</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Research</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Notebook</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tags">Tags</a></li><li class="footer__item"><a class="footer__link-item" href="/Curriculum-Vitae">CV</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/in/mike-polinowski-6396ba121/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/MikePolinowski" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.flickr.com/people/149680084@N06/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flickr<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/mpolinowski" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Mike Polinowski, INSTAR Deutschland GmbH, Shenzhen - China.</div></div></div></footer></div>
</body>
</html>