<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-IoT-and-Machine-Learning/AIOps/2023-01-22-python-ray-introduction/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">Python Ray Basic Concepts | Mike Polinowski</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://mpolinowski.github.io/docs/IoT-and-Machine-Learning/AIOps/2023-01-22-python-ray-introduction/2023-01-22"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Python Ray Basic Concepts | Mike Polinowski"><meta data-rh="true" name="description" content="Ray is an open-source unified compute framework that makes it easy to scale AI and general Python workloads"><meta data-rh="true" property="og:description" content="Ray is an open-source unified compute framework that makes it easy to scale AI and general Python workloads"><link data-rh="true" rel="icon" href="/img/icons/favicon-32x32.png"><link data-rh="true" rel="canonical" href="https://mpolinowski.github.io/docs/IoT-and-Machine-Learning/AIOps/2023-01-22-python-ray-introduction/2023-01-22"><link data-rh="true" rel="alternate" href="https://mpolinowski.github.io/docs/IoT-and-Machine-Learning/AIOps/2023-01-22-python-ray-introduction/2023-01-22" hreflang="en"><link data-rh="true" rel="alternate" href="https://mpolinowski.github.io/docs/IoT-and-Machine-Learning/AIOps/2023-01-22-python-ray-introduction/2023-01-22" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Mike Polinowski RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Mike Polinowski Atom Feed">




<link rel="icon" href="/img/angular_momentum.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37,194,160)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/angular_momentum.png">
<link rel="mask-icon" href="/img/angular_momentum.png" color="rgb(33,33,33)">
<meta name="msapplication-TileImage" content="/img/angular_momentum.png">
<meta name="msapplication-TileColor" content="#000">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-P74BDWF0C6"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-P74BDWF0C6",{})</script><link rel="stylesheet" href="/assets/css/styles.08c8c484.css">
<script src="/assets/js/runtime~main.c6ee2a03.js" defer="defer"></script>
<script src="/assets/js/main.a26008f3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/angular_momentum.png" alt="Mike Polinowski :: Dev Notebook" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/angular_momentum.png" alt="Mike Polinowski :: Dev Notebook" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Mike Polinowski</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/docs/tags">Tags</a><a class="navbar__item navbar__link" href="/Search">Search</a><a href="https://mpolinowski.github.io/Personal" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">About<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/mpolinowski" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/development">Development</a><button aria-label="Expand sidebar category &#x27;Development&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/devops">DevOps</a><button aria-label="Expand sidebar category &#x27;DevOps&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/machine-learning-ai-and-computer-vision">Machine Learning, AI and Computer Vision</a><button aria-label="Collapse sidebar category &#x27;Machine Learning, AI and Computer Vision&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/machine-learning">Machine Learning</a><button aria-label="Expand sidebar category &#x27;Machine Learning&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/aiops">AIOps</a><button aria-label="Collapse sidebar category &#x27;AIOps&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/IoT-and-Machine-Learning/AIOps/2023-09-27-zenml-intro-sklearn-pipeline/2023-09-27">MLOps with ZenML - SKLearn Classifier Pipeline</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/IoT-and-Machine-Learning/AIOps/2023-08-19-tensorflow-serving-api/2023-08-19">Tensorflow Serving API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/IoT-and-Machine-Learning/AIOps/2023-07-12-scikit-image-model-deployment-part2/2023-07-12">Serving your SciKit Image Model as a Prediction API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/IoT-and-Machine-Learning/AIOps/2023-07-10-scikit-image-model-deployment-part1/2023-07-10">Serving your SciKit Image Model as a Prediction API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/IoT-and-Machine-Learning/AIOps/2023-06-23-automl-with-autogluon-timeseries-forecast/2023-06-23">AutoML with AutoGluon for Timeseries Forecasts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/IoT-and-Machine-Learning/AIOps/2023-06-21-automl-with-autogluon-multiclass-nlp/2023-06-21">AutoML with AutoGluon for Multi-Modal Data NLP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/IoT-and-Machine-Learning/AIOps/2023-06-18-automl-with-autogluon-tabular-data/2023-06-18">AutoML with AutoGluon for Tabular Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/IoT-and-Machine-Learning/AIOps/2023-06-17-scikit-learn-model-deployment/2023-06-17">Serving your SciKit Learn Model as a Prediction API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/IoT-and-Machine-Learning/AIOps/2023-03-27-deploying-prediction-apis-with-flask/2023-03-27">Deploying Prediction APIs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/IoT-and-Machine-Learning/AIOps/2023-02-09-mlflow-introduction/2023-02-09">MLflow 2.1 Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/IoT-and-Machine-Learning/AIOps/2023-02-06-apache-airflow-dynamic-dags/2023-02-06">Apache Airflow Dynamic DAGs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/IoT-and-Machine-Learning/AIOps/2023-02-05-apache-airflow-scheduler/2023-02-05">Apache Airflow DAG Scheduling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/IoT-and-Machine-Learning/AIOps/2023-02-04-apache-airflow-data-pipelines/2023-02-04">Apache Airflow Data Pipelines</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/IoT-and-Machine-Learning/AIOps/2023-02-01-apache-airflow-introduction/2023-02-01">Apache Airflow Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/IoT-and-Machine-Learning/AIOps/2023-01-31-python-ray-model-serving/2023-01-31">Python Ray Model Serving</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/IoT-and-Machine-Learning/AIOps/2023-01-29-python-ray-deployments/2023-01-29">Python Ray Deployments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/IoT-and-Machine-Learning/AIOps/2023-01-26-python-ray-remote-actors/2023-01-26">Python Ray Remote Actors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/IoT-and-Machine-Learning/AIOps/2023-01-23-python-ray-remote-functions/2023-01-23">Python Ray Remote Functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/IoT-and-Machine-Learning/AIOps/2023-01-22-python-ray-introduction/2023-01-22">Python Ray Basic Concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/IoT-and-Machine-Learning/AIOps/2023-01-06-dvc-model-access/2023-01-05">DVC Model Access</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/IoT-and-Machine-Learning/AIOps/2023-01-05-dvc-model-version-control/2023-01-05">Data Version Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/IoT-and-Machine-Learning/AIOps/2023-01-04-tf-distributed-strategy/2023-01-04">Distributed training with TensorFlow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/IoT-and-Machine-Learning/AIOps/2023-01-03-tf-tensorboard/2023-01-03">Tensorflow Tensorboard</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/IoT-and-Machine-Learning/AIOps/2023-01-02-tf-serve-own-models/2023-01-02">Tensorflow Serving REST API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/IoT-and-Machine-Learning/AIOps/2023-01-01-tf-model-server/2023-01-01">Tensorflow Docker Model Server</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/automation-deep-vision-and-robotics">Automation, Deep Vision and Robotics</a><button aria-label="Expand sidebar category &#x27;Automation, Deep Vision and Robotics&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/machine-learning-ai-and-computer-vision"><span itemprop="name">Machine Learning, AI and Computer Vision</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/aiops"><span itemprop="name">AIOps</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Python Ray Basic Concepts</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Python Ray Basic Concepts</h1></header><p><img alt="Guangzhou, China" src="/assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-296769d73822f07b0ac5dc952f56bfa1.jpg" width="1500" height="662"></p>
<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#hello-world">Hello World</a>
<ul>
<li><a href="#ray-remote-taskfutures">Ray Remote (Task/Futures)</a>
<ul>
<li><a href="#nested-remote-functions">Nested Remote Functions</a></li>
</ul>
</li>
<li><a href="#ray-datasets---distributed-data-preprocessing">Ray Datasets - Distributed Data Preprocessing</a></li>
<li><a href="#ray-actors">Ray Actors</a></li>
</ul>
</li>
</ul>
<blockquote>
<p>see Youtube <a href="https://youtu.be/vzMXTpdJSuk">Ray: A General Purpose Serverless Substrate? - Eric Liang, Anyscale</a></p>
</blockquote>
<ul>
<li><a href="https://github.com/mpolinowski/ray-hello">Github Repository</a></li>
<li><a href="/docs/IoT-and-Machine-Learning/AIOps/2023-01-23-python-ray-remote-functions/2023-01-23">Python Ray Remote Functions</a></li>
<li><a href="/docs/IoT-and-Machine-Learning/AIOps/2023-01-26-python-ray-remote-actors/2023-01-26">Python Ray Remote Actors</a></li>
<li><a href="/docs/IoT-and-Machine-Learning/AIOps/2023-01-29-python-ray-deployments/2023-01-29">Python Ray Deployments</a></li>
<li><a href="/docs/IoT-and-Machine-Learning/AIOps/2023-01-31-python-ray-model-serving/2023-01-31">Python Ray Model Serving</a></li>
</ul>
<p><a href="https://github.com/ray-project/ray">Ray</a> is a unified framework for scaling AI and Python applications. Ray consists of a core distributed runtime and a toolkit of libraries (Ray AIR) for simplifying ML compute.</p>
<p>In a cloud computing model, the cloud provider allocates machine resources on demand, taking care of the servers on behalf of its customers. Ray provides a great foundation for <a href="https://www.anyscale.com/blog/the-ideal-foundation-for-a-general-purpose-serverless-platform">general-purpose serverless platforms</a> by providing the following features:</p>
<ul>
<li>Ray autoscaling transparently manages hardware resources while hiding the actual servers.</li>
<li>With <code>actors</code> Ray not only implements a stateless but also a stateful programming model.</li>
<li>It allows you to specify resources, including hardware accelerators.</li>
<li>It supports direct communications between your tasks.</li>
</ul>
<h2 id="installation">Installation</h2>
<p>Setting up a local Single Node &quot;Cluster&quot;. There are two versions that can be installed via pip. You cannot install it with <code>pip install ray</code> if you want to use the <a href="https://docs.ray.io/en/latest/ray-core/ray-dashboard.html">dashboard</a>. Use the following to install Ray with the proper dependencies:</p>
<pre><code class="language-bash">pip install -U &quot;ray[default]&quot;
</code></pre>
<p>You can access the dashboard through a URL printed when Ray is initialized (the default URL is <code>http://localhost:8265</code>).</p>
<p>To use Ray’s AI Runtime install Ray with the optional extra air packages:</p>
<pre><code class="language-bash">pip install &quot;ray[air]&quot;
</code></pre>
<h2 id="hello-world">Hello World</h2>
<h3 id="ray-remote-taskfutures">Ray Remote (Task/Futures)</h3>
<p>Execute a remote function that reports back where it was executed:</p>
<pre><code class="language-py">import os
import socket

def hello_from():
    print( f&quot;Running on {socket.gethostname()} in pid {os.getpid()}&quot; )
    return 

hello_from()
</code></pre>
<p>You can use the <code>ray.remote</code> decorator to create a remote function. Ray returns a
<code>future</code>. You can get the values returned in those futures with <code>ray.get</code>:</p>
<pre><code class="language-py">import ray
import os
import socket

@ray.remote

def hello_from():
    return f&quot;Running on {socket.gethostname()} in pid {os.getpid()}&quot;

future = hello_from.remote()
ray.get(future)
</code></pre>
<p>I am going to add the following lines to pause the execution - giving me some time to explore the Ray dashboard:</p>
<pre><code class="language-py">os.system(&quot;/bin/bash -c &#x27;read -s -n 1 -p \&quot;Press any key to continue...\&quot;&#x27;&quot;)
print()
</code></pre>
<p>Since we are running Ray locally the remote function is executed &quot;remotely&quot; in a separate process:</p>
<pre><code class="language-bash">Running on Link0815b in pid 35053
2023-01-22 17:09:45,201 INFO worker.py:1529 -- Started a local Ray instance.
View the dashboard at 127.0.0.1:8265 
Running on Link0815b in pid 35278
Press any key to continue...
</code></pre>
<p><img alt="Ray Introduction" src="/assets/images/Python_Ray_Introduction_01-2fe26b039a09a2e6c80b4ae5e9626ef1.png" width="1619" height="626"></p>
<p><img alt="Ray Introduction" src="/assets/images/Python_Ray_Introduction_02-2d86f623b55f406e96f7efc927262532.png" width="1611" height="448"></p>
<h4 id="nested-remote-functions">Nested Remote Functions</h4>
<pre><code class="language-py">from bs4 import BeautifulSoup
import ray
import requests


@ray.remote

def crawl(url, depth=0, maxdepth=2, maxlinks=5):
    
    # prepare arrays for scraped links / futures
    links = []
    link_futures = []

    try:
        # get target url
        f = requests.get(url)
        # add found URL to link array
        links += [url]
        
        # continue following till max depth
        if (depth &gt; maxdepth):
            return links

        # run web scraper on target url
        soup = BeautifulSoup(f.text, &#x27;html.parser&#x27;)
        i = 0

        # follow links and and find more links
        for link in soup.find_all(&#x27;a&#x27;):
            try:
                i = i+1
                link_futures += [crawl.remote(link[&quot;href&quot;], depth=(depth+1), maxdepth=maxdepth)]
                if i &gt; maxlinks:
                    break
            except:
                pass

        # add links and title to array
        for r in ray.get(link_futures):
            links += r

        return links

    except requests.exceptions.InvalidSchema:
        return [] # Skip on invalid links
    except requests.exceptions.MissingSchema:
        return [] # Skip on invalid links

print(ray.get(crawl.remote(&quot;https://wiki.instar.com/en/Assistants/Review_Wall/&quot;)))
</code></pre>
<p>The nested call returns an array of all the links that were found on the target URL and on pages found at the end of those links (within the set limitations of max links and depth):</p>
<pre><code class="language-bash">[&#x27;https://wiki.instar.com/en/Assistants/Review_Wall/&#x27;, &#x27;https://forum.instar.de&#x27;, &#x27;https://youtu.be/l3EF_JgdGQg&#x27;, &#x27;https://www.youtube.com/about/&#x27;, &#x27;https://www.youtube.com/howyoutubeworks/&#x27;, &#x27;https://www.youtube.com/creators/&#x27;, &#x27;https://www.youtube.com/trends/&#x27;, &#x27;https://blog.youtube/&#x27;, &#x27;https://www.youtube.com/about/press/&#x27;, &#x27;https://www.youtube.com/about/copyright/&#x27;, &#x27;https://youtu.be/Ac1trrZhu9o&#x27;, &#x27;https://www.youtube.com/about/&#x27;, &#x27;https://www.youtube.com/howyoutubeworks/&#x27;, &#x27;https://www.youtube.com/creators/&#x27;, &#x27;https://www.youtube.com/trends/&#x27;, &#x27;https://blog.youtube/&#x27;, &#x27;https://www.youtube.com/about/press/&#x27;, &#x27;https://www.youtube.com/about/copyright/&#x27;, &#x27;https://youtu.be/6N0FATzh1BU&#x27;, &#x27;https://www.youtube.com/about/&#x27;, &#x27;https://www.youtube.com/howyoutubeworks/&#x27;, &#x27;https://www.youtube.com/creators/&#x27;, &#x27;https://www.youtube.com/trends/&#x27;, &#x27;https://blog.youtube/&#x27;, &#x27;https://www.youtube.com/about/press/&#x27;, &#x27;https://www.youtube.com/about/copyright/&#x27;, &#x27;https://youtu.be/2t7Y7I6l6A0&#x27;, &#x27;https://www.youtube.com/about/&#x27;, &#x27;https://www.youtube.com/howyoutubeworks/&#x27;, &#x27;https://www.youtube.com/creators/&#x27;, &#x27;https://www.youtube.com/trends/&#x27;, &#x27;https://blog.youtube/&#x27;, &#x27;https://www.youtube.com/about/press/&#x27;, &#x27;https://www.youtube.com/about/copyright/&#x27;]
</code></pre>
<p>I can see that up to 10 worker processes are spawned to work on this task - if I increase the number of links and depth of the search the amount of worker increases as well:</p>
<p><img alt="Ray Introduction" src="/assets/images/Python_Ray_Introduction_03-3a849501d682dc6261125872f32f5df9.png" width="1614" height="899"></p>
<h3 id="ray-datasets---distributed-data-preprocessing">Ray Datasets - Distributed Data Preprocessing</h3>
<p><a href="https://docs.ray.io/en/latest/data/dataset.html">Ray Datasets</a> are the standard way to load and exchange data in Ray libraries and applications. They provide basic distributed data transformations such as maps (<a href="https://docs.ray.io/en/latest/data/api/dataset.html#ray.data.Dataset.map_batches">map_batches</a>), global and grouped aggregations (<a href="https://docs.ray.io/en/latest/data/api/grouped_dataset.html#ray.data.grouped_dataset.GroupedDataset">GroupedDataset</a>), and shuffling operations (<a href="https://docs.ray.io/en/latest/data/api/dataset.html#ray.data.Dataset.random_shuffle">random_shuffle</a>, <a href="https://docs.ray.io/en/latest/data/api/dataset.html#ray.data.Dataset.sort">sort</a>, <a href="https://docs.ray.io/en/latest/data/api/dataset.html#ray.data.Dataset.repartition">repartition</a>), and are compatible with a variety of file formats, data sources, and distributed frameworks.</p>
<p>Let&#x27;s create a dataset from the URLs we just downloaded:</p>
<pre><code class="language-py">import ray
import requests

# use list of urls created above
dataset=[&quot;https://wiki.instar.com/en/Assistants/Review_Wall/&quot;, &quot;https://forum.instar.de&quot;, &quot;https://youtu.be/l3EF_JgdGQg&quot;, &quot;https://www.youtube.com/about/&quot;, &quot;https://www.youtube.com/howyoutubeworks/&quot;, &quot;https://www.youtube.com/creators/&quot;, &quot;https://www.youtube.com/trends/&quot;, &quot;https://blog.youtube/&quot;, &quot;https://www.youtube.com/about/press/&quot;, &quot;https://www.youtube.com/about/copyright/&quot;, &quot;https://youtu.be/Ac1trrZhu9o&quot;, &quot;https://www.youtube.com/about/&quot;, &quot;https://www.youtube.com/howyoutubeworks/&quot;, &quot;https://www.youtube.com/creators/&quot;, &quot;https://www.youtube.com/trends/&quot;, &quot;https://blog.youtube/&quot;, &quot;https://www.youtube.com/about/press/&quot;, &quot;https://www.youtube.com/about/copyright/&quot;, &quot;https://youtu.be/6N0FATzh1BU&quot;, &quot;https://www.youtube.com/about/&quot;, &quot;https://www.youtube.com/howyoutubeworks/&quot;, &quot;https://www.youtube.com/creators/&quot;, &quot;https://www.youtube.com/trends/&quot;, &quot;https://blog.youtube/&quot;, &quot;https://www.youtube.com/about/press/&quot;, &quot;https://www.youtube.com/about/copyright/&quot;, &quot;https://youtu.be/2t7Y7I6l6A0&quot;, &quot;https://www.youtube.com/about/&quot;, &quot;https://www.youtube.com/howyoutubeworks/&quot;, &quot;https://www.youtube.com/creators/&quot;, &quot;https://www.youtube.com/trends/&quot;, &quot;https://blog.youtube/&quot;, &quot;https://www.youtube.com/about/press/&quot;, &quot;https://www.youtube.com/about/copyright/&quot;]

# and create a dataset from them
urls = ray.data.from_items(dataset)

# download all pages
def get_page(url):
    f = requests.get(url)
    return f.text

# map url dataset and get page content
pages = urls.map(get_page)

# verify that pages where downloaded
# print(pages.take(1))
</code></pre>
<blockquote>
<p><strong>ERROR</strong>: <code>ModuleNotFoundError: No module named &#x27;pkg_resources._vendor&#x27;</code> solved by <code>pip install --upgrade setuptools</code>.</p>
</blockquote>
<p>By calling <code>groupby</code> with either a column name or a function that returns a key, you get a <a href="https://docs.ray.io/en/latest/data/api/grouped_dataset.html#ray.data.grouped_dataset.GroupedDataset">GroupedDataset</a>. <code>GroupedDataset</code> has built-in support for <code>count</code>, <code>max</code>, <code>min</code>, and other common aggregations:</p>
<pre><code class="language-py"># split page content into words
words = pages.flat_map(lambda x: x.split(&quot; &quot;)).map(lambda w: (w, 1))
# create GroupedDataset
grouped_words = words.groupby(lambda wc: wc[0])
# take a look at it
print(&#x27;Generated Data: &#x27;, grouped_words)
</code></pre>
<pre><code class="language-bash">Map: 100%|████████████████████████████████| 34/34 [00:05&lt;00:00,  5.71it/s]
Flat_Map: 100%|███████████████████████████| 34/34 [00:00&lt;00:00, 92.36it/s]
Map: 100%|████████████████████████████████| 34/34 [00:00&lt;00:00, 45.92it/s]

Generated Data:  GroupedDataset(dataset=Dataset(num_blocks=34, num_rows=900977, schema=&lt;class &#x27;tuple&#x27;&gt;), key=&lt;function &lt;lambda&gt; at 0x7fbe21277be0&gt;)
</code></pre>
<h3 id="ray-actors">Ray Actors</h3>
<p><a href="https://docs.ray.io/en/latest/ray-core/actors.html#actors">Actors</a> extend the Ray API from functions (tasks) to classes. An actor is essentially a stateful worker (or a service). Actors send and receive messages, updating their state in response. These messages can come from other actors, programs, or the Ray main execution thread with the Ray client. Just like before in Ray the actor will return a future that you can then collect on later.</p>
<p><strong>Ray Actors</strong> are very similar to <strong>Remote Functions</strong> but use Python classes to handle state. They can be used to retrieve the newest weights from your running ML training or - for example - get the latest sensor read-out from your IoT device:</p>
<pre><code class="language-py">import ray

@ray.remote

class ReadSensor(object):
    def __init__(self):
        self.value = 0
    def get_value(self):
        self.value += 1
        return f&quot;Current value is: {self.value}&quot;

# create an actor instance
sensor_reading = ReadSensor.remote()

# call the actor multiple times
print(ray.get(sensor_reading.get_value.remote()))
print(ray.get(sensor_reading.get_value.remote()))
print(ray.get(sensor_reading.get_value.remote()))
print(ray.get(sensor_reading.get_value.remote()))
print(ray.get(sensor_reading.get_value.remote()))
</code></pre>
<p>By requesting the value multiple times we increment the value itself. The next returned value we get reflects the change:</p>
<pre><code class="language-bash">python 04_ray_actors_distributed_state.py
2023-01-22 21:47:50,961 INFO worker.py:1529 -- Started a local Ray instance.
View the dashboard at 127.0.0.1:8265 
Current value is: 1
Current value is: 2
Current value is: 3
Current value is: 4
Current value is: 5
</code></pre></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/python">Python</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/machine-learning">Machine Learning</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/ray">Ray</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/IoT-and-Machine-Learning/AIOps/2023-01-22-python-ray-introduction/index.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/IoT-and-Machine-Learning/AIOps/2023-01-23-python-ray-remote-functions/2023-01-23"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Python Ray Remote Functions</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/IoT-and-Machine-Learning/AIOps/2023-01-06-dvc-model-access/2023-01-05"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">DVC Model Access</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#hello-world" class="table-of-contents__link toc-highlight">Hello World</a><ul><li><a href="#ray-remote-taskfutures" class="table-of-contents__link toc-highlight">Ray Remote (Task/Futures)</a></li><li><a href="#ray-datasets---distributed-data-preprocessing" class="table-of-contents__link toc-highlight">Ray Datasets - Distributed Data Preprocessing</a></li><li><a href="#ray-actors" class="table-of-contents__link toc-highlight">Ray Actors</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Research</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Notebook</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tags">Tags</a></li><li class="footer__item"><a class="footer__link-item" href="/Curriculum-Vitae">CV</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/in/mike-polinowski-6396ba121/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/MikePolinowski" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.flickr.com/people/149680084@N06/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flickr<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/mpolinowski" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Mike Polinowski, INSTAR Deutschland GmbH, Shenzhen - China.</div></div></div></footer></div>
</body>
</html>