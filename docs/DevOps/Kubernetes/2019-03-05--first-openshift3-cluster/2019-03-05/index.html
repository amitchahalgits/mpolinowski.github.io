<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-DevOps/Kubernetes/2019-03-05--first-openshift3-cluster/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Setting up an OKD Cluster | Mike Polinowski</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://mpolinowski.github.io/docs/DevOps/Kubernetes/2019-03-05--first-openshift3-cluster/2019-03-05"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Setting up an OKD Cluster | Mike Polinowski"><meta data-rh="true" name="description" content="Mustang, Nepal"><meta data-rh="true" property="og:description" content="Mustang, Nepal"><link data-rh="true" rel="icon" href="/img/icons/favicon-32x32.png"><link data-rh="true" rel="canonical" href="https://mpolinowski.github.io/docs/DevOps/Kubernetes/2019-03-05--first-openshift3-cluster/2019-03-05"><link data-rh="true" rel="alternate" href="https://mpolinowski.github.io/docs/DevOps/Kubernetes/2019-03-05--first-openshift3-cluster/2019-03-05" hreflang="en"><link data-rh="true" rel="alternate" href="https://mpolinowski.github.io/docs/DevOps/Kubernetes/2019-03-05--first-openshift3-cluster/2019-03-05" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Mike Polinowski RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Mike Polinowski Atom Feed">




<link rel="icon" href="/img/angular_momentum.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37,194,160)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/angular_momentum.png">
<link rel="mask-icon" href="/img/angular_momentum.png" color="rgb(33,33,33)">
<meta name="msapplication-TileImage" content="/img/angular_momentum.png">
<meta name="msapplication-TileColor" content="#000">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-P74BDWF0C6"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-P74BDWF0C6",{})</script><link rel="stylesheet" href="/assets/css/styles.08c8c484.css">
<script src="/assets/js/runtime~main.a54fca34.js" defer="defer"></script>
<script src="/assets/js/main.93a0244f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/angular_momentum.png" alt="Mike Polinowski :: Dev Notebook" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/angular_momentum.png" alt="Mike Polinowski :: Dev Notebook" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Mike Polinowski</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/docs/tags">Tags</a><a class="navbar__item navbar__link" href="/Search">Search</a><a href="https://mpolinowski.github.io/Personal" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">About<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/mpolinowski" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/development">Development</a><button aria-label="Expand sidebar category &#x27;Development&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/devops">DevOps</a><button aria-label="Collapse sidebar category &#x27;DevOps&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/hashicorp">Hashicorp</a><button aria-label="Expand sidebar category &#x27;Hashicorp&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/zabbix">Zabbix</a><button aria-label="Expand sidebar category &#x27;Zabbix&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/server-provisioning">Server Provisioning</a><button aria-label="Expand sidebar category &#x27;Server Provisioning&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/gitops">GitOps</a><button aria-label="Expand sidebar category &#x27;GitOps&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/kubernetes">Kubernetes</a><button aria-label="Collapse sidebar category &#x27;Kubernetes&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2022-11-19--k3s-air-gapped-kubernetes/2022-11-19">Kubernetes Beyond the Edge</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/DevOps/Kubernetes/2019-03-05--first-openshift3-cluster/2019-03-05">Setting up an OKD Cluster</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-03-02--installing-openshift-3-on-centos-7/2019-03-02">Red Hat OpenShift 3 Container Platform</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-02-01--kubernetes-traefik-ingress/2019-02-01">Kubernetes Traefik Ingress</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-01-27--kubernetes-the-chinese-way/2019-01-27">Kubernetes the Chinese Way</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-01-22--kubernetes-nginx-ingress/2019-01-22">Kubernetes NGINX Ingress</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-01-21--kubernetes-nginx-https-service/2019-01-21">Kubernetes NGINX https Service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-01-21--kubernetes-bare-metal-ingress/2019-01-21">Kubernetes Bare Metal Ingress</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-01-19--kubernetes-cluster-logging/2019-01-19">Kubernetes Cluster Monitoring &amp; Logging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-01-17--kubernetes-and-microservices/2019-01-17">Kubernetes and Microservices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-01-15--creating-a-kubernetes-cluster/2019-01-15">Creating a Kubernetes Cluster</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-01-02--managing-containers-in-kubernetes/2019-01-02">Managing Containers in Kubernetes</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/nginx">NGINX</a><button aria-label="Expand sidebar category &#x27;NGINX&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/elasticsearch">Elasticsearch</a><button aria-label="Expand sidebar category &#x27;Elasticsearch&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/ansible">Ansible</a><button aria-label="Expand sidebar category &#x27;Ansible&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/server-security">Server Security</a><button aria-label="Expand sidebar category &#x27;Server Security&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/linux">Linux</a><button aria-label="Expand sidebar category &#x27;Linux&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/windows">Windows</a><button aria-label="Expand sidebar category &#x27;Windows&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/tomcat">Tomcat</a><button aria-label="Expand sidebar category &#x27;Tomcat&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/salt">Salt</a><button aria-label="Expand sidebar category &#x27;Salt&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/machine-learning-ai-and-computer-vision">Machine Learning, AI and Computer Vision</a><button aria-label="Expand sidebar category &#x27;Machine Learning, AI and Computer Vision&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/automation-deep-vision-and-robotics">Automation, Deep Vision and Robotics</a><button aria-label="Expand sidebar category &#x27;Automation, Deep Vision and Robotics&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/devops"><span itemprop="name">DevOps</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/kubernetes"><span itemprop="name">Kubernetes</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Setting up an OKD Cluster</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Setting up an OKD Cluster</h1></header><p><img alt="Mustang, Nepal" src="/assets/images/photo-875sdfgd_67456dfdj_o-73448288699040d408fe83b3a9fe2865.jpg" width="1500" height="530"></p>
<ul>
<li><a href="#system-and-environment-requirements">System and environment requirements</a>
<ul>
<li><a href="#selinux-requirements">SELinux requirements</a></li>
<li><a href="#optional-configuring-core-usage">Optional: Configuring Core Usage</a></li>
<li><a href="#dns-requirements">DNS Requirements</a></li>
<li><a href="#packages-requirements">Packages Requirements</a></li>
</ul>
</li>
<li><a href="#openshift-installation">OpenShift Installation</a>
<ul>
<li><a href="#enable-networkmanager-and-docker-services">Enable NetworkManager and Docker Services</a></li>
<li><a href="#install-ansible-and-clone-openshift-ansible-on-the-master-node">Install Ansible and Clone Openshift-Ansible on the Master Node</a></li>
<li><a href="#generate-ssh-keys-on-the-master-node">Generate SSH Keys on the Master Node</a></li>
</ul>
</li>
<li><a href="#creating-the-openshift-inventory-file">Creating the OpenShift Inventory File</a></li>
</ul>
<p>OKD brings together Docker and Kubernetes, and provides an API to manage these services. OKD allows you to create and manage containers.</p>
<p>Containers are standalone processes that run within their own environment, independent of the operating system and the underlying infrastructure. OKD helps you to develop, deploy, and manage container-based applications. It provides you with a self-service platform to create, modify, and deploy applications on demand, thus enabling faster development and release life cycles.</p>
<h2 id="system-and-environment-requirements">System and environment requirements</h2>
<ul>
<li><strong>Master hosts</strong> In a highly available OKD cluster with external etcd, a master host needs to meet the minimum requirements and have 1 CPU core and 1.5 GB of memory for each 1000 pods. Therefore, the recommended size of a master host in an OKD cluster of 2000 pods is the minimum requirements of 2 CPU cores and 16 GB of RAM, plus 2 CPU cores and 3 GB of RAM, totaling 4 CPU cores and 19 GB of RAM.</li>
</ul>
<ul>
<li><strong>Node hosts</strong>: The size of a node host depends on the expected size of its workload. As an OKD cluster administrator, you need to calculate the expected workload and add about 10 percent for overhead. For production environments, allocate enough resources so that a node host failure does not affect your maximum capacity.</li>
</ul>
<hr>
<ol>
<li><code>/var/lib/openshift</code></li>
</ol>
<ul>
<li>Used for etcd storage only when in single master mode and etcd is embedded in the atomic-openshift-master process.</li>
<li>Less than 10GB.</li>
<li>Will grow slowly with the environment. Only storing metadata.</li>
</ul>
<ol start="2">
<li><code>/var/lib/etcd</code></li>
</ol>
<ul>
<li>Used for etcd storage when in Multi-Master mode or when etcd is made standalone by an administrator.</li>
<li>Less than 20 GB.</li>
<li>Will grow slowly with the environment. Only storing metadata.</li>
</ul>
<ol start="3">
<li><code>/var/lib/docker</code></li>
</ol>
<ul>
<li>When the run time is docker, this is the mount point. Storage used for active container runtimes (including pods) and storage of local images (not used for registry storage). Mount point should be managed by docker-storage rather than manually.</li>
<li>50 GB for a Node with 16 GB memory. Additional 20-25 GB for every additional 8 GB of memory.</li>
<li>Growth is limited by the capacity for running containers.</li>
</ul>
<ol start="4">
<li><code>/var/lib/containers</code></li>
</ol>
<ul>
<li>When the run time is CRI-O, this is the mount point. Storage used for active container runtimes (including pods) and storage of local images (not used for registry storage).</li>
<li>50 GB for a Node with 16 GB memory. Additional 20-25 GB for every additional 8 GB of memory.</li>
<li>Growth limited by capacity for running containers</li>
</ul>
<ol start="5">
<li><code>/var/lib/origin/openshift.local.volumes</code></li>
</ol>
<ul>
<li>Ephemeral volume storage for pods. This includes anything external that is mounted into a container at runtime. Includes environment variables, kube secrets, and data volumes not backed by persistent storage PVs.</li>
<li>Varies</li>
<li>Minimal if pods requiring storage are using persistent volumes. If using ephemeral storage, this can grow quickly.</li>
</ul>
<ol start="6">
<li><code>/var/log</code></li>
</ol>
<ul>
<li>Log files for all components.</li>
<li>10 to 30 GB.</li>
<li>Log files can grow quickly; size can be managed by growing disks or managed using log rotate.</li>
</ul>
<hr>
<h3 id="selinux-requirements">SELinux requirements</h3>
<p>Security-Enhanced Linux (SELinux) must be enabled on all of the servers before installing OKD or the installer will fail. Also, configure <code>SELINUX=enforcing</code> and <code>SELINUXTYPE=targeted</code> in the <code>/etc/selinux/config</code> file:</p>
<pre><code class="language-cfg"># This file controls the state of SELinux on the system.
# SELINUX= can take one of these three values:
#     enforcing - SELinux security policy is enforced.
#     permissive - SELinux prints warnings instead of enforcing.
#     disabled - No SELinux policy is loaded.
SELINUX=enforcing
# SELINUXTYPE= can take one of three two values:
#     targeted - Targeted processes are protected,
#     minimum - Modification of targeted policy. Only selected processes are protected.
#     mls - Multi Level Security protection.
SELINUXTYPE=targeted
</code></pre>
<h3 id="optional-configuring-core-usage">Optional: Configuring Core Usage</h3>
<p>By default, OKD masters and nodes use all available cores in the system they run on. You can choose the number of cores you want OKD to use by setting the GOMAXPROCS environment variable. For example, run the following before starting the server to make OKD only run on one core:</p>
<pre><code class="language-bash"># export GOMAXPROCS=1
</code></pre>
<h3 id="dns-requirements">DNS Requirements</h3>
<p>Adding entries into the <code>nano /etc/hosts</code> file on each host is not enough (<em>? According to the official documentation ?</em>). In the example below all three host - one master and two minions - are resolved by their domain name <code>in-centos-master</code>, <code>in-centos-minion1</code>, <code>in-centos-minion2</code>:</p>
<pre><code># The following lines are desirable for IPv4 capable hosts
127.0.0.1 localhost.localdomain localhost
127.0.0.1 localhost4.localdomain4 localhost4

# The following lines are desirable for IPv6 capable hosts
::1 localhost.localdomain localhost
::1 localhost6.localdomain6 localhost6

# Kubernetes Cluster
193.101.18.2 in-centos-master master
116.211.18.8 in-centos-minion1 minion1
78.33.18.14 in-centos-minion2 minion2
</code></pre>
<p>You can test that the nodes are able to reach each other by sending a ping: <code>ping master</code>, <code>ping minion1</code>, <code>ping minion2</code>. You can set those hostnames on each node with the following command:</p>
<pre><code class="language-bash">hostnamectl set-hostname in-centos-master  # for the master node, etc.
</code></pre>
<h3 id="packages-requirements">Packages Requirements</h3>
<p>On a fresh Centos-minimal install you will have to install the following packages on all nodes:</p>
<pre><code class="language-bash">yum install -y wget git zile nano net-tools docker bind-utils iptables-services bridge-utils bash-completion kexec-tools sos psacct openssl-devel httpd-tools NetworkManager python-cryptography python2-pip python-devel python-passlib java-1.8.0-openjdk-headless &#x27;@Development Tools&#x27;
</code></pre>
<h2 id="openshift-installation">OpenShift Installation</h2>
<p>Add the Epel Release (and disable it by default) and the Centos Openshift Mirror:</p>
<pre><code class="language-bash">rpm -ivh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm

sed -i -e &#x27;s/^enabled=1/enabled=0/&#x27; /etc/yum.repos.d/epel.repo

nano /etc/yum.repos.d/Openshift.repo
</code></pre>
<p>Add the following configuration:</p>
<pre><code class="language-yaml">[openshift]
name=CentOS-OpenShift
baseurl=http://mirror.centos.org/centos/7/paas/x86_64/openshift-origin39
gpgcheck=0
enabled=1
</code></pre>
<p>And check that both have been added with:</p>
<pre><code class="language-bash">yum repolist
</code></pre>
<h3 id="enable-networkmanager-and-docker-services">Enable NetworkManager and Docker Services</h3>
<pre><code class="language-bash">systemctl start NetworkManager
systemctl enable NetworkManager
systemctl status NetworkManager

systemctl start docker
systemctl enable docker
systemctl status docker
</code></pre>
<h3 id="install-ansible-and-clone-openshift-ansible-on-the-master-node">Install Ansible and Clone Openshift-Ansible on the Master Node</h3>
<p>Now we can install <a href="https://docs.ansible.com/">Ansible</a> from the Epel repository - note you need to enable it first if you followed along and disabled it earlier:</p>
<pre><code class="language-bash">yum -y --enablerepo=epel install ansible pyOpenSSL
git clone https://github.com/openshift/openshift-ansible.git
cd openshift-ansible &amp;&amp; git fetch &amp;&amp; git checkout release-3.11
</code></pre>
<p>Now we have the <a href="https://github.com/openshift/openshift-ansible">OpenShift-Ansible</a> package cloned and the checked out the latest stable version 3.11.</p>
<h3 id="generate-ssh-keys-on-the-master-node">Generate SSH Keys on the Master Node</h3>
<p>We can now generate an SSH key on our master and copy it to the minion nodes:</p>
<pre><code class="language-bash">ssh-keygen -f ~/.ssh/id_rsa -N &#x27;&#x27;
</code></pre>
<p>This will generate a key in <code>~/.ssh/id_rsa.pub</code> that you have to copy to each node to be able to ssh into those nodes without a password:</p>
<pre><code class="language-bash">ssh-copy-id -i ~/.ssh/id_rsa.pub master -p 22
ssh-copy-id -i ~/.ssh/id_rsa.pub minion1 -p 22
ssh-copy-id -i ~/.ssh/id_rsa.pub minion2 -p 22
</code></pre>
<p>Now verify that you are able to access each node from the master without having to use your password to login:</p>
<pre><code class="language-bash">ssh root@master -p 22
ssh root@minion1 -p 22
ssh root@minion2 -p 22
</code></pre>
<h2 id="creating-the-openshift-inventory-file">Creating the OpenShift Inventory File</h2>
<p><a href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_intro.html">Playbooks</a> are a completely different way to use ansible than in ad-hoc task execution mode, and are particularly powerful.</p>
<p>Simply put, playbooks are the basis for a really simple configuration management and multi-machine deployment system, unlike any that already exist, and one that is very well suited to deploying complex applications. Playbooks can declare configurations, but they can also orchestrate steps of any manual ordered process, even as different steps must bounce back and forth between sets of machines in particular orders. They can launch tasks synchronously or asynchronously.</p>
<p>Ansible works against multiple systems in your infrastructure at the same time. It does this by selecting portions of systems listed in <a href="https://docs.ansible.com/ansible/latest/user_guide/intro_inventory.html">Ansible’s inventory</a>. You can check out <code>cd ~/openshift-ansible/inventory</code> for some example files.</p>
<p>Based on those files we can create our first own <code>nano inventory.ini</code>:</p>
<pre><code class="language-ini"># OpenShift-Ansible host inventory

# Create an OSEv3 group that contains the masters and nodes groups
[OSEv3:children]
masters
nodes
etcd


# Set variables common for all OSEv3 hosts
[OSEv3:vars]
ansible_ssh_user=root
enable_excluders=False
enable_docker_excluder=False
openshift_enable_service_catalog=False
ansible_service_broker_install=False

# Debug level for all OpenShift components (Defaults to 2)
debug_level=2

containerized=True
os_sdn_network_plugin_name=&#x27;redhat/openshift-ovs-multitenant&#x27;
openshift_disable_check=disk_availability,docker_storage,memory_availability,docker_image_availability

openshift_node_kubelet_args={&#x27;pods-per-core&#x27;: [&#x27;10&#x27;]}

deployment_type=origin
openshift_deployment_type=origin

openshift_release=v3.11.0
openshift_pkg_version=v3.11.0
openshift_image_tag=v3.11.0
openshift_service_catalog_image_version=v3.11.0
openshift_service_broker_image_version=v3.11.0
osm_use_cockpit=true

# Router on dedicated Infra Node
openshift_hosted_router_selector=&#x27;region=infra&#x27;
openshift_master_default_subdomain=apps.test.instar.wiki
openshift_public_hostname=master.test.instar.wiki

# Image Registry on dedicated Infra Node
openshift_hosted_registry_selector=&#x27;region=infra&#x27;

# htpasswd authentication with OSAdmin / dmlAjICyfrYXCsEH3NOoeeZMBkbo9G0JJy70z4etiO1dlCoo
openshift_master_identity_providers=[{&#x27;name&#x27;: &#x27;htpasswd_auth&#x27;, &#x27;login&#x27;: &#x27;true&#x27;, &#x27;challenge&#x27;: &#x27;true&#x27;, &#x27;kind&#x27;: &#x27;HTPasswdPasswordIdentityProvider&#x27;, &#x27;filename&#x27;: &#x27;/etc/origin/master/htpasswd&#x27;}]
openshift_master_htpasswd_users={&#x27;OSAdmin&#x27;: &#x27;$apr1$de7aZ7AQ$b0/L6hgDDskpuKekx/kfe.&#x27;}

# Check http://www.htaccesstools.com/htpasswd-generator/

[masters]
in-centos-master openshift_ip=195.201.148.210 openshift_port=45454


[etcd]
in-centos-master openshift_ip=195.201.148.210 openshift_port=45454


[nodes]
in-centos-master openshift_ip=195.201.148.210 openshift_port=56721 openshift_schedulable=true
in-centos-minion1 openshift_ip=116.203.51.18 openshift_schedulable=true openshift_node_labels=&#x27;{&#x27;region&#x27;: &#x27;infra&#x27;, &#x27;zone&#x27;: &#x27;default&#x27;}&#x27;
in-centos-minion2 openshift_ip=78.46.145.148 openshift_port=35745 openshift_schedulable=true openshift_node_labels=&#x27;{&#x27;region&#x27;: &#x27;primary&#x27;, &#x27;zone&#x27;: &#x27;default&#x27;}&#x27;
</code></pre>
<p>We can now use the Ansible Playbook command to check the prerequisites to deploy the OpenShift Cluster:</p>
<pre><code class="language-bash">ansible-playbook -i inventory/inventory.ini playbooks/prerequisites.yml
</code></pre></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/linux">LINUX</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/docker">Docker</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/open-shift">OpenShift</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Kubernetes/2019-03-05--first-openshift3-cluster/index.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/DevOps/Kubernetes/2022-11-19--k3s-air-gapped-kubernetes/2022-11-19"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Kubernetes Beyond the Edge</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/DevOps/Kubernetes/2019-03-02--installing-openshift-3-on-centos-7/2019-03-02"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Red Hat OpenShift 3 Container Platform</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#system-and-environment-requirements" class="table-of-contents__link toc-highlight">System and environment requirements</a><ul><li><a href="#selinux-requirements" class="table-of-contents__link toc-highlight">SELinux requirements</a></li><li><a href="#optional-configuring-core-usage" class="table-of-contents__link toc-highlight">Optional: Configuring Core Usage</a></li><li><a href="#dns-requirements" class="table-of-contents__link toc-highlight">DNS Requirements</a></li><li><a href="#packages-requirements" class="table-of-contents__link toc-highlight">Packages Requirements</a></li></ul></li><li><a href="#openshift-installation" class="table-of-contents__link toc-highlight">OpenShift Installation</a><ul><li><a href="#enable-networkmanager-and-docker-services" class="table-of-contents__link toc-highlight">Enable NetworkManager and Docker Services</a></li><li><a href="#install-ansible-and-clone-openshift-ansible-on-the-master-node" class="table-of-contents__link toc-highlight">Install Ansible and Clone Openshift-Ansible on the Master Node</a></li><li><a href="#generate-ssh-keys-on-the-master-node" class="table-of-contents__link toc-highlight">Generate SSH Keys on the Master Node</a></li></ul></li><li><a href="#creating-the-openshift-inventory-file" class="table-of-contents__link toc-highlight">Creating the OpenShift Inventory File</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Research</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Notebook</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tags">Tags</a></li><li class="footer__item"><a class="footer__link-item" href="/Curriculum-Vitae">CV</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/in/mike-polinowski-6396ba121/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/MikePolinowski" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.flickr.com/people/149680084@N06/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flickr<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/mpolinowski" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Mike Polinowski, INSTAR Deutschland GmbH, Shenzhen - China.</div></div></div></footer></div>
</body>
</html>