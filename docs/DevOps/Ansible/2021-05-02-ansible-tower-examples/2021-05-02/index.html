<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-DevOps/Ansible/2021-05-02-ansible-tower-examples/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Ansible Tower Practical Examples | Mike Polinowski</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://mpolinowski.github.io/docs/DevOps/Ansible/2021-05-02-ansible-tower-examples/2021-05-02"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Ansible Tower Practical Examples | Mike Polinowski"><meta data-rh="true" name="description" content="Guangzhou, China"><meta data-rh="true" property="og:description" content="Guangzhou, China"><link data-rh="true" rel="icon" href="/img/icons/favicon-32x32.png"><link data-rh="true" rel="canonical" href="https://mpolinowski.github.io/docs/DevOps/Ansible/2021-05-02-ansible-tower-examples/2021-05-02"><link data-rh="true" rel="alternate" href="https://mpolinowski.github.io/docs/DevOps/Ansible/2021-05-02-ansible-tower-examples/2021-05-02" hreflang="en"><link data-rh="true" rel="alternate" href="https://mpolinowski.github.io/docs/DevOps/Ansible/2021-05-02-ansible-tower-examples/2021-05-02" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Mike Polinowski RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Mike Polinowski Atom Feed">




<link rel="icon" href="/img/angular_momentum.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37,194,160)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/angular_momentum.png">
<link rel="mask-icon" href="/img/angular_momentum.png" color="rgb(33,33,33)">
<meta name="msapplication-TileImage" content="/img/angular_momentum.png">
<meta name="msapplication-TileColor" content="#000">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-P74BDWF0C6"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-P74BDWF0C6",{})</script><link rel="stylesheet" href="/assets/css/styles.08c8c484.css">
<script src="/assets/js/runtime~main.a54fca34.js" defer="defer"></script>
<script src="/assets/js/main.93a0244f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/angular_momentum.png" alt="Mike Polinowski :: Dev Notebook" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/angular_momentum.png" alt="Mike Polinowski :: Dev Notebook" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Mike Polinowski</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/docs/tags">Tags</a><a class="navbar__item navbar__link" href="/Search">Search</a><a href="https://mpolinowski.github.io/Personal" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">About<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/mpolinowski" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/development">Development</a><button aria-label="Expand sidebar category &#x27;Development&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/devops">DevOps</a><button aria-label="Collapse sidebar category &#x27;DevOps&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/hashicorp">Hashicorp</a><button aria-label="Expand sidebar category &#x27;Hashicorp&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/zabbix">Zabbix</a><button aria-label="Expand sidebar category &#x27;Zabbix&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/server-provisioning">Server Provisioning</a><button aria-label="Expand sidebar category &#x27;Server Provisioning&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/gitops">GitOps</a><button aria-label="Expand sidebar category &#x27;GitOps&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/kubernetes">Kubernetes</a><button aria-label="Expand sidebar category &#x27;Kubernetes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/nginx">NGINX</a><button aria-label="Expand sidebar category &#x27;NGINX&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/elasticsearch">Elasticsearch</a><button aria-label="Expand sidebar category &#x27;Elasticsearch&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/ansible">Ansible</a><button aria-label="Collapse sidebar category &#x27;Ansible&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/DevOps/Ansible/2021-05-02-ansible-tower-examples/2021-05-02">Ansible Tower Practical Examples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Ansible/2021-05-01-ansible-tower-workflow-templates/2021-05-01">Ansible Tower Workflow Templates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Ansible/2021-04-30-ansible-tower-slack-notifications/2021-04-30">Slack Notifications for Ansible Tower (AWX)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Ansible/2021-04-29-ansible-tower-setup/2021-04-29">Setting up Ansible Tower (AWX)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Ansible/2021-04-28-ansible-tower-rhel/2021-04-28">Installing Ansible Tower (AWX in Docker) on RHEL8</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Ansible/2020-11-26--ansible-dind/2020-11-26">Ansible Docker-in-Docker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Ansible/2020-11-25--ansible-in-gitlab-ci/2020-11-25">Ansible in Gitlab CI Pipelines</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Ansible/2020-11-24--ansible-vault-user-login/2020-11-24">Ansible Vault for User Logins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Ansible/2020-11-23--ansible-getting-serious/2020-11-23">Ansible Getting Serious</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Ansible/2020-11-22--ansible-and-docker/2020-11-22">Ansible for Docker Deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Ansible/2020-11-21--ansible-modules-and-roles/2020-11-21">Ansible Vault, Modules &amp; Roles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Ansible/2020-11-20--ansible-copy-cheat-sheet/2020-11-20">Ansible Copy Cheat Sheet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Ansible/2020-11-19--ansible-playbooks/2020-11-19">Ansible Playbooks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Ansible/2020-11-18--ansible-on-debian-buster/2020-11-18">Setting up a Ansible on Debian Buster</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/server-security">Server Security</a><button aria-label="Expand sidebar category &#x27;Server Security&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/linux">Linux</a><button aria-label="Expand sidebar category &#x27;Linux&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/windows">Windows</a><button aria-label="Expand sidebar category &#x27;Windows&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/tomcat">Tomcat</a><button aria-label="Expand sidebar category &#x27;Tomcat&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/salt">Salt</a><button aria-label="Expand sidebar category &#x27;Salt&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/machine-learning-ai-and-computer-vision">Machine Learning, AI and Computer Vision</a><button aria-label="Expand sidebar category &#x27;Machine Learning, AI and Computer Vision&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/automation-deep-vision-and-robotics">Automation, Deep Vision and Robotics</a><button aria-label="Expand sidebar category &#x27;Automation, Deep Vision and Robotics&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/devops"><span itemprop="name">DevOps</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/ansible"><span itemprop="name">Ansible</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Ansible Tower Practical Examples</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Ansible Tower Practical Examples</h1></header><p><img alt="Guangzhou, China" src="/assets/images/photo-456tdsfggd_67gfh6dgdf4_d-c013cf2b1291840bc1143c6e5e73b4b0.jpg" width="1500" height="598"></p>
<ul>
<li><a href="#updating-a-discourse-forum">Updating a Discourse Forum</a>
<ul>
<li><a href="#create-an-inventory">Create an Inventory</a></li>
<li><a href="#adding-server-credentials">Adding Server Credentials</a></li>
<li><a href="#adding-the-project">Adding the Project</a></li>
<li><a href="#adding-the-job-template">Adding the Job Template</a></li>
<li><a href="#adding-a-workflow">Adding a Workflow</a></li>
</ul>
</li>
<li><a href="#working-with-docker-container">Working with Docker Container</a>
<ul>
<li><a href="#installing-docker">Installing Docker</a></li>
<li><a href="#running-containers">Running Containers</a></li>
</ul>
</li>
<li><a href="#setup-certbot">Setup Certbot</a></li>
<li><a href="#setting-up-elasticsearch">Setting Up Elasticsearch</a>
<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#cert-renewal">Cert Renewal</a></li>
</ul>
</li>
<li><a href="#adding-a-server-to-zabbix-monitor">Adding a server to Zabbix Monitor</a></li>
</ul>
<p>I now set up Ansible Tower and want to integrate it into my CI Pipelines. Here are a couple of Tasks that I previously started by SSH&#x27;ing into those servers or by manually starting Ansible Plays. Let&#x27;s see how I can add them to the Tower UI.</p>
<h2 id="updating-a-discourse-forum">Updating a Discourse Forum</h2>
<p>To update our Forum I have to:</p>
<ol>
<li>login to the respective server</li>
<li>change to the directory that holds the source code</li>
<li>git pull the latest updates</li>
<li>rebuild the app using the Discourse CLI</li>
</ol>
<p>Let&#x27;s automate this!</p>
<h3 id="create-an-inventory">Create an Inventory</h3>
<p>In the Tower UI click on <strong>Resources</strong> / <strong>Inventories</strong> and switch to the <strong>Hosts</strong> tab. Click on <strong>Add</strong> and add your Server IP address and SSH port:</p>
<pre><code class="language-yml">---
ansible_host: 112.11.1.221
ansible_port: 12345
</code></pre>
<p><img alt="Ansible Tower Practical Examples" src="/assets/images/Ansible_Tower_Workflows_01-227ccd2891b5920cd204afbe321506ec.png" width="1289" height="688"></p>
<p>Save the <strong>Host</strong> and <strong>Inventory</strong>.</p>
<h3 id="adding-server-credentials">Adding Server Credentials</h3>
<p>In the Tower UI click on <strong>Resources</strong> / <strong>Credentials</strong> and click on <strong>Add</strong>. Choose <strong>Machine</strong> as credential type and add your server SSH username and password:</p>
<p><img alt="Ansible Tower Practical Examples" src="/assets/images/Ansible_Tower_Workflows_02-ee7f3c240d40427b472e4472024c3ae1.png" width="1274" height="557"></p>
<p>Save your settings.</p>
<h3 id="adding-the-project">Adding the Project</h3>
<p>Before actually adding the Project we need a second <strong>Credential</strong> that allows us to download the Ansible Playbook from a private Gitlab server. For this, create a user in Gitlab (or on Github, in Subversion, etc.) that has access to the repositories you want to use. Back in the Tower UI <strong>Resources</strong> / <strong>Credentials</strong> and click on <strong>Add</strong>. This time choose <strong>Source Control</strong> as <strong>Credential Type</strong> and add your Gitlab username and password:</p>
<p><img alt="Ansible Tower Practical Examples" src="/assets/images/Ansible_Tower_Workflows_03-3612a159ea43fb76363b9db4e40ba4f9.png" width="1273" height="778"></p>
<p>Make sure to <a href="/docs/DevOps/Ansible/2021-04-29-ansible-tower-setup/2021-04-29#creating-a-githubgitlab-scm-project">add your SSH Key</a> in the field at the bottom of the form!</p>
<p>Save your settings and switch to the <strong>Resources</strong> / <strong>Projects</strong> menu. Click on <strong>Add</strong> to add your project:</p>
<p><img alt="Ansible Tower Practical Examples" src="/assets/images/Ansible_Tower_Workflows_04-cee2c274e3f6e7df864176a3bac45e8e.png" width="1269" height="654"></p>
<p>Choose your <strong>Source Control Credential Type</strong> - for Gitlab that is <strong>Git</strong> - and add the HTTPS URL to the repository that holds your Ansibel Playbook. To be able to clone the repository add the Gitlab user you just created, as <strong>Source Control Credential</strong>.</p>
<p>The repository holds a single file:</p>
<p><em>forumDE_rebuild_discourse.yml</em></p>
<pre><code class="language-yml">---
- hosts: ForumDE-Discourse
  gather_facts: no

  vars:
    ansible_python_interpreter: /bin/python3

  tasks:
  
  - name: Pull latest Release &amp; Update the Discourse Forum
    ansible.builtin.shell:
      cmd: git pull &amp;&amp; ./launcher rebuild app
      chdir: /opt/discourse/

</code></pre>
<p>This play does everything I listed as requirement above.</p>
<blockquote>
<p><strong>Note</strong>: I ran into a couple of issues with Ansible refusing to run on my minion server. The solution was to make Python3 the default version of Python on my minion and adding the path to the Python3 binary to my play.</p>
</blockquote>
<p>Save the project and back on the Projects overview page click click on <strong>Sync</strong> to have Ansible Tower download your Playbook from Gitlab.</p>
<h3 id="adding-the-job-template">Adding the Job Template</h3>
<p>Go to <strong>Resources</strong> / <strong>Template</strong> and click on <strong>Add</strong> to add a <strong>Job</strong> template. Now here everything we did before comes to together:</p>
<ol>
<li>Add your Inventory</li>
<li>Add your Project</li>
<li>Choose the Play (Ansible Tower will list all the valid plays that it can find in your Playbook)</li>
<li>Add your Server Credentials</li>
</ol>
<p>As job type I choose <strong>Check</strong> and ticked <strong>Prompt on Launch</strong>. This way I can first do a dry run and on the second go choose <strong>Run</strong> instead. And while we are at it - save your settings and go back to <strong>Templates</strong>. Your Job will be listed here. Click on launch and choose to either <em>dry run</em> or <em>run</em>. See if everything is working.</p>
<p><img alt="Ansible Tower Practical Examples" src="/assets/images/Ansible_Tower_Workflows_05-dfe1133dd99e6cb6af9eb848348cd9ba.png" width="1267" height="591"></p>
<h3 id="adding-a-workflow">Adding a Workflow</h3>
<p>Now I am ready to wrap things up into a workflow - this works just like a <strong>Job Template</strong> but allows you to connect a bunch of jobs into a chain of nodes with some <code>if-this-then-that</code> logic - if you wish.</p>
<p><img alt="Ansible Tower Practical Examples" src="/assets/images/Ansible_Tower_Workflows_06-4513e5a964e41fa4399cfa018c3a1c51.png" width="1260" height="521"></p>
<p>Go to <strong>Resources</strong> / <strong>Template</strong> and click on <strong>Add</strong> to add a <strong>Workflow</strong> template. Just add the <strong>Inventory</strong> you are working from and hit <strong>Save</strong>.</p>
<p><img alt="Ansible Tower Practical Examples" src="/assets/images/Ansible_Tower_Workflows_07-dbb64553937e45d04f3ac4599af030c2.png" width="1284" height="284"></p>
<p>This now opens the <strong>Visualizer</strong> where I am going to add two nodes:</p>
<ol>
<li>Update the Playbook we are working with</li>
<li>Run the Ansible Play</li>
</ol>
<p>For the first choose <strong>Project Sync</strong> and choose the project from the list below. This will make sure that we are always using the latest playbook that was committed to the repository:</p>
<p><img alt="Ansible Tower Practical Examples" src="/assets/images/Ansible_Tower_Workflows_08-ead7e87a1657a9d243ec0b0444cfffde.png" width="1106" height="512"></p>
<p>And the second is a <strong>Job Template</strong> node where you have to select the job we created:</p>
<p><img alt="Ansible Tower Practical Examples" src="/assets/images/Ansible_Tower_Workflows_09-a26e9d553cd8c23d33a45a236dc3e37e.png" width="1091" height="310"></p>
<h2 id="working-with-docker-container">Working with Docker Container</h2>
<h3 id="installing-docker">Installing Docker</h3>
<p>Now without so much details - the steps are identical to the example above. To work with Docker on our host we first have to make sure that Docker is set up. I am doing this using <strong>Ansible Roles</strong>:</p>
<pre><code class="language-yml">- hosts: Wiki_Virtual
  gather_facts: yes

  vars:
    ansible_python_interpreter: /bin/python3
    pip_install_packages:
      - name: docker
      - name: setuptools
      - name: docker-compose

  roles:
    - geerlingguy.pip
    - geerlingguy.docker
</code></pre>
<p>To be able to use roles create a <strong>roles</strong> folder in your Playbook repository and add the folders inside for your roles - e.g. :</p>
<pre><code class="language-yml">- roles
  - geerlingguy.pip
  - geerlingguy.docker
- install-docker-playbook.yml
</code></pre>
<p>And <code>git clone</code> the source code of those roles into their corresponding folders:</p>
<ul>
<li><a href="https://github.com/geerlingguy/ansible-role-pip">ansible-role-pip</a></li>
<li><a href="https://github.com/geerlingguy/ansible-role-docker">ansible-role-docker</a></li>
</ul>
<p>When you now run <code>install-docker-playbook.yml</code> those roles will be found by Ansible. Now go to the steps above until you have a job template that uses this playbook. Run the playbook in Ansible Tower to install Docker and Docker-Compose on your minion server.</p>
<h3 id="running-containers">Running Containers</h3>
<p>I now want to add my Docker App to an existing Docker Cluster - <a href="/docs/DevOps/NGINX/2021-02-22-nginx-docker-ingress/2021-02-22">as described in an earlier Tutorial</a></p>
<p>The playbook downloads the latest Version of the Docker image, kills the running container (in case that we are updating our app) and then spawns a new container based on the latest image:</p>
<pre><code class="language-yml">---
- hosts: Wiki_Virtual
  gather_facts: no

  vars:
    ansible_python_interpreter: /bin/python3

  tasks:

    - name: Include vault for registry login
      include_vars:
        file: vault.yml

    - name: Log into Docker Registry and force re-authorization
      docker_login:
        registry: my.gitlab.com
        username: &quot;{{ username }}&quot;
        password: &quot;{{ password }}&quot;
        reauthorize: yes

    - name: Download the latest Wiki build images
      shell: docker pull my.gitlab.com:12345/wiki/{{ item }}
      with_items:
        - wiki_en_mdx
  
    - name: Remove the EN Wiki Container
      docker_container:
        name: wiki_en
        state: absent
  
    - name: Rebuild the EN Wiki Container
      docker_container:
        name: wiki_en
        image: my.gitlab.com:12345/wiki/wiki_en_mdx
        state: started
        restart_policy: unless-stopped
        networks:
          - name: wikinet
        networks_cli_compatible: yes

</code></pre>
<p>The new part here is the use of an <strong>Ansible Vault</strong> to get our Docker Registry login. I <a href="/docs/DevOps/Ansible/2020-11-21--ansible-modules-and-roles/2020-11-21#ansible-vault">already showed how to create this vault</a>. Add your username and password there and add the vault to your Playbook repository.</p>
<p>We now need to add the <strong>Vault Credentials</strong> to Ansible Tower. For this create a new <strong>Credential</strong>, choose <strong>Credential Type</strong> <strong>Vault</strong> and add your vault password.</p>
<p><img alt="Ansible Tower Practical Examples" src="/assets/images/Ansible_Tower_Workflows_10-e3301af6a22071b8f275e9d88fb2c0ac.png" width="1287" height="565"></p>
<p>The <strong>Job Template</strong> that uses this Playbook now needs two credentials - the minion SSH login and the vault password. Otherwise, it is identical to the example earlier:</p>
<p><img alt="Ansible Tower Practical Examples" src="/assets/images/Ansible_Tower_Workflows_11-92b243ec82ef4507c505ac36867cb9a5.png" width="1272" height="590"></p>
<p>Test run the job. Then create the workflow. Just as before.</p>
<h2 id="setup-certbot">Setup Certbot</h2>
<p>This is pretty much the same as setting up Docker using a ready-made Ansible role (s. above):</p>
<pre><code class="language-yml">---
- hosts: Wiki_Virtual    

  vars:
    ansible_python_interpreter: /bin/python3
    certbot_admin_email: m.polinowski@instar.com
    certbot_create_if_missing: true
    certbot_create_standalone_stop_services:
      - docker
    certbot_certs:
      - domains:
          - my.first.domain.com
          - my.second.domain.com
          - my.third.domain.com

  roles:
    - geerlingguy.certbot

</code></pre>
<blockquote>
<p><strong>Note</strong>: My NGINX Ingress runs inside a Docker container. That is why I need Certbot to restart the Docker process so that NGINX starts using the new certs after an update. Otherwise, just restart whatever service is using the certificate.</p>
</blockquote>
<h2 id="setting-up-elasticsearch">Setting Up Elasticsearch</h2>
<p>I am using a <strong>Docker Compose</strong> <a href="/docs/DevOps/Elasticsearch/2019-09-08--elasticsearch_7-5_docker/2019-09-08">file that I store on Gitlab to run Elasticsearch</a>. Again I am using an <strong>Ansible Vault</strong> file to log in to Gitlab and pull the latest version of this file to <code>/opt/wiki_elk</code>. After that I execute this file with Docker Compose:</p>
<h3 id="installation">Installation</h3>
<pre><code class="language-yml">---
- hosts: Wiki_Virtual
  gather_facts: no

  vars:
    ansible_python_interpreter: /bin/python3
    
  tasks:

    - name: Include vault for registry login
      include_vars:
        file: vault.yml

    - name: Get updated files from git repository 
      git: 
        repo: https://{{ username | urlencode }}:{{ password | urlencode }}@my.gitlab.com/wiki/wiki_elk.git
        clone: yes
        force: yes
        update: yes
        dest: /opt/wiki_elk

    - name: Start the Elasticsearch services
      docker_compose:
        project_src: /opt/wiki_elk

</code></pre>
<h3 id="cert-renewal">Cert Renewal</h3>
<pre><code class="language-yml">---
- hosts: Wiki_Virtual 
  gather_facts: no

  vars:
    ansible_python_interpreter: /bin/python3
    
  tasks:

    - name: Run Certbot Renew and Restart Docker
      shell: certbot renew --pre-hook &quot;service docker stop&quot; --post-hook &quot;service docker start&quot;
</code></pre>
<h2 id="adding-a-server-to-zabbix-monitor">Adding a server to Zabbix Monitor</h2>
<p>I am using the software <a href="/docs/DevOps/Zabbix/2020-07-17--zabbix-website-monitor/2020-07-17#discourse-forum">Zabbix to Monitor my Servers</a>. With the following script I am able to <a href="/docs/DevOps/Zabbix/2020-07-16--zabbix-agent/2020-07-16">setup the Zabbix Agent on my minion servers</a>:</p>
<pre><code class="language-yml">---
- hosts: Wiki_Virtual
  gather_facts: no

  vars:
    ansible_python_interpreter: /bin/python3

  tasks:
  
    - name: Create directory for Zabbix Keyfile
      file:
        path: /opt/zabbix
        state: directory
        mode: &#x27;0755&#x27;

    - name: Check if Zabbix Keyfile is already present
      stat:
        path: /opt/zabbix/agent_tls.psk
      register: check_key_result

    - name: Create Zabbix Keyfile
      shell: openssl rand -hex 32 &gt; agent_tls.psk
      args:
        chdir: /opt/zabbix/
      when: not check_key_result.stat.exists
        
    - name: Read Zabbix Keyfile
      shell: cat /opt/zabbix/agent_tls.psk
      register: zabbix_key
    
    - name: Print Zabbix Keyfile
      debug: var=zabbix_key

    - name: Installing Zabbix Agent 2
      docker_container:
        name: zabbix-agent2
        image: zabbix/zabbix-agent2:latest
        pull: yes
        restart: yes
        networks:
          - name: wikinet
        networks_cli_compatible: yes
        privileged: yes
        state: started
        restart_policy: unless-stopped
        ports:
          - &quot;10050:10050&quot;
        volumes:
          - /opt/zabbix:/var/lib/zabbix/enc
        env:
            ZBX_HOSTNAME: &lt;Set a Name you want to use to add this Server to Zabbix&gt;
            ZBX_SERVER_HOST: &lt;IP Address of the Zabbix Master Server&gt;
            ZBX_SERVER_PORT: &lt;Set the Zabbix Active Server Port&gt;
            ZBX_TLSCONNECT: &quot;psk&quot;
            ZBX_TLSACCEPT: &quot;psk&quot;
            ZBX_TLSPSKIDENTITY: &lt;Set a Name you want to use to add this Server to Zabbix&gt;
            ZBX_TLSPSKFILE: &quot;agent_tls.psk&quot;

</code></pre></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/linux">LINUX</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Ansible/2021-05-02-ansible-tower-examples/index.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/category/ansible"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Ansible</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/DevOps/Ansible/2021-05-01-ansible-tower-workflow-templates/2021-05-01"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Ansible Tower Workflow Templates</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#updating-a-discourse-forum" class="table-of-contents__link toc-highlight">Updating a Discourse Forum</a><ul><li><a href="#create-an-inventory" class="table-of-contents__link toc-highlight">Create an Inventory</a></li><li><a href="#adding-server-credentials" class="table-of-contents__link toc-highlight">Adding Server Credentials</a></li><li><a href="#adding-the-project" class="table-of-contents__link toc-highlight">Adding the Project</a></li><li><a href="#adding-the-job-template" class="table-of-contents__link toc-highlight">Adding the Job Template</a></li><li><a href="#adding-a-workflow" class="table-of-contents__link toc-highlight">Adding a Workflow</a></li></ul></li><li><a href="#working-with-docker-container" class="table-of-contents__link toc-highlight">Working with Docker Container</a><ul><li><a href="#installing-docker" class="table-of-contents__link toc-highlight">Installing Docker</a></li><li><a href="#running-containers" class="table-of-contents__link toc-highlight">Running Containers</a></li></ul></li><li><a href="#setup-certbot" class="table-of-contents__link toc-highlight">Setup Certbot</a></li><li><a href="#setting-up-elasticsearch" class="table-of-contents__link toc-highlight">Setting Up Elasticsearch</a><ul><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#cert-renewal" class="table-of-contents__link toc-highlight">Cert Renewal</a></li></ul></li><li><a href="#adding-a-server-to-zabbix-monitor" class="table-of-contents__link toc-highlight">Adding a server to Zabbix Monitor</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Research</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Notebook</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tags">Tags</a></li><li class="footer__item"><a class="footer__link-item" href="/Curriculum-Vitae">CV</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/in/mike-polinowski-6396ba121/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/MikePolinowski" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.flickr.com/people/149680084@N06/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flickr<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/mpolinowski" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Mike Polinowski, INSTAR Deutschland GmbH, Shenzhen - China.</div></div></div></footer></div>
</body>
</html>